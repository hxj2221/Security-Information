(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-88cf73aa"],{"2306c":function(e,t,l){"use strict";var a=l("2534"),i=l.n(a);i.a},2534:function(e,t,l){},7765:function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("div",{directives:[{name:"show",rawName:"v-show",value:e.filesIsShow,expression:"filesIsShow"}],staticClass:"filelist"},[l("div",{staticClass:"head"},[l("h4",{staticClass:"title"},[e._v("文件列表")]),l("div",{staticClass:"push_btn"},[l("el-button",{attrs:{type:"primary",size:"medium",icon:"el-icon-circle-plus"},on:{click:function(t){return e.uploadclassify()}}},[e._v("上传文件 ")]),l("el-button",{staticClass:"newflie",attrs:{type:"primary",size:"medium",icon:"el-icon-circle-plus"},on:{click:function(t){return e.newclassify()}}},[e._v("新建分类 ")])],1)]),l("div",{staticClass:"search"},[l("el-form",{ref:"form",staticClass:"search_form"},[l("el-form-item",{staticClass:"classify",attrs:{label:"文件分类"}},[l("el-select",{attrs:{placeholder:"请选择",clearable:""},on:{change:e.searchselchang,clear:e.delValue},model:{value:e.selregion,callback:function(t){e.selregion=t},expression:"selregion"}},[e._l(e.options,(function(t){return[l("el-option",{key:t.id,attrs:{label:t.class_name,value:t.id}}),t._child?e._l(t._child,(function(e){return l("el-option",{key:e.id,attrs:{label:"|——"+e.class_name,value:e.id}})})):e._e()]}))],2)],1),l("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容",clearable:""},on:{clear:e.delValue},model:{value:e.searchipt,callback:function(t){e.searchipt=t},expression:"searchipt"}},[l("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.filesearch},slot:"append"})],1)],1)],1),l("div",{staticClass:"TableContent"},[l("el-table",{attrs:{data:e.tableData,"max-height":"550","header-cell-style":e.getRowClass}},[l("el-table-column",{attrs:{width:"50",label:"序号",type:"index"}}),l("el-table-column",{attrs:{prop:"id",label:"ID"}}),l("el-table-column",{attrs:{prop:"file_name",label:"文件名"}}),l("el-table-column",{attrs:{prop:"file_describe",label:"文件描述"}}),l("el-table-column",{attrs:{prop:"file_size",label:"文件大小"}}),l("el-table-column",{attrs:{prop:"create_time",label:"更新时间",width:"230"}}),l("el-table-column",{attrs:{prop:"class_id",label:"文件分类"}}),l("el-table-column",{attrs:{prop:"uid",label:"上传人员"}}),l("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{staticStyle:{color:"#666ee8"},attrs:{type:"text",size:"small"},on:{click:function(l){return e.handleClick(t.row.id)}}},[e._v("下载")]),l("el-button",{staticStyle:{color:"#ff0000"},attrs:{type:"text",size:"small"},on:{click:function(l){return e.deleteRow(t.row.id)}}},[e._v(" 删除 ")])]}}])})],1)],1),l("div",{staticClass:"staffpag"},[l("div",{staticClass:"block"},[l("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":e.nums,"page-size":e.num,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])]),l("add-files",{directives:[{name:"show",rawName:"v-show",value:e.addIsShow,expression:"addIsShow"}],attrs:{newly:e.newfilelist},on:{addfileback:function(t){return e.newclassify()}}}),l("el-dialog",{attrs:{title:"上传文件",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[l("el-form",{staticClass:"demo-ruleForm",attrs:{"label-width":"100px"}},[l("el-form-item",{attrs:{label:"文件分类"}},[l("el-select",{staticClass:"newlyClassify",staticStyle:{float:"left"},attrs:{placeholder:"请选择"},on:{change:e.selchang},model:{value:e.editselvalue,callback:function(t){e.editselvalue=t},expression:"editselvalue"}},[e._l(e.editseldata,(function(t){return[l("el-option",{key:t.id,attrs:{label:t.class_name,value:t.id}}),t._child?e._l(t._child,(function(e){return l("el-option",{key:e.id,attrs:{label:"|——"+e.class_name,value:e.id}})})):e._e()]}))],2)],1),l("el-form-item",{attrs:{label:"文件标题"}},[l("el-input",{model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),l("el-form-item",{attrs:{label:"文件描述"}},[l("el-input",{attrs:{type:"textarea",maxlength:"50",placeholder:"请输入文件描述"},model:{value:e.filedescribe,callback:function(t){e.filedescribe=t},expression:"filedescribe"}})],1),l("el-form-item",{staticClass:"uploadfile",attrs:{label:"上传附件："}},[l("el-upload",{staticStyle:{float:"left"},attrs:{action:"http://bt1.wlqqlp.com:8082/api/file/event_base64_uploadfiles",limit:1,multiple:!1,"file-list":e.listsss,"on-change":e.handleChange,"on-exceed":e.exceed,"auto-upload":!1}},[l("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),l("div",{staticStyle:{color:"red"},attrs:{slot:"tip"},slot:"tip"},[e._v("文件最大不能超过20MB")])],1)],1)],1),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:e.Close}},[e._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:e.upfilesubmit}},[e._v("确 定")])],1)],1)],1)},i=[],s=(l("b0c0"),l("d3b7"),function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"newlyFiles"},[l("div",{staticClass:"head"},[l("h4",{staticClass:"title"},[e._v("编辑分类")]),l("div",{staticClass:"push_btn"},[l("el-button",{staticClass:"newclassify",attrs:{type:"primary",size:"medium",icon:"el-icon-circle-plus"},on:{click:e.createdlist}},[e._v("新建分类 ")]),l("el-button",{staticClass:"back",attrs:{size:"medium",type:"primary"},on:{click:e.back}},[e._v("返回文件列表")])],1)]),l("div",{staticClass:"newlyContent"},[l("div",{staticClass:"TableContent",staticStyle:{"max-height":"600px"}},[l("el-table",{attrs:{"max-height":"600",data:e.tableData,"row-key":"id","default-expand-all":"","tree-props":{children:"_child",hasChildren:"hasChildren"}}},[l("el-table-column",{attrs:{prop:"weight",label:"权重"}}),l("el-table-column",{attrs:{prop:"class_name",label:"分类名称",width:"190"}}),l("el-table-column",{attrs:{prop:"file_num",label:"文件数量",width:"190"}}),l("el-table-column",{attrs:{prop:"update_time",label:"更新时间",width:"190"}}),l("el-table-column",{attrs:{label:"状态",width:"190"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(l){return e.changeSwitch(l,t.row,t.row.id)}},model:{value:t.row.status,callback:function(l){e.$set(t.row,"status",l)},expression:"scope.row.status"}})]}}])}),l("el-table-column",{attrs:{prop:"uid",label:"修改人员",width:"190"}}),l("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{staticStyle:{color:"#666ee8"},attrs:{type:"text",size:"small"},on:{click:function(l){return e.handleClick(t.row.id)}}},[e._v("编辑")]),l("el-button",{staticStyle:{color:"#ff0000"},attrs:{type:"text",size:"small"},on:{click:function(l){return e.deleteRow(t.row.id)}}},[e._v(" 删除 ")])]}}])})],1)],1)]),l("el-dialog",{staticClass:"newlyClassify",attrs:{title:"添加分类",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[l("el-form",{attrs:{model:e.form}},[l("el-form-item",{attrs:{label:"上级分类",required:"","label-width":e.formLabelWidth}},[l("el-select",{attrs:{placeholder:"请选择"},on:{change:e.selchang},model:{value:e.editselvalue,callback:function(t){e.editselvalue=t},expression:"editselvalue"}},[l("el-option",{attrs:{label:"作为顶级",value:0}}),e._l(e.editseldata,(function(t){return[l("el-option",{key:t.id,attrs:{label:t.class_name,value:t.id}}),t._child?e._l(t._child,(function(e){return l("el-option",{key:e.id,attrs:{label:"|——"+e.class_name,value:e.id}})})):e._e()]}))],2),l("span",{staticClass:"one_level"},[e._v("一级分类选择“无”")])],1),l("el-form-item",{attrs:{label:"分类标题",required:"","label-width":e.formLabelWidth}},[l("el-input",{staticStyle:{width:"360px"},attrs:{placeholder:"请输入分类标题"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),l("el-form-item",{attrs:{label:"分类权重",required:"","label-width":e.formLabelWidth}},[l("el-input",{staticStyle:{width:"360px"},attrs:{placeholder:"默认0，越大越靠前"},model:{value:e.form.weight,callback:function(t){e.$set(e.form,"weight",t)},expression:"form.weight"}})],1)],1),l("div",{staticClass:"dialog-footer foot",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{staticStyle:{"border-color":"#0079fe",color:"#0079fe"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),l("el-button",{staticStyle:{background:"#0079fe",color:"#ffffff"},attrs:{type:"primary"},on:{click:e.dialogForm}},[e._v("确 定 ")])],1)],1),l("el-dialog",{staticClass:"newlyClassify",attrs:{title:"添加分类",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[l("el-form",{attrs:{model:e.form}},[l("el-form-item",{attrs:{label:"上级分类",required:"","label-width":e.formLabelWidth}},[l("el-select",{attrs:{placeholder:"请选择"},on:{change:e.selchang},model:{value:e.editselvalue,callback:function(t){e.editselvalue=t},expression:"editselvalue"}},[l("el-option",{attrs:{label:"作为顶级",value:0}}),e._l(e.editseldata,(function(t){return[l("el-option",{key:t.id,attrs:{label:t.class_name,value:t.id}}),t._child?e._l(t._child,(function(e){return l("el-option",{key:e.id,attrs:{label:"|——"+e.class_name,value:e.id}})})):e._e()]}))],2),l("span",{staticClass:"one_level"},[e._v("一级分类选择“无”")])],1),l("el-form-item",{attrs:{label:"分类标题",required:"","label-width":e.formLabelWidth}},[l("el-input",{staticStyle:{width:"360px"},attrs:{autocomplete:"off"},model:{value:e.edittitle,callback:function(t){e.edittitle=t},expression:"edittitle"}})],1),l("el-form-item",{attrs:{label:"分类权重",required:"","label-width":e.formLabelWidth}},[l("el-input",{staticStyle:{width:"360px"},attrs:{autocomplete:"off"},model:{value:e.editweight,callback:function(t){e.editweight=t},expression:"editweight"}})],1)],1),l("div",{staticClass:"dialog-footer foot",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{staticStyle:{"border-color":"#0079fe",color:"#0079fe"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),l("el-button",{staticStyle:{background:"#0079fe",color:"#ffffff"},attrs:{type:"primary"},on:{click:e.dialogeditsave}},[e._v("确 定 ")])],1)],1)],1)}),o=[],n=l("6022"),c={inject:["reload"],components:{},props:["newly"],data:function(){return{dialogFormVisible:!1,form:{title:"",weight:""},formLabelWidth:"120px",dialogVisible:!1,tableData:[],editseldata:[],editselvalue:0,edittitle:"",editweight:"",editid:""}},created:function(){},watch:{newly:function(e){console.log(e),this.tableData=e}},methods:{createdlist:function(){var e=this;this.dialogFormVisible=!0,n["a"].docaddtree().then((function(t){console.log(t),20010==t.code&&(e.editseldata=t.data)}))},selchang:function(){},dialogForm:function(){var e=this,t={class_name:this.form.title,weight:this.form.weight,pid:this.editselvalue};n["a"].docadd(t).then((function(t){"20010"==t.code&&(e.$message({type:"success",message:t.msg,duration:1300}),e.reload())}))},changeSwitch:function(e,t,l){var a={id:l};n["a"].docstatu(a).then((function(e){})),1==t.status?this.$message({type:"success",message:"文件启用成功"}):this.$message.error("文件停用成功")},back:function(){this.$emit("addfileback")},deleteRow:function(e){var t=this,l={id:e};n["a"].docdel(l).then((function(e){t.reload()}))},handleClick:function(e){var t=this;this.dialogVisible=!this.dialogVisible;var l={id:e};n["a"].docedit(l).then((function(e){t.edittitle=e.data[0].class_name,t.editweight=e.data[0].weight,t.editselvalue=e.data[0].pid,t.editid=e.data[0].id}))},dialogeditsave:function(){var e=this,t={weight:this.editweight,pid:this.editselvalue,class_name:this.edittitle,id:this.editid};n["a"].doceditsave(t).then((function(t){"20010"==t.code&&e.reload()}))}}},r=c,d=l("2877"),u=Object(d["a"])(r,s,o,!1,null,null,null),f=u.exports,h={inject:["reload"],components:{AddFiles:f},props:{},data:function(){return{dialogVisible:!1,ruleForm:{},name:"",selregion:"",listsss:[],filedescribe:"",desc:"",editseldata:[],editselvalue:"",fileList:[],tableData:[],filesIsShow:!0,addIsShow:!1,searchipt:"",options:[],tables1:[],currentPage:1,total:0,page:1,pageSize:1,nums:[8,10,20],num:8,newfilelist:[]}},created:function(){var e=this;n["a"].filelist().then((function(t){e.tableData=t.data,e.options=t.tree,e.total=t.allNews}));var t=sessionStorage.getItem("token");console.log(t)},methods:{getRowClass:function(e){var t=e.rowIndex;return 0==t?"background:#c2c5f6;color:#000":""},filesearch:function(){var e=this,t={file_name:this.searchipt,class_id:this.selregion};n["a"].filelist(t).then((function(t){e.tables1=e.tableData=t.data,e.total=t.allNews}))},searchselchang:function(){},uploadclassify:function(){var e=this;this.dialogVisible=!0,n["a"].filetree().then((function(t){console.log(t),e.editseldata=t.data}))},Close:function(){this.dialogVisible=!1},handleChange:function(e,t){this.file=t[0]},exceed:function(){this.$message({message:"单次只能上传一个文件",type:"error",duration:1e3})},upfilesubmit:function(){var e=this;this.getBase64(this.file.raw).then((function(t){var l={file_name:e.name,file_describe:e.filedescribe,class_id:e.editselvalue,base64_file:t};n["a"].fileupload(l).then((function(t){20010==t.code&&(e.$message({message:t.msg,type:"success",duration:1300}),e.reload())}))}))},getBase64:function(e){return new Promise((function(t,l){var a=new FileReader,i="";a.readAsDataURL(e),a.onload=function(){i=a.result},a.onerror=function(e){l(e)},a.onloadend=function(){t(i)}}))},selchang:function(){},deleteRow:function(e){var t=this,l={id:e};n["a"].filedel(l).then((function(e){t.$message({type:"success",message:e.msg,duration:1200}),t.reload()}))},handleClick:function(e){var t={id:e};n["a"].filedown(t).then((function(e){var t=document.createElement("a");t.href="http://bt1.wlqqlp.com:8082/"+e.data.fileurl,t.setAttribute("download","dsadsa"),document.body.appendChild(t),t.click()}))},newclassify:function(){var e=this;this.filesIsShow=!this.filesIsShow,this.addIsShow=!this.addIsShow,n["a"].doclist().then((function(t){console.log(t),e.newfilelist=t.data}))},handleSizeChange:function(e){var t=this;this.num=e;var l={pageSize:this.num,pageNum:this.currentPage,file_name:this.searchipt,class_id:this.selregion};console.log(l),n["a"].filelist(l).then((function(e){console.log(e),t.tables1=t.tableData=e.data,t.total=e.allNews}))},handleCurrentChange:function(e){var t=this;this.currentPage=e,console.log("当前页: ".concat(e));var l={pageSize:this.num,pageNum:this.currentPage,file_name:this.searchipt,class_id:this.selregion};console.log(l),n["a"].filelist(l).then((function(e){console.log(e),t.tables1=t.tableData=e.data,t.total=e.allNews}))},delValue:function(){var e=this,t={file_name:"",pageSize:this.num,pageNum:this.currentPage};n["a"].filelist(t).then((function(t){e.tables=e.tableData=t.data,console.log(t),e.total=t.allNews}))},indexMethod:function(e){return 1*e}}},m=h,p=(l("2306c"),Object(d["a"])(m,a,i,!1,null,null,null));t["default"]=p.exports}}]);