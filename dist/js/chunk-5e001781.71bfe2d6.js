(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e001781"],{"1f22":function(t,e,o){},"9fe5":function(t,e,o){},aa35:function(t,e,o){"use strict";var a=o("1f22"),i=o.n(a);i.a},d1e9:function(t,e,o){"use strict";var a=o("9fe5"),i=o.n(a);i.a},f4df:function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"powerheadThre"},[o("ul",{staticClass:"list"},[o("li",{staticClass:"stafflist",on:{click:t.staff}},[t._v("员工列表")]),o("li",{staticClass:"departlist",on:{click:t.depart}},[t._v("科室列表")]),o("li",{staticClass:"rolelist",on:{click:t.role}},[t._v("角色列表")]),o("li",{staticClass:"editpowlist",on:{click:t.editpow}},[t._v("编辑权限")])]),o("el-button",{staticClass:"powerAdd",attrs:{type:"primary",icon:"el-icon-circle-plus"},on:{click:t.staffadd}},[t._v("新增 ")])],1)])},i=[],l=o("6022"),s={data:function(){return{all:{},job_number:""}},methods:{staffadd:function(){var t=this;l["a"].getrole().then((function(e){console.log(e),t.all=e.data,t.bus.$emit("ReceiveMessage",t.all),t.$parent.fathpowadd()}))},staff:function(){this.$router.push("/Staff")},depart:function(){this.$router.push("/Department")},role:function(){this.$router.push("/Role")},editpow:function(){this.$router.push("/Edit")}}},n=s,d=(o("aa35"),o("2877")),c=Object(d["a"])(n,a,i,!1,null,"57699d60",null);e["a"]=c.exports},ffc4:function(t,e,o){"use strict";o.r(e);var a,i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"H-editAll"},[o("headpow"),o("div",{staticClass:"jurisdiction"},[o("el-table",{attrs:{data:t.tableData,"header-cell-style":t.getRowClass,"max-height":"600","row-key":"id",border:"","tree-props":{children:"_child",hasChildren:"hasChildren",id:"id",title:"title",sort:"sort",icon:"item.icon",name:"name",url:"url"}}},[o("el-table-column",{attrs:{type:"selection",width:"55"}}),o("el-table-column",{attrs:{type:"",width:"55",prop:"sort",label:"排序"}}),o("el-table-column",{attrs:{prop:"title",label:"名称",width:"180"}}),o("el-table-column",{attrs:{prop:"level",label:"等级",width:"180"}}),o("el-table-column",{attrs:{label:"左侧图标"},scopedSlots:t._u([{key:"default",fn:function(t){return[o("i",{class:t.row.icon})]}}])}),o("el-table-column",{attrs:{prop:"name",label:"接口地址"}}),o("el-table-column",{attrs:{prop:"url",label:"前端路由"}}),o("el-table-column",{attrs:{label:"角色状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(o){return t.changeSwitch(o,e.row,e.row.id)}},model:{value:e.row.status,callback:function(o){t.$set(e.row,"status",o)},expression:"scope.row.status"}})]}}])}),o("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{staticClass:"roleEdit",attrs:{type:"text",size:"small"},on:{click:function(o){return t.handleClick(e.row.id)}}},[t._v("添加子级")]),o("el-button",{staticClass:"roleEdit",attrs:{type:"text",size:"small"},on:{click:function(o){return t.handleEdit(e.row.id)}}},[t._v("编辑")]),o("el-button",{staticClass:"roleDel",attrs:{size:"small",type:"text"},on:{click:function(o){return t.delpow(e.row.id)}}},[t._v("删除")])]}}])})],1),o("div",[o("el-dialog",{attrs:{title:"添加权限",visible:t.dialogVisible,width:"width","before-close":t.dialogeditright,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("el-form",{ref:"editForm",attrs:{"label-width":"80px"}},[o("el-form-item",{attrs:{prop:"staffName",label:"上级",width:"120"}},[o("el-select",{attrs:{placeholder:"请选择"},on:{change:t.selchang},model:{value:t.selvalue,callback:function(e){t.selvalue=e},expression:"selvalue"}},[o("el-option",{attrs:{label:"作为顶级",value:"0"}}),t._l(t.seldata,(function(e){return[o("el-option",{key:e.id,attrs:{label:e.title,value:e.id}}),e._child?t._l(e._child,(function(t){return o("el-option",{key:t.id,attrs:{label:"|——"+t.title,value:t.id}})})):t._e()]}))],2)],1),o("el-form-item",{attrs:{label:"排序",width:"100"}},[o("el-input",{attrs:{placeholder:"数字越大，排序越小"},model:{value:t.powpx,callback:function(e){t.powpx=e},expression:"powpx"}})],1),o("el-form-item",{attrs:{label:"状态",width:"100"}},[[o("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.powstatu,callback:function(e){t.powstatu=e},expression:"powstatu"}})]],2),o("el-form-item",{attrs:{label:"标题",width:"150"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:t.powlab,callback:function(e){t.powlab=e},expression:"powlab"}})],1),o("el-form-item",{attrs:{label:"图标",width:"120"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:t.powicon,callback:function(e){t.powicon=e},expression:"powicon"}})],1),o("el-form-item",{attrs:{label:"后端接口",width:"120"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:t.powaps,callback:function(e){t.powaps=e},expression:"powaps"}})],1),o("el-form-item",{attrs:{label:"前端路由",width:"120"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:t.powweb,callback:function(e){t.powweb=e},expression:"powweb"}})],1)],1),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.dialog}},[t._v("确 定")])],1)],1)],1),o("div",[o("el-dialog",{attrs:{title:"编辑权限",visible:t.dialogedit,"close-on-click-modal":!1,width:"width","before-close":t.dialogBeforeCl},on:{"update:visible":function(e){t.dialogedit=e}}},[o("el-form",{ref:"editForm",attrs:{"label-width":"80px"}},[o("el-form-item",{attrs:{label:"上级",width:"120"}},[o("el-select",{attrs:{placeholder:"请选择",required:""},on:{change:t.selchang},model:{value:t.editselvalue,callback:function(e){t.editselvalue=e},expression:"editselvalue"}},[o("el-option",{attrs:{label:"作为顶级",value:0}}),t._l(t.editseldata,(function(e){return[o("el-option",{key:e.id,attrs:{label:e.title,value:e.id}}),e._child?t._l(e._child,(function(t){return o("el-option",{key:t.id,attrs:{label:"|——"+t.title,value:t.id}})})):t._e()]}))],2)],1),o("el-form-item",{attrs:{label:"排序",width:"100",required:""}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editpowpx,callback:function(e){t.editpowpx=e},expression:"editpowpx"}})],1),o("el-form-item",{attrs:{label:"状态",width:"100"}},[[o("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.editpowstatu,callback:function(e){t.editpowstatu=e},expression:"editpowstatu"}})]],2),o("el-form-item",{attrs:{label:"标题",width:"150",required:""}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editpowlab,callback:function(e){t.editpowlab=e},expression:"editpowlab"}})],1),o("el-form-item",{attrs:{label:"图标",width:"120",required:""}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editpowicon,callback:function(e){t.editpowicon=e},expression:"editpowicon"}})],1),o("el-form-item",{attrs:{label:"后端接口",width:"120",required:""}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editpowaps,callback:function(e){t.editpowaps=e},expression:"editpowaps"}})],1),o("el-form-item",{attrs:{label:"前端路由",width:"120",required:""}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editpowweb,callback:function(e){t.editpowweb=e},expression:"editpowweb"}})],1)],1),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogedit=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.editdialog}},[t._v("确 定")])],1)],1)],1)],1)],1)])},l=[],s=(o("4e82"),o("b0c0"),o("4795"),o("2fa7")),n=o("f4df"),d=o("6022"),c={components:{headpow:n["a"]},inject:["reload"],data:function(){return{name:"",dialogaddson:!1,editid:"",addsonseldata:[],addsonselvalue:2,addsonpowpx:"",addsonpowstatu:"",addsonpowlab:"",addsonpowicon:"",addsonpowaps:"",addsonpowweb:"",addsonid:"",tableData:[],dialogVisible:!1,selvalue:"0",seldata:[],powpx:"",powstatu:1,powlab:"",powicon:"",powaps:"",powweb:"",dialogedit:!1,editselvalue:2,editseldata:[],editpowpx:"",editpowstatu:"",editpowlab:"",editpowicon:"",editpowaps:"",editpowweb:""}},created:function(){var t=this;d["a"].rulelist().then((function(e){console.log(e),20403==e.code&&(t.$message({type:"error",message:e.msg,duration:1e3}),t.$router.push("/dashboard")),t.tableData=e.data}))},methods:(a={selchang:function(){console.log(this.editselvalue)},dialog:function(){var t=this,e={sort:this.powpx,status:this.powstatu,title:this.powlab,icon:this.powicon,pid:this.selvalue,name:this.powaps,url:this.powweb};d["a"].savepower(e).then((function(e){20010==e.code&&(t.$message({message:e.msg,type:"success",duration:1e3}),t.reload())}))},dialogBeforeCl:function(){this.dialogedit=!1},changeSwitch:function(t,e,o){var a=this;console.log(e.status),this.$confirm("此操作将修改状态, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t={id:o,status:e.status};console.log(t),d["a"].powstatus(t).then((function(t){console.log(t),a.$message({type:"success",message:t.msg,duration:1e3}),a.reload()}))}))["catch"]((function(){1==e.status?e.status=0:e.status=1,a.$message({type:"info",message:"已取消操作",duration:1e3})}))},handleEdit:function(t){var e=this;this.dialogedit=!0,console.log(t);var o={id:t};d["a"].getpowid(o).then((function(t){console.log(t.data),e.editseldata=t.data.lists,e.editselvalue=t.data.info.pid,e.editpowpx=t.data.info.sort,e.editpowstatu=t.data.info.status,e.editpowlab=t.data.info.title,e.editpowicon=t.data.info.icon,e.editpowaps=t.data.info.name,e.editid=t.data.info.id,e.editpowweb=t.data.info.url}))},editdialog:function(){var t=this,e={sort:this.editpowpx,status:this.editpowstatu,name:this.editpowaps,icon:this.editpowicon,title:this.editpowlab,pid:this.editselvalue,id:this.editid,url:this.editpowweb};console.log(e),d["a"].editsavepower(e).then((function(e){console.log(e),20010==e.code&&(t.$message({message:"保存成功！",type:"success",duration:2e3}),setTimeout((function(){t.reload()}),1e3))}))},fathpowadd:function(){var t=this;this.dialogVisible=!0,this.selvalue="0",d["a"].addpower().then((function(e){console.log(e),t.seldata=e.data}))},dialogeditright:function(){this.dialogVisible=!1},handleClick:function(t){var e=this;this.dialogVisible=!0,console.log(t);var o={id:t};d["a"].addpower().then((function(t){console.log(t),e.seldata=t.data})),d["a"].getpowid(o).then((function(t){console.log(t.data),e.addsonseldata=t.data.lists,e.addsonselvalue=t.data.info.pid,e.selvalue=t.data.info.id}))},addsondialog:function(){var t=this,e={sort:this.addsonpowpx,status:this.addsonpowstatu,name:this.addsonpowaps,icon:this.addsonpowicon,title:this.addsonpowlab,pid:this.addsonselvalue,id:this.addsonid,url:this.addsonpowweb};d["a"].savepower(e).then((function(e){20010==e.code?(t.$message({message:e.msg,type:"success",duration:1e3}),t.reload()):(t.$message({message:e.msg,type:"error",duration:1e3}),t.reload())}))}},Object(s["a"])(a,"handleEdit",(function(t){var e=this;this.dialogedit=!0,console.log(t);var o={id:t};d["a"].getpowid(o).then((function(t){console.log(t.data),e.editseldata=t.data.lists,e.editselvalue=t.data.info.pid,e.editpowpx=t.data.info.sort,e.editpowstatu=t.data.info.status,e.editpowlab=t.data.info.title,e.editpowicon=t.data.info.icon,e.editpowaps=t.data.info.name,e.editid=t.data.info.id,e.editpowweb=t.data.info.url}))})),Object(s["a"])(a,"editdialog",(function(){var t=this,e={sort:this.editpowpx,status:this.editpowstatu,name:this.editpowaps,icon:this.editpowicon,title:this.editpowlab,pid:this.editselvalue,id:this.editid,url:this.editpowweb};console.log(e),d["a"].editsavepower(e).then((function(e){console.log(e),20010==e.code&&(t.$message({message:"保存成功！",type:"success",duration:2e3}),setTimeout((function(){t.reload()}),1e3))}))})),Object(s["a"])(a,"delpow",(function(t){var e=this;this.$confirm("此操作将删除该权限, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var o={id:t};console.log(o),d["a"].delpow(o).then((function(t){console.log(t),e.$message({type:"success",message:t.msg,duration:1500}),e.reload(),setTimeout((function(){e.reload()}),2e3)}))}))["catch"]((function(){e.$message({type:"info",message:"已取消操作",duration:1300})})),console.log(t)})),Object(s["a"])(a,"getRowClass",(function(t){var e=t.rowIndex;return 0==e?"background:#c2c5f6;color:#000":""})),a)},r=c,u=(o("d1e9"),o("2877")),p=Object(u["a"])(r,i,l,!1,null,"b5370e00",null);e["default"]=p.exports}}]);