(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28a35502"],{"06a6":function(t,e,s){},"24a7":function(t,e,s){},2821:function(t,e,s){"use strict";var o=s("8e8b"),i=s.n(o);i.a},3726:function(t,e,s){},"43f4":function(t,e,s){"use strict";var o=s("b9a4"),i=s.n(o);i.a},"4e8a":function(t,e,s){"use strict";var o=s("3726"),i=s.n(o);i.a},"88c5":function(t,e,s){"use strict";var o=s("c0a7"),i=s.n(o);i.a},"8e8b":function(t,e,s){},ad8a:function(t,e,s){"use strict";var o=s("24a7"),i=s.n(o);i.a},b9a4:function(t,e,s){},b9b6:function(t,e,s){},bc8b:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"Complaints-background clearfix"},[t.list?s("Complaintslist",[s("el-button",{staticClass:"addcomplaint",attrs:{slot:"buttom",type:"primary",size:"medium",icon:"el-icon-circle-plus"},on:{click:function(e){return t.addcomsss()}},slot:"buttom"},[t._v("新增")]),s("el-button",{staticClass:"exportcomplaint",attrs:{slot:"export",size:"medium",icon:"iconfont el-icon-hospital-passwordexport"},on:{click:function(e){return t.exportcom()}},slot:"export"},[t._v("导出")]),s("div",{attrs:{slot:"table"},slot:"table"},[s("Table",[s("div",{attrs:{slot:"column"},slot:"column"},[s("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150%"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){return t.looks(e.row)}}},[t._v("查看")]),s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){return t.records(e.row)}}},[t._v("医患记录")]),-1!==e.row.state.state_val?s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){return t.handle(e.row)}}},[t._v("操作")]):t._e(),-1==e.row.state.state_val?s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){return t.handle(e.row)}}},[t._v("修改")]):t._e()]}}],null,!1,3599517258)})],1)])],1)],1):t._e(),1==t.add?s("Addcom",[s("div",{staticClass:"dialog",attrs:{slot:"dialog"},slot:"dialog"},[s("el-dialog",{attrs:{title:"医疗投诉处理基本要求",visible:t.dialogVisible,width:"40%",height:"60px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("div",[s("p",[t._v(" 1.医疗机构应当贯彻“以患者为中心”的理念，遵循合法、公正、及时、便民的原则。 ")]),s("p",[t._v(" 2.医疗机构在受理投诉过程中,对医疗机构的基本要求是:以现行法律法规及医疗规范、常规为准绳，实事求是，正确面对存在的问题，勇于承担过错责任,公平公正、合理合法、规范高效地处理医疗投诉。以规范性处置为前提，从工作机制上消除“大闹大赔、小闹小赔、不闹不赔”的不良社会现象,树立风清气正的医疗行业风气。 ")]),s("p",[t._v(" 3.投诉管理机构设置和人员组成应符合《医院投诉管理办法》的相关规定的标准。 ")]),s("p",[t._v(' 4.医疗问题投诉实行“首诉负责制"”。无论患者初次投诉到医疗机构任何部门及人员都要负责接待，问清投诉问题，转交或通知相关部门]接待。 ')]),s("p",[t._v(" 5.投诉受理条件:投诉人具有行使患者本人权利的资格且医患之间所签订的医疗服务合同成立。 ")]),s("p",[t._v(" 6、任何人不得因投诉而对患者进行打击报复、不得因投诉而中断正常诊疗进程,不得因投诉而取消正常的医患沟通工作。 ")]),s("p",[t._v(" 7.医疗纠纷调解过程中应当尊重当事人的辩护权，应当以公平、公正、合理、合法、平等、自愿为指导原则，在平静的气氛下进行;医患双方都有权充分表达自身观点，也都有义务认真听取对方观点。 ")]),s("p",[t._v(" 8、医疗纠纷调解全过程中不允许出现任何暴力或暴力威胁的行为; -旦出现非致人伤害的软暴力行为，协商必须立即中止直至软暴力行为停止，一旦出现致人伤害的硬暴力行为或者明显的人身伤害威胁，协商必须彻底终止;任何在暴力或暴力威胁下一方当事人的意思表示均属完全无效。 ")]),s("p",[t._v(" 9、医疗纠纷调解无法达成-致时， 任何-方在协商过程中曾经提出的建议不作为该方的承诺，不作为该医疗纠纷在其它解决途径中单方让步的依据。任何- -方有权通知对方停止协商，此时医疗纠纷按照其它法律途径解决。 ")]),s("p",{staticStyle:{"border-bottom":"1px solid rgba(187, 187, 187, 0.376)",margin:"20px 0"}})]),s("el-checkbox",{staticClass:"check",model:{value:t.agree,callback:function(e){t.agree=e},expression:"agree"}},[t._v("阅读并同意以上说明")]),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:t.backss}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary",disabled:1!=t.agree},on:{click:function(e){t.dialogVisible=!1}}},[t._v("继续")])],1)],1)],1),s("div",{attrs:{slot:"conserve"},slot:"conserve"})]):t._e(),1==t.look?s("Look",{attrs:{lookdata:t.lookdata}},[s("el-button",{staticClass:"return",staticStyle:{border:"1px solid #949aef"},attrs:{slot:"back",type:"primary",size:"medium",icon:"iconfont el-icon-hospital-passwordai207"},on:{click:function(e){return t.backss()}},slot:"back"},[t._v("返回")])],1):t._e(),1==t.operations?s("Operation",{attrs:{operationdata:t.operationdata,opdata:t.opdata,filelist:t.filelisttrue}},[s("div",{attrs:{slot:"detail"},slot:"detail"},[s("el-button",{staticClass:"detail",attrs:{slot:"reference",type:"primary",icon:"el-icon-s-order"},on:{click:t.detail},slot:"reference"},[t._v("投诉详情")])],1),s("div",{attrs:{slot:"back"},slot:"back"},[s("el-button",{staticClass:"return",staticStyle:{border:"1px solid #949aef"},attrs:{size:"medium",type:"primary",icon:"iconfont el-icon-hospital-passwordai207"},on:{click:t.backss}},[t._v("返回")])],1),s("div",{attrs:{slot:"drawerss"},slot:"drawerss"},[s("el-drawer",{attrs:{title:" ",visible:t.drawer,withHeader:!1,size:"60%"},on:{"update:visible":function(e){t.drawer=e}}},[s("ul",{staticClass:"infinite-list",staticStyle:{overflow:"auto",height:"870px","texr-aligin":"center"}},[s("Look",{staticStyle:{width:"100%",margin:"0px 0px",padding:"0px 0px"},attrs:{lookdata:t.lookdata}},[s("div",{attrs:{slot:"title"},slot:"title"})])],1)])],1)]):t._e(),1==t.editshows?s("Edit",{attrs:{editdata:t.editdata,editdatas:t.editdatas}},[s("div",{attrs:{slot:"conserve"},slot:"conserve"})]):t._e()],1)])},i=[],a=(s("4160"),s("d81d"),s("d3b7"),s("159b"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"comlist"},[s("div",{staticClass:"Complaints-header clearfix"},[s("span",[t._v("投诉事件")]),t._t("buttom",[s("el-button",{staticClass:"addcomplaint",attrs:{type:"primary",icon:"el-icon-circle-plus"}},[t._v("新增")])]),t._t("export",[s("el-button",{staticClass:"exportcomplaint",attrs:{icon:"iconfont el-icon-hospital-passwordexport"},on:{click:function(e){return t.exportcom()}}},[t._v("导出")])])],2),t._t("table")],2)])}),n=[],r={components:{},data:function(){return{}},methods:{}},l=r,c=(s("e9af"),s("2877")),p=Object(c["a"])(l,a,n,!1,null,"7b5264d0",null),h=p.exports,u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{ref:"wrapper",staticClass:"addcom wrapper"},[s("div",{staticClass:"content"},[t._m(0),s("div",{staticClass:"addcom-form-basic"},[s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-around"}},[s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",[t._v(" 业务编号 ")]),s("el-input",{attrs:{disabled:""},model:{value:t.comnumber,callback:function(e){t.comnumber=e},expression:"comnumber"}})],1)]),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",[t._v(" 投诉日期"),s("span",[t._v("*")])]),t._v(" "),s("br"),s("el-date-picker",{attrs:{type:"date",format:"yyyy 年 MM 月 dd 日","value-format":"timestamp",placeholder:"选择日期","picker-options":t.pickerOptions},model:{value:t.comdata,callback:function(e){t.comdata=e},expression:"comdata"}})],1)]),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",[t._v(" 事发日期"),s("span",[t._v("*")])]),t._v(" "),s("br"),s("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"timestamp","picker-options":t.pickerOption},model:{value:t.incidentdata,callback:function(e){t.incidentdata=e},expression:"incidentdata"}})],1)])],1),s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-around"}},[s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",[t._v(" 投诉人姓名 "),s("span",[t._v("*")])]),s("el-input",{attrs:{placeholder:"请输入投诉人姓名",maxlength:"10",onkeypress:"return( /[\\d]/.test(String.fromCharCode(event.keyCode) ) )",clearable:""},model:{value:t.comname,callback:function(e){t.comname=e},expression:"comname"}})],1)]),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",[t._v(" 性别"),s("span",[t._v("*")])]),t._v(" "),s("br"),s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.comgender,callback:function(e){t.comgender=e},expression:"comgender"}},t._l(t.comgenders,(function(t){return s("el-option",{key:t.value,attrs:{label:t.lable,value:t.value,clearable:""}})})),1)],1)]),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",[t._v(" 年龄"),s("span",[t._v("*")])]),t._v(" "),s("br"),s("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入",clearable:"",maxlength:"3",max:"3",type:"number",oninput:"value=value.replace(/[^\\d]/g,'')",onkeypress:"return( /[\\d]/.test(String.fromCharCode(event.keyCode) ) )"},model:{value:t.comagenumber,callback:function(e){t.comagenumber=e},expression:"comagenumber"}},[s("template",{slot:"append"},[s("el-select",{staticStyle:{width:"80px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:t.comage,callback:function(e){t.comage=e},expression:"comage"}},[s("el-option",{attrs:{label:"岁",value:"1"}})],1)],1)],2)],1)])],1),s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-around"}},[s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",[t._v(" 手机号码 "),s("span",[t._v("*")])]),s("el-input",{attrs:{placeholder:"请输入投诉人手机号码",type:"input",maxlength:"11",max:"11",oninput:"value=value.replace(/[^\\d]/g,'')",clearable:"",onkeypress:"return( /[\\d]/.test(String.fromCharCode(event.keyCode) ) )"},on:{onkeyup:t.formatPhoneOnkeyUp},model:{value:t.comphone,callback:function(e){t.comphone=e},expression:"comphone"}})],1)]),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",[t._v(" 投诉方式"),s("span",[t._v("*")])]),t._v(" "),s("br"),s("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.commode,callback:function(e){t.commode=e},expression:"commode"}},t._l(t.commodes,(function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)],1)]),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",[t._v(" 投诉科室"),s("span",[t._v("*")])]),t._v(" "),s("br"),s("el-cascader",{ref:"cascader",attrs:{options:t.comdes,"collapse-tags":"",props:{value:"id",label:"title",children:"_child",multiple:"true"},"show-all-levels":!1,clearable:""},on:{change:t.getCascaderObj},model:{value:t.comde,callback:function(e){t.comde=e},expression:"comde"}})],1)])],1),s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-around"}},[s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",[t._v(" 投诉人与患者关系 "),s("span",[t._v("*")])]),s("br"),s("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.relation,callback:function(e){t.relation=e},expression:"relation"}},t._l(t.relationlist,(function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)],1)]),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",[t._v(" 答复协商时间")]),t._v(" "),s("br"),s("el-input",{attrs:{placeholder:"请输入",type:"input",maxlength:"3",max:"3",oninput:"value=value.replace(/[^\\d]/g,'')",clearable:"",onkeypress:"return( /[\\d]/.test(String.fromCharCode(event.keyCode) ) )"},model:{value:t.consulttime,callback:function(e){t.consulttime=e},expression:"consulttime"}},[s("template",{slot:"append"},[t._v("天")])],2)],1)]),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",[t._v(" 投诉类别(多选)")]),t._v(" "),s("br"),s("el-select",{attrs:{multiple:"",placeholder:"请选择",clearable:""},model:{value:t.comtype,callback:function(e){t.comtype=e},expression:"comtype"}},t._l(t.comtypelist,(function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)],1)])],1),s("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[s("el-col",{attrs:{span:6,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",[t._v(" 事件性质 ")]),s("br"),s("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.nature,callback:function(e){t.nature=e},expression:"nature"}},t._l(t.natures,(function(t){return s("el-option",{key:t.state_val,attrs:{label:t.title,value:t.state_val}})})),1)],1)]),s("el-col",{attrs:{span:14,push:3}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",[t._v(" 联系地址"),s("span",[t._v("*")])]),t._v(" "),s("br"),s("el-input",{attrs:{placeholder:"联系地址",maxlength:"50",onkeypress:"return( /[\\d]/.test(String.fromCharCode(event.keyCode) ) )",clearable:""},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1)])],1),s("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[s("el-col",{attrs:{span:22,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",[t._v(" 投诉原因")]),s("el-input",{attrs:{type:"textarea",onkeypress:"return( /[\\d]/.test(String.fromCharCode(event.keyCode) ) )",placeholder:"请输入投诉原因",clearable:"",maxlength:"100"},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}})],1)])],1)],1),s("div",{staticClass:"Addcom-agent"},[s("h4",[t._v("经办人信息")]),s("div",[s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-around"}},[s("el-col",{attrs:{span:6,pull:2}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",[t._v(" 经办人姓名"),s("span",[t._v("*")])]),s("el-input",{attrs:{onkeypress:"return( /[\\d]/.test(String.fromCharCode(event.keyCode) ) )",placeholder:"请输入姓名",clearable:"",type:"input",maxlength:"20"},model:{value:t.agentname,callback:function(e){t.agentname=e},expression:"agentname"}})],1)]),s("el-col",{attrs:{span:6,pull:6}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",[t._v("经办人手机"),s("span",[t._v("*")])]),t._v(" "),s("br"),s("el-input",{attrs:{placeholder:"请输入手机号码",clearable:"",type:"input",maxlength:"11",max:"11",oninput:"value=value.replace(/[^\\d]/g,'')",onkeypress:"return( /[\\d]/.test(String.fromCharCode(event.keyCode) ) )"},model:{value:t.agentphone,callback:function(e){t.agentphone=e},expression:"agentphone"}})],1)])],1)],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"addcom-relevance"},[s("h4",[t._v("关联患者信息(调用HIS)")]),s("el-table",{staticStyle:{width:"94%","margin-left":"3%","margin-top":"20px","margin-bottom":"20px"},attrs:{data:t.data,"header-cell-style":t.getRowClass}},[s("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),s("el-table-column",{attrs:{prop:"name",label:"姓名"}}),s("el-table-column",{attrs:{prop:"name",label:"性别"}}),s("el-table-column",{attrs:{prop:"name",label:"出生日期"}}),s("el-table-column",{attrs:{prop:"name",label:"联系方式"}}),s("el-table-column",{attrs:{prop:"name",label:"地址"}}),s("el-table-column",{attrs:{prop:"name",label:"科室"}}),s("el-table-column",{attrs:{prop:"name",label:"诊断"}}),s("el-table-column",{staticStyle:{"border-bottom":"none"},attrs:{fixed:"right",label:"操作",width:"100%"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{staticStyle:{"border-bottom":"none"},attrs:{type:"text",size:"small"},on:{click:function(s){return t.handleClick(e.row)}}},[t._v("取消关联 ")])]}}])})],1),s("div",{attrs:{align:"center"}},[s("el-button",{staticClass:"addrelevance",attrs:{type:"primary",icon:"el-icon-circle-plus"}},[t._v("添加患者信息")])],1)],1)]),s("div",{staticClass:"requirement"},[t._t("dialog")],2)]),s("Conserve",[s("el-button",{staticClass:"keep",attrs:{slot:"keep",type:"primary",size:"medium",icon:"iconfont el-icon-hospital-passwordbaocun"},on:{click:function(e){return t.keepform()}},slot:"keep"},[t._v("提交")]),s("el-button",{staticClass:"return",staticStyle:{border:"1px solid #949aef"},attrs:{slot:"back",type:"primary",size:"medium",icon:"iconfont el-icon-hospital-passwordai207"},on:{click:function(e){return t.backss()}},slot:"back"},[t._v("返回")])],1)],1)},d=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"addcom-top"},[s("h4",[t._v("基本信息")])])}],m=(s("99af"),s("6eba"),s("0d03"),s("ac1f"),s("5319"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"conserve"},[t._t("keep",[s("el-button",{staticClass:"keep",attrs:{type:"primary",icon:"iconfont el-icon-hospital-passwordbaocun"}},[t._v("提交")])]),t._t("back",[s("el-button",{staticClass:"return",staticStyle:{border:"1px solid #949aef"},attrs:{type:"primary",icon:"iconfont el-icon-hospital-passwordai207"},on:{click:function(e){return t.back()}}},[t._v("返回")])])],2)])}),g=[],v={data:function(){return{}},methods:{back:function(){this.$router.go(-1)}},created:function(){}},f=v,y=(s("ad8a"),Object(c["a"])(f,m,g,!1,null,"686abc84",null)),b=y.exports,k=s("6022"),w=function(t,e){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])},w(t,e)};function _(t,e){function s(){this.constructor=t}w(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}var x=function(){return x=Object.assign||function(t){for(var e,s=1,o=arguments.length;s<o;s++)for(var i in e=arguments[s],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},x.apply(this,arguments)};function C(t,e,s,o){function i(t){return t instanceof s?t:new s((function(e){e(t)}))}return new(s||(s=Promise))((function(s,a){function n(t){try{l(o.next(t))}catch(e){a(e)}}function r(t){try{l(o["throw"](t))}catch(e){a(e)}}function l(t){t.done?s(t.value):i(t.value).then(n,r)}l((o=o.apply(t,e||[])).next())}))}function S(t,e){var s,o,i,a,n={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(t){return function(e){return l([t,e])}}function l(a){if(s)throw new TypeError("Generator is already executing.");while(n)try{if(s=1,o&&(i=2&a[0]?o["return"]:a[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,o=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){n=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){n.label=a[1];break}if(6===a[0]&&n.label<i[1]){n.label=i[1],i=a;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(a);break}i[2]&&n.ops.pop(),n.trys.pop();continue}a=e.call(t,n)}catch(r){a=[6,r],o=0}finally{s=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function T(){for(var t=0,e=0,s=arguments.length;e<s;e++)t+=arguments[e].length;var o=Array(t),i=0;for(e=0;e<s;e++)for(var a=arguments[e],n=0,r=a.length;n<r;n++,i++)o[i]=a[n];return o}var P=[{sourceKey:"scroller.scrollBehaviorX.currentPos",key:"x"},{sourceKey:"scroller.scrollBehaviorY.currentPos",key:"y"},{sourceKey:"scroller.scrollBehaviorX.hasScroll",key:"hasHorizontalScroll"},{sourceKey:"scroller.scrollBehaviorY.hasScroll",key:"hasVerticalScroll"},{sourceKey:"scroller.scrollBehaviorX.contentSize",key:"scrollerWidth"},{sourceKey:"scroller.scrollBehaviorY.contentSize",key:"scrollerHeight"},{sourceKey:"scroller.scrollBehaviorX.maxScrollPos",key:"maxScrollX"},{sourceKey:"scroller.scrollBehaviorY.maxScrollPos",key:"maxScrollY"},{sourceKey:"scroller.scrollBehaviorX.minScrollPos",key:"minScrollX"},{sourceKey:"scroller.scrollBehaviorY.minScrollPos",key:"minScrollY"},{sourceKey:"scroller.scrollBehaviorX.movingDirection",key:"movingDirectionX"},{sourceKey:"scroller.scrollBehaviorY.movingDirection",key:"movingDirectionY"},{sourceKey:"scroller.scrollBehaviorX.direction",key:"directionX"},{sourceKey:"scroller.scrollBehaviorY.direction",key:"directionY"},{sourceKey:"scroller.actions.enabled",key:"enabled"},{sourceKey:"scroller.animater.pending",key:"pending"},{sourceKey:"scroller.animater.stop",key:"stop"},{sourceKey:"scroller.scrollTo",key:"scrollTo"},{sourceKey:"scroller.scrollBy",key:"scrollBy"},{sourceKey:"scroller.scrollToElement",key:"scrollToElement"},{sourceKey:"scroller.resetPosition",key:"resetPosition"}];function $(t){console.error("[BScroll warn]: "+t)}function M(t,e){if(!t)throw new Error("[BScroll] "+e)}var D="undefined"!==typeof window,E=D&&navigator.userAgent.toLowerCase(),Y=!(!E||!/wechatdevtools/.test(E)),O=E&&E.indexOf("android")>0,X=function(){if("string"===typeof E){var t=/os (\d\d?_\d(_\d)?)/,e=t.exec(E);if(!e)return!1;var s=e[1].split("_").map((function(t){return parseInt(t,10)}));return!!(13===s[0]&&s[1]>=4)}return!1}();function B(){return window.performance&&window.performance.now&&window.performance.timing?window.performance.now()+window.performance.timing.navigationStart:+new Date}var H=function(t,e){for(var s in e)t[s]=e[s];return t};function z(t){return void 0===t||null===t}function I(t,e){return Math.sqrt(t*t+e*e)}function L(t,e,s){return t<e?e:t>s?s:t}function R(t,e){if(t.findIndex)return t.findIndex(e);var s=-1;return t.some((function(t,o,i){var a=e(t,o,i);if(a)return s=o,a})),s}var F=D&&document.createElement("div").style,j=function(){if(!D)return!1;for(var t=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}],e=0,s=t;e<s.length;e++){var o=s[e];if(void 0!==F[o.value])return o.key}return!1}();function N(t){return!1===j?t:"standard"===j?"transitionEnd"===t?"transitionend":t:j+t.charAt(0).toUpperCase()+t.substr(1)}function A(t){return"string"===typeof t?document.querySelector(t):t}function W(t,e,s,o){t.addEventListener(e,s,{passive:!1,capture:!!o})}function K(t,e,s,o){t.removeEventListener(e,s,{capture:!!o})}function U(t){var e=0,s=0;while(t)e-=t.offsetLeft,s-=t.offsetTop,t=t.offsetParent;return{left:e,top:s}}function V(t){var e=t.getBoundingClientRect();return{left:-(e.left+window.pageXOffset),top:-(e.top+window.pageYOffset)}}var q=j&&"standard"!==j?"-"+j.toLowerCase()+"-":"",J=N("transform"),Z=N("transition"),G=D&&N("perspective")in F,Q=D&&("ontouchstart"in window||Y),tt=D&&Z in F,et={transform:J,transition:Z,transitionTimingFunction:N("transitionTimingFunction"),transitionDuration:N("transitionDuration"),transitionDelay:N("transitionDelay"),transformOrigin:N("transformOrigin"),transitionEnd:N("transitionEnd"),transitionProperty:N("transitionProperty")},st={touchstart:1,touchmove:1,touchend:1,touchcancel:1,mousedown:2,mousemove:2,mouseup:2};function ot(t){if(t instanceof window.SVGElement){var e=t.getBoundingClientRect();return{top:e.top,left:e.left,width:e.width,height:e.height}}return{top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}function it(t,e){for(var s in e)if(e[s].test(t[s]))return!0;return!1}var at=it;function nt(t,e){var s=document.createEvent("Event");s.initEvent(e,!0,!0),s.pageX=t.pageX,s.pageY=t.pageY,t.target.dispatchEvent(s)}function rt(t,e){var s;void 0===e&&(e="click"),"mouseup"===t.type?s=t:"touchend"!==t.type&&"touchcancel"!==t.type||(s=t.changedTouches[0]);var o,i={};s&&(i.screenX=s.screenX||0,i.screenY=s.screenY||0,i.clientX=s.clientX||0,i.clientY=s.clientY||0);var a=!0,n=!0,r=t.ctrlKey,l=t.shiftKey,c=t.altKey,p=t.metaKey,h={ctrlKey:r,shiftKey:l,altKey:c,metaKey:p};if("undefined"!==typeof MouseEvent)try{o=new MouseEvent(e,H(x({bubbles:a,cancelable:n},h),i))}catch(t){u()}else u();function u(){o=document.createEvent("Event"),o.initEvent(e,a,n),H(o,i)}o.forwardedTouchEvent=!0,o._constructed=!0,t.target.dispatchEvent(o)}function lt(t){rt(t,"dblclick")}function ct(t,e){var s=e.firstChild;s?pt(t,s):e.appendChild(t)}function pt(t,e){var s=e.parentNode;s.insertBefore(t,e)}function ht(t,e){t.removeChild(e)}function ut(t,e){var s=new RegExp("(^|\\s)"+e+"(\\s|$)");return s.test(t.className)}function dt(t){return Array.prototype.slice.call(t,0)}function mt(t){return{width:t.clientWidth,height:t.clientHeight}}var gt={swipe:{style:"cubic-bezier(0.23, 1, 0.32, 1)",fn:function(t){return 1+--t*t*t*t*t}},swipeBounce:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},bounce:{style:"cubic-bezier(0.165, 0.84, 0.44, 1)",fn:function(t){return 1- --t*t*t*t}}},vt=1e3/60,ft=D&&window;function yt(){}var bt=function(){return D?ft.requestAnimationFrame||ft.webkitRequestAnimationFrame||ft.mozRequestAnimationFrame||ft.oRequestAnimationFrame||function(t){return window.setTimeout(t,(t.interval||vt)/2)}:yt}(),kt=function(){return D?ft.cancelAnimationFrame||ft.webkitCancelAnimationFrame||ft.mozCancelAnimationFrame||ft.oCancelAnimationFrame||function(t){window.clearTimeout(t)}:yt}(),wt=function(t){},_t={enumerable:!0,configurable:!0,get:wt,set:wt},xt=function(t,e){for(var s=e.split("."),o=0;o<s.length-1;o++)if(t=t[s[o]],"object"!==typeof t||!t)return;var i=s.pop();return"function"===typeof t[i]?function(){return t[i].apply(t,arguments)}:t[i]},Ct=function(t,e,s){for(var o,i=e.split("."),a=0;a<i.length-1;a++)o=i[a],t[o]||(t[o]={}),t=t[o];t[i.pop()]=s};function St(t,e,s){_t.get=function(){return xt(this,e)},_t.set=function(t){Ct(this,e,t)},Object.defineProperty(t,s,_t)}var Tt=function(){function t(t){this.events={},this.eventTypes={},this.registerType(t)}return t.prototype.on=function(t,e,s){return void 0===s&&(s=this),this.hasType(t),this.events[t]||(this.events[t]=[]),this.events[t].push([e,s]),this},t.prototype.once=function(t,e,s){var o=this;void 0===s&&(s=this),this.hasType(t);var i=function(){for(var a=[],n=0;n<arguments.length;n++)a[n]=arguments[n];o.off(t,i);var r=e.apply(s,a);if(!0===r)return r};return i.fn=e,this.on(t,i),this},t.prototype.off=function(t,e){if(!t&&!e)return this.events={},this;if(t){if(this.hasType(t),!e)return this.events[t]=[],this;var s=this.events[t];if(!s)return this;var o=s.length;while(o--)(s[o][0]===e||s[o][0]&&s[o][0].fn===e)&&s.splice(o,1);return this}},t.prototype.trigger=function(t){for(var e=[],s=1;s<arguments.length;s++)e[s-1]=arguments[s];this.hasType(t);var o=this.events[t];if(o)for(var i,a=o.length,n=T(o),r=0;r<a;r++){var l=n[r],c=l[0],p=l[1];if(c&&(i=c.apply(p,e),!0===i))return i}},t.prototype.registerType=function(t){var e=this;t.forEach((function(t){e.eventTypes[t]=t}))},t.prototype.destroy=function(){this.events={},this.eventTypes={}},t.prototype.hasType=function(t){var e=this.eventTypes,s=e[t]===t;s||$('EventEmitter has used unknown event type: "'+t+'", should be oneof ['+Object.keys(e).map((function(t){return JSON.stringify(t)}))+"]")},t}(),Pt=function(){function t(t,e){this.wrapper=t,this.events=e,this.addDOMEvents()}return t.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},t.prototype.addDOMEvents=function(){this.handleDOMEvents(W)},t.prototype.removeDOMEvents=function(){this.handleDOMEvents(K)},t.prototype.handleDOMEvents=function(t){var e=this,s=this.wrapper;this.events.forEach((function(o){t(s,o.name,e,!!o.capture)}))},t.prototype.handleEvent=function(t){var e=t.type;this.events.some((function(s){return s.name===e&&(s.handler(t),!0)}))},t}(),$t=function(){function t(){}return t}(),Mt=function(t){function e(){var e=t.call(this)||this;return e.startX=0,e.startY=0,e.scrollX=!1,e.scrollY=!0,e.freeScroll=!1,e.directionLockThreshold=0,e.eventPassthrough="",e.click=!1,e.dblclick=!1,e.tap="",e.bounce={top:!0,bottom:!0,left:!0,right:!0},e.bounceTime=800,e.momentum=!0,e.momentumLimitTime=300,e.momentumLimitDistance=15,e.swipeTime=2500,e.swipeBounceTime=500,e.deceleration=.0015,e.flickLimitTime=200,e.flickLimitDistance=100,e.resizePolling=60,e.probeType=0,e.stopPropagation=!1,e.preventDefault=!0,e.preventDefaultException={tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|AUDIO)$/},e.tagException={tagName:/^TEXTAREA$/},e.HWCompositing=!0,e.useTransition=!0,e.bindToWrapper=!1,e.bindToTarget=!1,e.disableMouse=Q,e.disableTouch=!Q,e.autoBlur=!0,e.autoEndDistance=5,e.outOfBoundaryDampingFactor=1/3,e.specifiedIndexAsContent=0,e}return _(e,t),e.prototype.merge=function(t){if(!t)return this;for(var e in t)"bounce"!==e?this[e]=t[e]:this.bounce=this.resolveBounce(t[e]);return this},e.prototype.process=function(){return this.translateZ=this.HWCompositing&&G?" translateZ(1px)":"",this.useTransition=this.useTransition&&tt,this.preventDefault=!this.eventPassthrough&&this.preventDefault,this.scrollX="horizontal"!==this.eventPassthrough&&this.scrollX,this.scrollY="vertical"!==this.eventPassthrough&&this.scrollY,this.freeScroll=this.freeScroll&&!this.eventPassthrough,this.scrollX=!!this.freeScroll||this.scrollX,this.scrollY=!!this.freeScroll||this.scrollY,this.directionLockThreshold=this.eventPassthrough?0:this.directionLockThreshold,this},e.prototype.resolveBounce=function(t){var e,s={top:!0,right:!0,bottom:!0,left:!0},o={top:!1,right:!1,bottom:!1,left:!1};return e="object"===typeof t?H(s,t):t?s:o,e},e}($t),Dt=function(){function t(t,e){this.wrapper=t,this.options=e,this.hooks=new Tt(["beforeStart","start","move","end","click"]),this.handleDOMEvents()}return t.prototype.handleDOMEvents=function(){var t=this.options,e=t.bindToWrapper,s=t.disableMouse,o=t.disableTouch,i=t.click,a=this.wrapper,n=e?a:window,r=[],l=[],c=!o,p=!s;i&&r.push({name:"click",handler:this.click.bind(this),capture:!0}),c&&(r.push({name:"touchstart",handler:this.start.bind(this)}),l.push({name:"touchmove",handler:this.move.bind(this)},{name:"touchend",handler:this.end.bind(this)},{name:"touchcancel",handler:this.end.bind(this)})),p&&(r.push({name:"mousedown",handler:this.start.bind(this)}),l.push({name:"mousemove",handler:this.move.bind(this)},{name:"mouseup",handler:this.end.bind(this)})),this.wrapperEventRegister=new Pt(a,r),this.targetEventRegister=new Pt(n,l)},t.prototype.beforeHandler=function(t,e){var s=this.options,o=s.preventDefault,i=s.stopPropagation,a=s.preventDefaultException,n={start:function(){return o&&!it(t.target,a)},end:function(){return o&&!it(t.target,a)},move:function(){return o}};n[e]()&&t.preventDefault(),i&&t.stopPropagation()},t.prototype.setInitiated=function(t){void 0===t&&(t=0),this.initiated=t},t.prototype.start=function(t){var e=st[t.type];if(!this.initiated||this.initiated===e)if(this.setInitiated(e),at(t.target,this.options.tagException))this.setInitiated();else if((2!==e||0===t.button)&&!this.hooks.trigger(this.hooks.eventTypes.beforeStart,t)){this.beforeHandler(t,"start");var s=t.touches?t.touches[0]:t;this.pointX=s.pageX,this.pointY=s.pageY,this.hooks.trigger(this.hooks.eventTypes.start,t)}},t.prototype.move=function(t){if(st[t.type]===this.initiated){this.beforeHandler(t,"move");var e=t.touches?t.touches[0]:t,s=e.pageX-this.pointX,o=e.pageY-this.pointY;if(this.pointX=e.pageX,this.pointY=e.pageY,!this.hooks.trigger(this.hooks.eventTypes.move,{deltaX:s,deltaY:o,e:t})){var i=document.documentElement.scrollLeft||window.pageXOffset||document.body.scrollLeft,a=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,n=this.pointX-i,r=this.pointY-a,l=this.options.autoEndDistance;(n>document.documentElement.clientWidth-l||r>document.documentElement.clientHeight-l||n<l||r<l)&&this.end(t)}}},t.prototype.end=function(t){st[t.type]===this.initiated&&(this.setInitiated(),this.beforeHandler(t,"end"),this.hooks.trigger(this.hooks.eventTypes.end,t))},t.prototype.click=function(t){this.hooks.trigger(this.hooks.eventTypes.click,t)},t.prototype.setContent=function(t){t!==this.wrapper&&(this.wrapper=t,this.rebindDOMEvents())},t.prototype.rebindDOMEvents=function(){this.wrapperEventRegister.destroy(),this.targetEventRegister.destroy(),this.handleDOMEvents()},t.prototype.destroy=function(){this.wrapperEventRegister.destroy(),this.targetEventRegister.destroy(),this.hooks.destroy()},t}(),Et={x:["translateX","px"],y:["translateY","px"]},Yt=function(){function t(t){this.setContent(t),this.hooks=new Tt(["beforeTranslate","translate"])}return t.prototype.getComputedPosition=function(){var t=window.getComputedStyle(this.content,null),e=t[et.transform].split(")")[0].split(", "),s=+(e[12]||e[4])||0,o=+(e[13]||e[5])||0;return{x:s,y:o}},t.prototype.translate=function(t){var e=[];Object.keys(t).forEach((function(s){if(Et[s]){var o=Et[s][0];if(o){var i=Et[s][1],a=t[s];e.push(o+"("+a+i+")")}}})),this.hooks.trigger(this.hooks.eventTypes.beforeTranslate,e,t),this.style[et.transform]=e.join(" "),this.hooks.trigger(this.hooks.eventTypes.translate,t)},t.prototype.setContent=function(t){this.content!==t&&(this.content=t,this.style=t.style)},t.prototype.destroy=function(){this.hooks.destroy()},t}(),Ot=function(){function t(t,e,s){this.translater=e,this.options=s,this.timer=0,this.hooks=new Tt(["move","end","beforeForceStop","forceStop","callStop","time","timeFunction"]),this.setContent(t)}return t.prototype.translate=function(t){this.translater.translate(t)},t.prototype.setPending=function(t){this.pending=t},t.prototype.setForceStopped=function(t){this.forceStopped=t},t.prototype.setCallStop=function(t){this.callStopWhenPending=t},t.prototype.setContent=function(t){this.content!==t&&(this.content=t,this.style=t.style,this.stop())},t.prototype.clearTimer=function(){this.timer&&(kt(this.timer),this.timer=0)},t.prototype.destroy=function(){this.hooks.destroy(),kt(this.timer)},t}(),Xt=function(t,e,s,o){var i=function(t,e){var s=t-e,o=s>0?-1:s<0?1:0;return o},a=i(e.x,t.x),n=i(e.y,t.y),r=s.x-o.x,l=s.y-o.y;return a*r<=0&&n*l<=0},Bt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.startProbe=function(t,e){var s=this,o=t,i=function(){var a=s.translater.getComputedPosition();Xt(t,e,a,o)&&s.hooks.trigger(s.hooks.eventTypes.move,a),s.pending||(s.callStopWhenPending?s.callStopWhenPending=!1:s.hooks.trigger(s.hooks.eventTypes.end,a)),o=a,s.pending&&(s.timer=bt(i))};this.callStopWhenPending&&this.setCallStop(!1),kt(this.timer),i()},e.prototype.transitionTime=function(t){void 0===t&&(t=0),this.style[et.transitionDuration]=t+"ms",this.hooks.trigger(this.hooks.eventTypes.time,t)},e.prototype.transitionTimingFunction=function(t){this.style[et.transitionTimingFunction]=t,this.hooks.trigger(this.hooks.eventTypes.timeFunction,t)},e.prototype.transitionProperty=function(){this.style[et.transitionProperty]=et.transform},e.prototype.move=function(t,e,s,o){this.setPending(s>0),this.transitionTimingFunction(o),this.transitionProperty(),this.transitionTime(s),this.translate(e);var i=3===this.options.probeType;s&&i&&this.startProbe(t,e),s||(this._reflow=this.content.offsetHeight,i&&this.hooks.trigger(this.hooks.eventTypes.move,e),this.hooks.trigger(this.hooks.eventTypes.end,e))},e.prototype.doStop=function(){var t=this.pending;if(this.setForceStopped(!1),this.setCallStop(!1),t){this.setPending(!1),kt(this.timer);var e=this.translater.getComputedPosition(),s=e.x,o=e.y;this.transitionTime(),this.translate({x:s,y:o}),this.setForceStopped(!0),this.setCallStop(!0),this.hooks.trigger(this.hooks.eventTypes.forceStop,{x:s,y:o})}return t},e.prototype.stop=function(){var t=this.doStop();t&&this.hooks.trigger(this.hooks.eventTypes.callStop)},e}(Ot),Ht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.move=function(t,e,s,o){if(!s)return this.translate(e),3===this.options.probeType&&this.hooks.trigger(this.hooks.eventTypes.move,e),void this.hooks.trigger(this.hooks.eventTypes.end,e);this.animate(t,e,s,o)},e.prototype.animate=function(t,e,s,o){var i=this,a=B(),n=a+s,r=3===this.options.probeType,l=function(){var c=B();if(c>=n)return i.translate(e),r&&i.hooks.trigger(i.hooks.eventTypes.move,e),void i.hooks.trigger(i.hooks.eventTypes.end,e);c=(c-a)/s;var p=o(c),h={};Object.keys(e).forEach((function(s){var o=t[s],i=e[s];h[s]=(i-o)*p+o})),i.translate(h),r&&i.hooks.trigger(i.hooks.eventTypes.move,h),i.pending&&(i.timer=bt(l)),i.pending||(i.callStopWhenPending?i.callStopWhenPending=!1:i.hooks.trigger(i.hooks.eventTypes.end,e))};this.setPending(!0),this.callStopWhenPending&&this.setCallStop(!1),kt(this.timer),l()},e.prototype.doStop=function(){var t=this.pending;if(this.setForceStopped(!1),this.setCallStop(!1),t){this.setPending(!1),kt(this.timer);var e=this.translater.getComputedPosition();this.setForceStopped(!0),this.setCallStop(!0),this.hooks.trigger(this.hooks.eventTypes.forceStop,e)}return t},e.prototype.stop=function(){var t=this.doStop();t&&this.hooks.trigger(this.hooks.eventTypes.callStop)},e}(Ot);function zt(t,e,s){var o=s.useTransition,i={};return Object.defineProperty(i,"probeType",{enumerable:!0,configurable:!1,get:function(){return s.probeType}}),o?new Bt(t,e,i):new Ht(t,e,i)}var It,Lt,Rt,Ft,jt=function(){function t(t,e,s){this.wrapper=t,this.options=s,this.hooks=new Tt(["beforeComputeBoundary","computeBoundary","momentum","end","ignoreHasScroll"]),this.refresh(e)}return t.prototype.start=function(){this.dist=0,this.setMovingDirection(0),this.setDirection(0)},t.prototype.move=function(t){return t=this.hasScroll?t:0,this.setMovingDirection(t),this.performDampingAlgorithm(t,this.options.outOfBoundaryDampingFactor)},t.prototype.setMovingDirection=function(t){this.movingDirection=t>0?-1:t<0?1:0},t.prototype.setDirection=function(t){this.direction=t>0?-1:t<0?1:0},t.prototype.performDampingAlgorithm=function(t,e){var s=this.currentPos+t;return(s>this.minScrollPos||s<this.maxScrollPos)&&(s=s>this.minScrollPos&&this.options.bounces[0]||s<this.maxScrollPos&&this.options.bounces[1]?this.currentPos+t*e:s>this.minScrollPos?this.minScrollPos:this.maxScrollPos),s},t.prototype.end=function(t){var e={duration:0},s=Math.abs(this.currentPos-this.startPos);if(this.options.momentum&&t<this.options.momentumLimitTime&&s>this.options.momentumLimitDistance){var o=-1===this.direction&&this.options.bounces[0]||1===this.direction&&this.options.bounces[1]?this.wrapperSize:0;e=this.hasScroll?this.momentum(this.currentPos,this.startPos,t,this.maxScrollPos,this.minScrollPos,o,this.options):{destination:this.currentPos,duration:0}}else this.hooks.trigger(this.hooks.eventTypes.end,e);return e},t.prototype.momentum=function(t,e,s,o,i,a,n){void 0===n&&(n=this.options);var r=t-e,l=Math.abs(r)/s,c=n.deceleration,p=n.swipeBounceTime,h=n.swipeTime,u=Math.min(h,2*l/c),d={destination:t+l*l/c*(r<0?-1:1),duration:u,rate:15};return this.hooks.trigger(this.hooks.eventTypes.momentum,d,r),d.destination<o?(d.destination=a?Math.max(o-a/4,o-a/d.rate*l):o,d.duration=p):d.destination>i&&(d.destination=a?Math.min(i+a/4,i+a/d.rate*l):i,d.duration=p),d.destination=Math.round(d.destination),d},t.prototype.updateDirection=function(){var t=this.currentPos-this.absStartPos;this.setDirection(t)},t.prototype.refresh=function(t){var e=this.options.rect,s=e.size,o=e.position,i="static"===window.getComputedStyle(this.wrapper,null).position,a=ot(this.wrapper);this.wrapperSize=this.wrapper["width"===s?"clientWidth":"clientHeight"],this.setContent(t);var n=ot(this.content);this.contentSize=n[s],this.relativeOffset=n[o],i&&(this.relativeOffset-=a[o]),this.computeBoundary(),this.setDirection(0)},t.prototype.setContent=function(t){t!==this.content&&(this.content=t,this.resetState())},t.prototype.resetState=function(){this.currentPos=0,this.startPos=0,this.dist=0,this.setDirection(0),this.setMovingDirection(0),this.resetStartPos()},t.prototype.computeBoundary=function(){this.hooks.trigger(this.hooks.eventTypes.beforeComputeBoundary);var t={minScrollPos:0,maxScrollPos:this.wrapperSize-this.contentSize};t.maxScrollPos<0&&(t.maxScrollPos-=this.relativeOffset,0===this.options.specifiedIndexAsContent&&(t.minScrollPos=-this.relativeOffset)),this.hooks.trigger(this.hooks.eventTypes.computeBoundary,t),this.minScrollPos=t.minScrollPos,this.maxScrollPos=t.maxScrollPos,this.hasScroll=this.options.scrollable&&this.maxScrollPos<this.minScrollPos,!this.hasScroll&&this.minScrollPos<this.maxScrollPos&&(this.maxScrollPos=this.minScrollPos,this.contentSize=this.wrapperSize)},t.prototype.updatePosition=function(t){this.currentPos=t},t.prototype.getCurrentPos=function(){return this.currentPos},t.prototype.checkInBoundary=function(){var t=this.adjustPosition(this.currentPos),e=t===this.getCurrentPos();return{position:t,inBoundary:e}},t.prototype.adjustPosition=function(t){return this.hasScroll||this.hooks.trigger(this.hooks.eventTypes.ignoreHasScroll)?t>this.minScrollPos?t=this.minScrollPos:t<this.maxScrollPos&&(t=this.maxScrollPos):t=this.minScrollPos,t},t.prototype.updateStartPos=function(){this.startPos=this.currentPos},t.prototype.updateAbsStartPos=function(){this.absStartPos=this.currentPos},t.prototype.resetStartPos=function(){this.updateStartPos(),this.updateAbsStartPos()},t.prototype.getAbsDist=function(t){return this.dist+=t,Math.abs(this.dist)},t.prototype.destroy=function(){this.hooks.destroy()},t}(),Nt=(It={},It["yes"]=function(t){return!0},It["no"]=function(t){return t.preventDefault(),!1},It),At=(Lt={},Lt["horizontal"]=(Rt={},Rt["yes"]="horizontal",Rt["no"]="vertical",Rt),Lt["vertical"]=(Ft={},Ft["yes"]="vertical",Ft["no"]="horizontal",Ft),Lt),Wt=function(){function t(t,e,s){this.directionLockThreshold=t,this.freeScroll=e,this.eventPassthrough=s,this.reset()}return t.prototype.reset=function(){this.directionLocked=""},t.prototype.checkMovingDirection=function(t,e,s){return this.computeDirectionLock(t,e),this.handleEventPassthrough(s)},t.prototype.adjustDelta=function(t,e){return"horizontal"===this.directionLocked?e=0:"vertical"===this.directionLocked&&(t=0),{deltaX:t,deltaY:e}},t.prototype.computeDirectionLock=function(t,e){""!==this.directionLocked||this.freeScroll||(t>e+this.directionLockThreshold?this.directionLocked="horizontal":e>=t+this.directionLockThreshold?this.directionLocked="vertical":this.directionLocked="none")},t.prototype.handleEventPassthrough=function(t){var e=At[this.directionLocked];if(e){if(this.eventPassthrough===e["yes"])return Nt["yes"](t);if(this.eventPassthrough===e["no"])return Nt["no"](t)}return!1},t}(),Kt=function(){function t(t,e,s,o,i){this.hooks=new Tt(["start","beforeMove","scrollStart","scroll","beforeEnd","end","scrollEnd","contentNotMoved","detectMovingDirection"]),this.scrollBehaviorX=t,this.scrollBehaviorY=e,this.actionsHandler=s,this.animater=o,this.options=i,this.directionLockAction=new Wt(i.directionLockThreshold,i.freeScroll,i.eventPassthrough),this.enabled=!0,this.bindActionsHandler()}return t.prototype.bindActionsHandler=function(){var t=this;this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.start,(function(e){return!t.enabled||t.handleStart(e)})),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.move,(function(e){var s=e.deltaX,o=e.deltaY,i=e.e;return!t.enabled||t.handleMove(s,o,i)})),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.end,(function(e){return!t.enabled||t.handleEnd(e)})),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.click,(function(e){t.enabled&&!e._constructed&&t.handleClick(e)}))},t.prototype.handleStart=function(t){var e=B();this.fingerMoved=!1,this.contentMoved=!1,this.startTime=e,this.directionLockAction.reset(),this.scrollBehaviorX.start(),this.scrollBehaviorY.start(),this.animater.doStop(),this.scrollBehaviorX.resetStartPos(),this.scrollBehaviorY.resetStartPos(),this.hooks.trigger(this.hooks.eventTypes.start,t)},t.prototype.handleMove=function(t,e,s){if(!this.hooks.trigger(this.hooks.eventTypes.beforeMove,s)){var o=this.scrollBehaviorX.getAbsDist(t),i=this.scrollBehaviorY.getAbsDist(e),a=B();if(this.checkMomentum(o,i,a))return!0;if(this.directionLockAction.checkMovingDirection(o,i,s))return this.actionsHandler.setInitiated(),!0;var n=this.directionLockAction.adjustDelta(t,e),r=this.scrollBehaviorX.getCurrentPos(),l=this.scrollBehaviorX.move(n.deltaX),c=this.scrollBehaviorY.getCurrentPos(),p=this.scrollBehaviorY.move(n.deltaY);if(!this.hooks.trigger(this.hooks.eventTypes.detectMovingDirection)){this.fingerMoved||(this.fingerMoved=!0);var h=l!==r||p!==c;this.contentMoved||h||this.hooks.trigger(this.hooks.eventTypes.contentNotMoved),!this.contentMoved&&h&&(this.contentMoved=!0,this.hooks.trigger(this.hooks.eventTypes.scrollStart)),this.contentMoved&&h&&(this.animater.translate({x:l,y:p}),this.dispatchScroll(a))}}},t.prototype.dispatchScroll=function(t){t-this.startTime>this.options.momentumLimitTime&&(this.startTime=t,this.scrollBehaviorX.updateStartPos(),this.scrollBehaviorY.updateStartPos(),1===this.options.probeType&&this.hooks.trigger(this.hooks.eventTypes.scroll,this.getCurrentPos())),this.options.probeType>1&&this.hooks.trigger(this.hooks.eventTypes.scroll,this.getCurrentPos())},t.prototype.checkMomentum=function(t,e,s){return s-this.endTime>this.options.momentumLimitTime&&e<this.options.momentumLimitDistance&&t<this.options.momentumLimitDistance},t.prototype.handleEnd=function(t){if(!this.hooks.trigger(this.hooks.eventTypes.beforeEnd,t)){var e=this.getCurrentPos();if(this.scrollBehaviorX.updateDirection(),this.scrollBehaviorY.updateDirection(),this.hooks.trigger(this.hooks.eventTypes.end,t,e))return!0;e=this.ensureIntegerPos(e),this.animater.translate(e),this.endTime=B();var s=this.endTime-this.startTime;this.hooks.trigger(this.hooks.eventTypes.scrollEnd,e,s)}},t.prototype.ensureIntegerPos=function(t){this.ensuringInteger=!0;var e=t.x,s=t.y,o=this.scrollBehaviorX,i=o.minScrollPos,a=o.maxScrollPos,n=this.scrollBehaviorY,r=n.minScrollPos,l=n.maxScrollPos;return e=e>0?Math.ceil(e):Math.floor(e),s=s>0?Math.ceil(s):Math.floor(s),e=L(e,a,i),s=L(s,l,r),{x:e,y:s}},t.prototype.handleClick=function(t){it(t.target,this.options.preventDefaultException)||(t.preventDefault(),t.stopPropagation())},t.prototype.getCurrentPos=function(){return{x:this.scrollBehaviorX.getCurrentPos(),y:this.scrollBehaviorY.getCurrentPos()}},t.prototype.refresh=function(){this.endTime=0},t.prototype.destroy=function(){this.hooks.destroy()},t}();function Ut(t){var e=["click","bindToWrapper","disableMouse","disableTouch","preventDefault","stopPropagation","tagException","preventDefaultException","autoEndDistance"].reduce((function(e,s){return e[s]=t[s],e}),{});return e}function Vt(t,e,s,o){var i=["momentum","momentumLimitTime","momentumLimitDistance","deceleration","swipeBounceTime","swipeTime","outOfBoundaryDampingFactor","specifiedIndexAsContent"].reduce((function(e,s){return e[s]=t[s],e}),{});return i.scrollable=!!t[e],i.bounces=s,i.rect=o,i}function qt(t,e,s){s.forEach((function(s){var o,i;"string"===typeof s?o=i=s:(o=s.source,i=s.target),t.on(o,(function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];return e.trigger.apply(e,T([i],t))}))}))}function Jt(t,e){for(var s=Object.keys(t),o=0,i=s;o<i.length;o++){var a=i[o];if(t[a]!==e[a])return!1}return!0}var Zt=1,Gt=function(){function t(t,e,s){this.wrapper=t,this.content=e,this.resizeTimeout=0,this.hooks=new Tt(["beforeStart","beforeMove","beforeScrollStart","scrollStart","scroll","beforeEnd","scrollEnd","resize","touchEnd","end","flick","scrollCancel","momentum","scrollTo","minDistanceScroll","scrollToElement","beforeRefresh"]),this.options=s;var o=this.options.bounce,i=o.left,a=o.right,n=o.top,r=o.bottom;this.scrollBehaviorX=new jt(t,e,Vt(s,"scrollX",[i,a],{size:"width",position:"left"})),this.scrollBehaviorY=new jt(t,e,Vt(s,"scrollY",[n,r],{size:"height",position:"top"})),this.translater=new Yt(this.content),this.animater=zt(this.content,this.translater,this.options),this.actionsHandler=new Dt(this.options.bindToTarget?this.content:t,Ut(this.options)),this.actions=new Kt(this.scrollBehaviorX,this.scrollBehaviorY,this.actionsHandler,this.animater,this.options);var l=this.resize.bind(this);this.resizeRegister=new Pt(window,[{name:"orientationchange",handler:l},{name:"resize",handler:l}]),this.registerTransitionEnd(),this.init()}return t.prototype.init=function(){var t=this;this.bindTranslater(),this.bindAnimater(),this.bindActions(),this.hooks.on(this.hooks.eventTypes.scrollEnd,(function(){t.togglePointerEvents(!0)}))},t.prototype.registerTransitionEnd=function(){this.transitionEndRegister=new Pt(this.content,[{name:et.transitionEnd,handler:this.transitionEnd.bind(this)}])},t.prototype.bindTranslater=function(){var t=this,e=this.translater.hooks;e.on(e.eventTypes.beforeTranslate,(function(e){t.options.translateZ&&e.push(t.options.translateZ)})),e.on(e.eventTypes.translate,(function(e){var s=t.getCurrentPos();t.updatePositions(e),!0!==t.actions.ensuringInteger?e.x===s.x&&e.y===s.y||t.togglePointerEvents(!1):t.actions.ensuringInteger=!1}))},t.prototype.bindAnimater=function(){var t=this;this.animater.hooks.on(this.animater.hooks.eventTypes.end,(function(e){t.resetPosition(t.options.bounceTime)||(t.animater.setPending(!1),t.hooks.trigger(t.hooks.eventTypes.scrollEnd,e))})),qt(this.animater.hooks,this.hooks,[{source:this.animater.hooks.eventTypes.move,target:this.hooks.eventTypes.scroll},{source:this.animater.hooks.eventTypes.forceStop,target:this.hooks.eventTypes.scrollEnd}])},t.prototype.bindActions=function(){var t=this,e=this.actions;qt(e.hooks,this.hooks,[{source:e.hooks.eventTypes.start,target:this.hooks.eventTypes.beforeStart},{source:e.hooks.eventTypes.start,target:this.hooks.eventTypes.beforeScrollStart},{source:e.hooks.eventTypes.beforeMove,target:this.hooks.eventTypes.beforeMove},{source:e.hooks.eventTypes.scrollStart,target:this.hooks.eventTypes.scrollStart},{source:e.hooks.eventTypes.scroll,target:this.hooks.eventTypes.scroll},{source:e.hooks.eventTypes.beforeEnd,target:this.hooks.eventTypes.beforeEnd}]),e.hooks.on(e.hooks.eventTypes.end,(function(s,o){return t.hooks.trigger(t.hooks.eventTypes.touchEnd,o),!!t.hooks.trigger(t.hooks.eventTypes.end,o)||(!(e.fingerMoved||(t.hooks.trigger(t.hooks.eventTypes.scrollCancel),!t.checkClick(s)))||(t.resetPosition(t.options.bounceTime,gt.bounce)?(t.animater.setForceStopped(!1),!0):void 0))})),e.hooks.on(e.hooks.eventTypes.scrollEnd,(function(s,o){var i=Math.abs(s.x-t.scrollBehaviorX.startPos),a=Math.abs(s.y-t.scrollBehaviorY.startPos);if(t.checkFlick(o,i,a))return t.animater.setForceStopped(!1),void t.hooks.trigger(t.hooks.eventTypes.flick);t.momentum(s,o)?t.animater.setForceStopped(!1):(e.contentMoved&&t.hooks.trigger(t.hooks.eventTypes.scrollEnd,s),t.animater.forceStopped&&t.animater.setForceStopped(!1))}))},t.prototype.checkFlick=function(t,e,s){var o=1;if(this.hooks.events.flick.length>1&&t<this.options.flickLimitTime&&e<this.options.flickLimitDistance&&s<this.options.flickLimitDistance&&(s>o||e>o))return!0},t.prototype.momentum=function(t,e){var s={time:0,easing:gt.swiper,newX:t.x,newY:t.y},o=this.scrollBehaviorX.end(e),i=this.scrollBehaviorY.end(e);if(s.newX=z(o.destination)?s.newX:o.destination,s.newY=z(i.destination)?s.newY:i.destination,s.time=Math.max(o.duration,i.duration),this.hooks.trigger(this.hooks.eventTypes.momentum,s,this),s.newX!==t.x||s.newY!==t.y)return(s.newX>this.scrollBehaviorX.minScrollPos||s.newX<this.scrollBehaviorX.maxScrollPos||s.newY>this.scrollBehaviorY.minScrollPos||s.newY<this.scrollBehaviorY.maxScrollPos)&&(s.easing=gt.swipeBounce),this.scrollTo(s.newX,s.newY,s.time,s.easing),!0},t.prototype.checkClick=function(t){var e={preventClick:this.animater.forceStopped};if(this.hooks.trigger(this.hooks.eventTypes.checkClick))return this.animater.setForceStopped(!1),!0;if(!e.preventClick){var s=this.options.dblclick,o=!1;if(s&&this.lastClickTime){var i=s.delay,a=void 0===i?300:i;B()-this.lastClickTime<a&&(o=!0,lt(t))}return this.options.tap&&nt(t,this.options.tap),this.options.click&&!it(t.target,this.options.preventDefaultException)&&rt(t),this.lastClickTime=o?null:B(),!0}return!1},t.prototype.resize=function(){var t=this;this.actions.enabled&&(O&&(this.wrapper.scrollTop=0),clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout((function(){t.hooks.trigger(t.hooks.eventTypes.resize)}),this.options.resizePolling))},t.prototype.transitionEnd=function(t){if(t.target===this.content&&this.animater.pending){var e=this.animater;e.transitionTime(),this.resetPosition(this.options.bounceTime,gt.bounce)||(this.animater.setPending(!1),3!==this.options.probeType&&this.hooks.trigger(this.hooks.eventTypes.scrollEnd,this.getCurrentPos()))}},t.prototype.togglePointerEvents=function(t){void 0===t&&(t=!0);for(var e=this.content.children.length?this.content.children:[this.content],s=t?"auto":"none",o=0;o<e.length;o++){var i=e[o];i.isBScrollContainer||(i.style.pointerEvents=s)}},t.prototype.refresh=function(t){var e=this.setContent(t);this.hooks.trigger(this.hooks.eventTypes.beforeRefresh),this.scrollBehaviorX.refresh(t),this.scrollBehaviorY.refresh(t),e&&(this.translater.setContent(t),this.animater.setContent(t),this.transitionEndRegister.destroy(),this.registerTransitionEnd(),this.options.bindToTarget&&this.actionsHandler.setContent(t)),this.actions.refresh(),this.wrapperOffset=U(this.wrapper)},t.prototype.setContent=function(t){var e=t!==this.content;return e&&(this.content=t),e},t.prototype.scrollBy=function(t,e,s,o){void 0===s&&(s=0);var i=this.getCurrentPos(),a=i.x,n=i.y;o=o||gt.bounce,t+=a,e+=n,this.scrollTo(t,e,s,o)},t.prototype.scrollTo=function(t,e,s,o,i){void 0===s&&(s=0),void 0===o&&(o=gt.bounce),void 0===i&&(i={start:{},end:{}});var a=this.options.useTransition?o.style:o.fn,n=this.getCurrentPos(),r=x({x:n.x,y:n.y},i.start),l=x({x:t,y:e},i.end);if(this.hooks.trigger(this.hooks.eventTypes.scrollTo,l),!Jt(r,l)){var c=Math.abs(l.x-r.x),p=Math.abs(l.y-r.y);c<Zt&&p<Zt&&(s=0,this.hooks.trigger(this.hooks.eventTypes.minDistanceScroll)),this.animater.move(r,l,s,a)}},t.prototype.scrollToElement=function(t,e,s,o,i){var a=A(t),n=U(a),r=function(t,e,s){return"number"===typeof t?t:t?Math.round(e/2-s/2):0};s=r(s,a.offsetWidth,this.wrapper.offsetWidth),o=r(o,a.offsetHeight,this.wrapper.offsetHeight);var l=function(t,e,s,o){return t-=e,t=o.adjustPosition(t-s),t};n.left=l(n.left,this.wrapperOffset.left,s,this.scrollBehaviorX),n.top=l(n.top,this.wrapperOffset.top,o,this.scrollBehaviorY),this.hooks.trigger(this.hooks.eventTypes.scrollToElement,a,n)||this.scrollTo(n.left,n.top,e,i)},t.prototype.resetPosition=function(t,e){void 0===t&&(t=0),void 0===e&&(e=gt.bounce);var s=this.scrollBehaviorX.checkInBoundary(),o=s.position,i=s.inBoundary,a=this.scrollBehaviorY.checkInBoundary(),n=a.position,r=a.inBoundary;return(!i||!r)&&(X&&this.reflow(),this.scrollTo(o,n,t,e),!0)},t.prototype.reflow=function(){this._reflow=this.content.offsetHeight},t.prototype.updatePositions=function(t){this.scrollBehaviorX.updatePosition(t.x),this.scrollBehaviorY.updatePosition(t.y)},t.prototype.getCurrentPos=function(){return this.actions.getCurrentPos()},t.prototype.enable=function(){this.actions.enabled=!0},t.prototype.disable=function(){kt(this.animater.timer),this.actions.enabled=!1},t.prototype.destroy=function(){var t=this,e=["resizeRegister","transitionEndRegister","actionsHandler","actions","hooks","animater","translater","scrollBehaviorX","scrollBehaviorY"];e.forEach((function(e){return t[e].destroy()}))},t}(),Qt=function(t){function e(e,s){var o=t.call(this,["refresh","contentChanged","enable","disable","beforeScrollStart","scrollStart","scroll","scrollEnd","scrollCancel","touchEnd","flick","destroy"])||this,i=A(e);return i?(o.plugins={},o.options=(new Mt).merge(s).process(),o.setContent(i).valid?(o.hooks=new Tt(["refresh","enable","disable","destroy","beforeInitialScrollTo","contentChanged"]),o.init(i),o):o):($("Can not resolve the wrapper DOM."),o)}return _(e,t),e.use=function(t){var s=t.pluginName,o=e.plugins.some((function(e){return t===e.ctor}));return o?e:z(s)?($("Plugin Class must specify plugin's name in static property by 'pluginName' field."),e):(e.pluginsMap[s]=!0,e.plugins.push({name:s,applyOrder:t.applyOrder,ctor:t}),e)},e.prototype.setContent=function(t){var e=!1,s=!0,o=t.children[this.options.specifiedIndexAsContent];return o?(e=this.content!==o,e&&(this.content=o)):($("The wrapper need at least one child element to be content element to scroll."),s=!1),{valid:s,contentChanged:e}},e.prototype.init=function(t){var e=this;this.wrapper=t,t.isBScrollContainer=!0,this.scroller=new Gt(t,this.content,this.options),this.scroller.hooks.on(this.scroller.hooks.eventTypes.resize,(function(){e.refresh()})),this.eventBubbling(),this.handleAutoBlur(),this.enable(),this.proxy(P),this.applyPlugins(),this.refreshWithoutReset(this.content);var s=this.options,o=s.startX,i=s.startY,a={x:o,y:i};this.hooks.trigger(this.hooks.eventTypes.beforeInitialScrollTo,a)||this.scroller.scrollTo(a.x,a.y)},e.prototype.applyPlugins=function(){var t=this,s=this.options;e.plugins.sort((function(t,e){var s,o=(s={},s["pre"]=-1,s["post"]=1,s),i=t.applyOrder?o[t.applyOrder]:0,a=e.applyOrder?o[e.applyOrder]:0;return i-a})).forEach((function(e){var o=e.ctor;s[e.name]&&"function"===typeof o&&(t.plugins[e.name]=new o(t))}))},e.prototype.handleAutoBlur=function(){this.options.autoBlur&&this.on(this.eventTypes.beforeScrollStart,(function(){var t=document.activeElement;!t||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName||t.blur()}))},e.prototype.eventBubbling=function(){qt(this.scroller.hooks,this,[this.eventTypes.beforeScrollStart,this.eventTypes.scrollStart,this.eventTypes.scroll,this.eventTypes.scrollEnd,this.eventTypes.scrollCancel,this.eventTypes.touchEnd,this.eventTypes.flick])},e.prototype.refreshWithoutReset=function(t){this.scroller.refresh(t),this.hooks.trigger(this.hooks.eventTypes.refresh,t),this.trigger(this.eventTypes.refresh,t)},e.prototype.proxy=function(t){var e=this;t.forEach((function(t){var s=t.key,o=t.sourceKey;St(e,o,s)}))},e.prototype.refresh=function(){var t=this.setContent(this.wrapper),e=t.contentChanged,s=t.valid;if(s){var o=this.content;this.refreshWithoutReset(o),e&&(this.hooks.trigger(this.hooks.eventTypes.contentChanged,o),this.trigger(this.eventTypes.contentChanged,o)),this.scroller.resetPosition()}},e.prototype.enable=function(){this.scroller.enable(),this.hooks.trigger(this.hooks.eventTypes.enable),this.trigger(this.eventTypes.enable)},e.prototype.disable=function(){this.scroller.disable(),this.hooks.trigger(this.hooks.eventTypes.disable),this.trigger(this.eventTypes.disable)},e.prototype.destroy=function(){this.hooks.trigger(this.hooks.eventTypes.destroy),this.trigger(this.eventTypes.destroy),this.scroller.destroy()},e.prototype.eventRegister=function(t){this.registerType(t)},e.plugins=[],e.pluginsMap={},e}(Tt);function te(t,e){var s=new Qt(t,e);return s}te.use=Qt.use,te.plugins=Qt.plugins,te.pluginsMap=Qt.pluginsMap;var ee=te,se=function(){function t(t){this.scroll=t,this.wheelEndTimer=0,this.wheelMoveTimer=0,this.wheelStart=!1,this.init()}return t.prototype.init=function(){this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.registerEvent()},t.prototype.handleBScroll=function(){this.scroll.registerType(["alterOptions","mousewheelStart","mousewheelMove","mousewheelEnd"])},t.prototype.handleOptions=function(){var t=!0===this.scroll.options.mouseWheel?{}:this.scroll.options.mouseWheel,e={speed:20,invert:!1,easeTime:300,discreteTime:400,throttleTime:0,dampingFactor:.1};this.mouseWheelOpt=H(e,t)},t.prototype.handleHooks=function(){this.hooksFn=[],this.registerHooks(this.scroll.hooks,"destroy",this.destroy)},t.prototype.registerEvent=function(){this.eventRegister=new Pt(this.scroll.scroller.wrapper,[{name:"wheel",handler:this.wheelHandler.bind(this)},{name:"mousewheel",handler:this.wheelHandler.bind(this)},{name:"DOMMouseScroll",handler:this.wheelHandler.bind(this)}])},t.prototype.registerHooks=function(t,e,s){t.on(e,s,this),this.hooksFn.push([t,e,s])},t.prototype.wheelHandler=function(t){if(this.scroll.enabled){this.beforeHandler(t),this.wheelStart||(this.wheelStartHandler(t),this.wheelStart=!0);var e=this.getWheelDelta(t);this.wheelMoveHandler(e),this.wheelEndDetector(e)}},t.prototype.wheelStartHandler=function(t){this.cleanCache();var e=this.scroll.scroller,s=e.scrollBehaviorX,o=e.scrollBehaviorY;s.setMovingDirection(0),o.setMovingDirection(0),s.setDirection(0),o.setDirection(0),this.scroll.trigger(this.scroll.eventTypes.alterOptions,this.mouseWheelOpt),this.scroll.trigger(this.scroll.eventTypes.mousewheelStart)},t.prototype.cleanCache=function(){this.deltaCache=[]},t.prototype.wheelMoveHandler=function(t){var e=this,s=this.mouseWheelOpt,o=s.throttleTime,i=s.dampingFactor;if(o&&this.wheelMoveTimer)this.deltaCache.push(t);else{var a=this.deltaCache.reduce((function(t,e){return{x:t.x+e.x,y:t.y+e.y}}),{x:0,y:0});this.cleanCache();var n=this.scroll.scroller,r=n.scrollBehaviorX,l=n.scrollBehaviorY;r.setMovingDirection(-t.directionX),l.setMovingDirection(-t.directionY),r.setDirection(t.x),l.setDirection(t.y);var c=r.performDampingAlgorithm(Math.round(t.x)+a.x,i),p=l.performDampingAlgorithm(Math.round(t.y)+a.x,i);if(!this.scroll.trigger(this.scroll.eventTypes.mousewheelMove,{x:c,y:p})){var h=this.getEaseTime();c===this.scroll.x&&p===this.scroll.y||this.scroll.scrollTo(c,p,h)}o&&(this.wheelMoveTimer=window.setTimeout((function(){e.wheelMoveTimer=0}),o))}},t.prototype.wheelEndDetector=function(t){var e=this;window.clearTimeout(this.wheelEndTimer),this.wheelEndTimer=window.setTimeout((function(){e.wheelStart=!1,window.clearTimeout(e.wheelMoveTimer),e.wheelMoveTimer=0,e.scroll.trigger(e.scroll.eventTypes.mousewheelEnd,t)}),this.mouseWheelOpt.discreteTime)},t.prototype.getWheelDelta=function(t){var e=this.mouseWheelOpt,s=e.speed,o=e.invert,i=0,a=0,n=o?-1:1;switch(!0){case"deltaX"in t:1===t.deltaMode?(i=-t.deltaX*s,a=-t.deltaY*s):(i=-t.deltaX,a=-t.deltaY);break;case"wheelDeltaX"in t:i=t.wheelDeltaX/120*s,a=t.wheelDeltaY/120*s;break;case"wheelDelta"in t:i=a=t.wheelDelta/120*s;break;case"detail"in t:i=a=-t.detail/3*s;break}i*=n,a*=n,this.scroll.hasVerticalScroll||(i=a,a=0),this.scroll.hasHorizontalScroll||(i=0);var r=i>0?-1:i<0?1:0,l=a>0?-1:a<0?1:0;return{x:i,y:a,directionX:r,directionY:l}},t.prototype.beforeHandler=function(t){var e=this.scroll.options,s=e.preventDefault,o=e.stopPropagation,i=e.preventDefaultException;s&&!it(t.target,i)&&t.preventDefault(),o&&t.stopPropagation()},t.prototype.getEaseTime=function(){var t=100,e=this.mouseWheelOpt.easeTime;return e<t&&$("easeTime should be greater than 100.If mouseWheel easeTime is too small,scrollEnd will be triggered many times."),Math.max(e,t)},t.prototype.destroy=function(){this.eventRegister.destroy(),window.clearTimeout(this.wheelEndTimer),window.clearTimeout(this.wheelMoveTimer),this.hooksFn.forEach((function(t){var e=t[0],s=t[1],o=t[2];e.off(s,o)}))},t.pluginName="mouseWheel",t.applyOrder="pre",t}(),oe=function(){function t(t){this.scroll=t,this.stopObserver=!1,this.init()}return t.prototype.init=function(){this.handleMutationObserver(),this.handleHooks()},t.prototype.handleMutationObserver=function(){var t=this;if("undefined"!==typeof MutationObserver){var e=0;this.observer=new MutationObserver((function(s){t.mutationObserverHandler(s,e)})),this.startObserve(this.observer)}else this.checkDOMUpdate()},t.prototype.handleHooks=function(){var t=this;this.hooksFn=[],this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.contentChanged,(function(){t.stopObserve(),t.handleMutationObserver()})),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.enable,(function(){t.stopObserver&&t.handleMutationObserver()})),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.disable,(function(){t.stopObserve()})),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.destroy,(function(){t.destroy()}))},t.prototype.mutationObserverHandler=function(t,e){var s=this;if(!this.shouldNotRefresh()){for(var o=!1,i=!1,a=0;a<t.length;a++){var n=t[a];if("attributes"!==n.type){o=!0;break}if(n.target!==this.scroll.scroller.content){i=!0;break}}o?this.scroll.refresh():i&&(clearTimeout(e),e=window.setTimeout((function(){s.shouldNotRefresh()||s.scroll.refresh()}),60))}},t.prototype.startObserve=function(t){var e={attributes:!0,childList:!0,subtree:!0};t.observe(this.scroll.scroller.content,e)},t.prototype.shouldNotRefresh=function(){var t=this.scroll.scroller,e=t.scrollBehaviorX,s=t.scrollBehaviorY,o=e.currentPos>e.minScrollPos||e.currentPos<e.maxScrollPos||s.currentPos>s.minScrollPos||s.currentPos<s.maxScrollPos;return t.animater.pending||o},t.prototype.checkDOMUpdate=function(){var t=this,e=this.scroll.scroller.content,s=ot(e),o=s.width,i=s.height,a=function(){if(!t.stopObserver){s=ot(e);var a=s.width,r=s.height;o===a&&i===r||t.scroll.refresh(),o=a,i=r,n()}},n=function(){setTimeout((function(){a()}),1e3)};n()},t.prototype.registerHooks=function(t,e,s){t.on(e,s,this),this.hooksFn.push([t,e,s])},t.prototype.stopObserve=function(){this.stopObserver=!0,this.observer&&this.observer.disconnect()},t.prototype.destroy=function(){this.stopObserve(),this.hooksFn.forEach((function(t){var e=t[0],s=t[1],o=t[2];e.off(s,o)})),this.hooksFn.length=0},t.pluginName="observeDOM",t}(),ie="plugins.pullDownRefresh",ae=[{key:"finishPullDown",name:"finishPullDown"},{key:"openPullDown",name:"openPullDown"},{key:"closePullDown",name:"closePullDown"},{key:"autoPullDownRefresh",name:"autoPullDownRefresh"}],ne=ae.map((function(t){return{key:t.key,sourceKey:ie+"."+t.name}})),re="pullingDown",le=function(){function t(t){this.scroll=t,this.pulling=!1,this.init()}return t.prototype.init=function(){this.handleBScroll(),this.handleOptions(this.scroll.options.pullDownRefresh),this.handleHooks(),this.watch()},t.prototype.handleBScroll=function(){this.scroll.registerType([re]),this.scroll.proxy(ne)},t.prototype.handleOptions=function(t){void 0===t&&(t={}),t=!0===t?{}:t;var e={threshold:90,stop:40};this.options=H(e,t),this.scroll.options.probeType=3},t.prototype.handleHooks=function(){var t=this;this.hooksFn=[];var e=this.scroll.scroller,s=e.scrollBehaviorY;this.currentMinScrollY=this.cachedOriginanMinScrollY=s.minScrollPos,this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.contentChanged,(function(){t.finishPullDown()})),this.registerHooks(s.hooks,s.hooks.eventTypes.computeBoundary,(function(e){e.maxScrollPos>0&&(e.maxScrollPos=-1),e.minScrollPos=t.currentMinScrollY})),this.scroll.eventTypes.alterOptions&&(this.registerHooks(this.scroll,this.scroll.eventTypes.alterOptions,(function(t){var e=300,s=350;t.discreteTime=e,t.easeTime=s})),this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelEnd,(function(){e.hooks.trigger(e.hooks.eventTypes.end)})))},t.prototype.registerHooks=function(t,e,s){t.on(e,s,this),this.hooksFn.push([t,e,s])},t.prototype.watch=function(){var t=this.scroll.scroller;this.watching=!0,this.registerHooks(t.hooks,t.hooks.eventTypes.end,this.checkPullDown)},t.prototype.unwatch=function(){var t=this.scroll.scroller;this.watching=!1,t.hooks.off(t.hooks.eventTypes.end,this.checkPullDown)},t.prototype.checkPullDown=function(){var t=this.options,e=t.threshold,s=t.stop;return!(this.scroll.y<e)&&(this.pulling||(this.modifyBehaviorYBoundary(s),this.pulling=!0,this.scroll.trigger(re)),this.scroll.scrollTo(this.scroll.x,s,this.scroll.options.bounceTime,gt.bounce),this.pulling)},t.prototype.modifyBehaviorYBoundary=function(t){var e=this.scroll.scroller.scrollBehaviorY;this.cachedOriginanMinScrollY=e.minScrollPos,this.currentMinScrollY=t,e.computeBoundary()},t.prototype.finishPullDown=function(){if(!0===this.pulling){var t=this.scroll.scroller.scrollBehaviorY;this.currentMinScrollY=this.cachedOriginanMinScrollY,t.computeBoundary(),this.pulling=!1,this.scroll.resetPosition(this.scroll.options.bounceTime,gt.bounce)}},t.prototype.openPullDown=function(t){void 0===t&&(t={}),this.handleOptions(t),this.watching||this.watch()},t.prototype.closePullDown=function(){this.unwatch()},t.prototype.autoPullDownRefresh=function(){var t=this.options,e=t.threshold,s=t.stop;!this.pulling&&this.watching&&(this.pulling=!0,this.modifyBehaviorYBoundary(s),this.scroll.scrollTo(this.scroll.x,e),this.scroll.trigger(re),this.scroll.scrollTo(this.scroll.x,s,this.scroll.options.bounceTime,gt.bounce))},t.pluginName="pullDownRefresh",t}(),ce="plugins.pullUpLoad",pe=[{key:"finishPullUp",name:"finishPullUp"},{key:"openPullUp",name:"openPullUp"},{key:"closePullUp",name:"closePullUp"},{key:"autoPullUpLoad",name:"autoPullUpLoad"}],he=pe.map((function(t){return{key:t.key,sourceKey:ce+"."+t.name}})),ue="pullingUp",de=function(){function t(t){this.scroll=t,this.pulling=!1,this.watching=!1,this.init()}return t.prototype.init=function(){this.handleBScroll(),this.handleOptions(this.scroll.options.pullUpLoad),this.handleHooks(),this.watch()},t.prototype.handleBScroll=function(){this.scroll.registerType([ue]),this.scroll.proxy(he)},t.prototype.handleOptions=function(t){void 0===t&&(t={}),t=!0===t?{}:t;var e={threshold:0};this.options=H(e,t),this.scroll.options.probeType=3},t.prototype.handleHooks=function(){var t=this;this.hooksFn=[];var e=this.scroll.scroller.scrollBehaviorY;this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.contentChanged,(function(){t.finishPullUp()})),this.registerHooks(e.hooks,e.hooks.eventTypes.computeBoundary,(function(t){t.maxScrollPos>0&&(t.maxScrollPos=-1)}))},t.prototype.registerHooks=function(t,e,s){t.on(e,s,this),this.hooksFn.push([t,e,s])},t.prototype.watch=function(){this.watching||(this.watching=!0,this.registerHooks(this.scroll,this.scroll.eventTypes.scroll,this.checkPullUp))},t.prototype.unwatch=function(){this.watching=!1,this.scroll.off(this.scroll.eventTypes.scroll,this.checkPullUp)},t.prototype.checkPullUp=function(t){var e=this,s=this.options.threshold;1===this.scroll.movingDirectionY&&t.y<=this.scroll.maxScrollY+s&&(this.pulling=!0,this.scroll.once(this.scroll.eventTypes.scrollEnd,(function(){e.pulling=!1})),this.unwatch(),this.scroll.trigger(ue))},t.prototype.finishPullUp=function(){var t=this;this.scroll.scroller.scrollBehaviorY.setMovingDirection(0),this.pulling?this.scroll.once(this.scroll.eventTypes.scrollEnd,(function(){t.watch()})):this.watch()},t.prototype.openPullUp=function(t){void 0===t&&(t={}),this.handleOptions(t),this.watch()},t.prototype.closePullUp=function(){this.unwatch()},t.prototype.autoPullUpLoad=function(){var t=this.options.threshold,e=this.scroll.scroller.scrollBehaviorY;if(!this.pulling&&this.watching){var s=-1,o=e.maxScrollPos+t+s;this.scroll.scroller.scrollBehaviorY.setMovingDirection(s),this.scroll.scrollTo(this.scroll.x,o,this.scroll.options.bounceTime)}},t.pluginName="pullUpLoad",t}(),me=function(){function t(t,e){this.indicator=t,this.options=e,this.hooks=new Tt(["touchStart","touchMove","touchEnd"]),this.registerEvents()}return t.prototype.registerEvents=function(){var t=this.options,e=t.disableMouse,s=t.disableTouch,o=[],i=[],a=[];e||(o.push({name:"mousedown",handler:this.start.bind(this)}),i.push({name:"mousemove",handler:this.move.bind(this)}),a.push({name:"mouseup",handler:this.end.bind(this)})),s||(o.push({name:"touchstart",handler:this.start.bind(this)}),i.push({name:"touchmove",handler:this.move.bind(this)}),a.push({name:"touchend",handler:this.end.bind(this)},{name:"touchcancel",handler:this.end.bind(this)})),this.startEventRegister=new Pt(this.indicator.indicatorEl,o),this.moveEventRegister=new Pt(window,i),this.endEventRegister=new Pt(window,a)},t.prototype.BScrollIsDisabled=function(){return!this.indicator.scroll.enabled},t.prototype.start=function(t){if(!this.BScrollIsDisabled()){var e=t.touches?t.touches[0]:t;t.preventDefault(),t.stopPropagation(),this.initiated=!0,this.lastPoint=e[this.indicator.keysMap.point],this.hooks.trigger(this.hooks.eventTypes.touchStart)}},t.prototype.move=function(t){if(this.initiated){var e=t.touches?t.touches[0]:t,s=e[this.indicator.keysMap.point];t.preventDefault(),t.stopPropagation();var o=s-this.lastPoint;this.lastPoint=s,this.hooks.trigger(this.hooks.eventTypes.touchMove,o)}},t.prototype.end=function(t){this.initiated&&(this.initiated=!1,t.preventDefault(),t.stopPropagation(),this.hooks.trigger(this.hooks.eventTypes.touchEnd))},t.prototype.destroy=function(){this.startEventRegister.destroy(),this.moveEventRegister.destroy(),this.endEventRegister.destroy()},t}(),ge=function(){function t(t,e){this.scroll=t,this.options=e,this.hooksFn=[],this.wrapper=e.wrapper,this.direction=e.direction,this.indicatorEl=this.wrapper.children[0],this.keysMap=this.getKeysMap(),this.handleFade(),this.handleHooks()}return t.prototype.handleFade=function(){this.options.fade&&(this.wrapper.style.opacity="0")},t.prototype.handleHooks=function(){var t=this,e=this.options,s=e.fade,o=e.interactive,i=e.scrollbarTrackClickable,a=this.scroll,n=a.hooks,r=a.scroller.translater.hooks,l=a.scroller.animater.hooks;if(this.registerHooks(n,n.eventTypes.refresh,this.refresh),this.registerHooks(r,r.eventTypes.translate,(function(e){var s=t.keysMap.hasScroll;t.scroll[s]&&t.updatePosition(e)})),this.registerHooks(l,l.eventTypes.time,this.transitionTime),this.registerHooks(l,l.eventTypes.timeFunction,this.transitionTimingFunction),s&&(this.registerHooks(a,a.eventTypes.scrollEnd,(function(){t.fade()})),this.registerHooks(a,a.eventTypes.scrollStart,(function(){t.fade(!0)})),a.eventTypes.mousewheelStart&&a.eventTypes.mousewheelEnd&&(this.registerHooks(a,a.eventTypes.mousewheelStart,(function(){t.fade(!0)})),this.registerHooks(a,a.eventTypes.mousewheelMove,(function(){t.fade(!0)})),this.registerHooks(a,a.eventTypes.mousewheelEnd,(function(){t.fade()})))),o){var c=this.scroll.options,p=c.disableMouse,h=c.disableTouch;this.eventHandler=new me(this,{disableMouse:p,disableTouch:h});var u=this.eventHandler.hooks;this.registerHooks(u,u.eventTypes.touchStart,this.startHandler),this.registerHooks(u,u.eventTypes.touchMove,this.moveHandler),this.registerHooks(u,u.eventTypes.touchEnd,this.endHandler)}i&&this.bindClick()},t.prototype.registerHooks=function(t,e,s){t.on(e,s,this),this.hooksFn.push([t,e,s])},t.prototype.bindClick=function(){var t=this.wrapper;this.clickEventRegister=new Pt(t,[{name:"click",handler:this.handleClick.bind(this)}])},t.prototype.handleClick=function(t){var e=this.calculateclickOffsetPos(t),s=this.scroll,o=s.x,i=s.y;o="horizontal"===this.direction?e:o,i="vertical"===this.direction?e:i,this.scroll.scrollTo(o,i,this.options.scrollbarTrackOffsetTime)},t.prototype.calculateclickOffsetPos=function(t){var e=this.keysMap,s=e.point,o=e.domRect,i=this.options.scrollbarTrackOffsetType,a=t[s]-this.wrapperRect[o],n=a<this.currentPos?-1:1,r=0,l=this.currentPos;return"step"===i?r=this.scrollInfo.baseSize*n:(r=0,l=a),this.newPos(l,r,this.scrollInfo)},t.prototype.getKeysMap=function(){return"vertical"===this.direction?{hasScroll:"hasVerticalScroll",size:"height",wrapperSize:"clientHeight",scrollerSize:"scrollerHeight",maxScrollPos:"maxScrollY",pos:"y",point:"pageY",translateProperty:"translateY",domRect:"top"}:{hasScroll:"hasHorizontalScroll",size:"width",wrapperSize:"clientWidth",scrollerSize:"scrollerWidth",maxScrollPos:"maxScrollX",pos:"x",point:"pageX",translateProperty:"translateX",domRect:"left"}},t.prototype.fade=function(t){var e=t?250:500,s=this.wrapper;s.style[et.transitionDuration]=e+"ms",s.style.opacity=t?"1":"0"},t.prototype.refresh=function(){var t=this.keysMap.hasScroll,e=this.scroll,s=e.x,o=e.y;if(this.wrapperRect=this.wrapper.getBoundingClientRect(),this.canScroll(e[t])){var i=this.keysMap,a=i.wrapperSize,n=i.scrollerSize,r=i.maxScrollPos;this.scrollInfo=this.refreshScrollInfo(this.wrapper[a],e[n],e[r],this.indicatorEl[a]),this.updatePosition({x:s,y:o})}},t.prototype.transitionTime=function(t){void 0===t&&(t=0),this.indicatorEl.style[et.transitionDuration]=t+"ms"},t.prototype.transitionTimingFunction=function(t){this.indicatorEl.style[et.transitionTimingFunction]=t},t.prototype.canScroll=function(t){return this.wrapper.style.display=t?"block":"none",t},t.prototype.refreshScrollInfo=function(t,e,s,o){var i=Math.max(Math.round(t*t/(e||t||1)),this.options.minSize);this.options.isCustom&&(i=o);var a=t-i,n=a/s;return{baseSize:i,maxScrollPos:a,minScrollPos:0,sizeRatio:n}},t.prototype.updatePosition=function(t){var e=this.caculatePosAndSize(t,this.scrollInfo),s=e.pos,o=e.size;this.refreshStyle(o,s),this.currentPos=s},t.prototype.caculatePosAndSize=function(t,e){var s,o=this.keysMap.pos,i=e.sizeRatio,a=e.baseSize,n=e.maxScrollPos,r=e.minScrollPos,l=this.options.minSize,c=Math.round(i*t[o]);return c<r?(s=Math.max(a+3*c,l),c=r):c>n?(s=Math.max(a-3*(c-n),l),c=n+a-s):s=a,{pos:c,size:s}},t.prototype.refreshStyle=function(t,e){var s=this.keysMap,o=s.translateProperty,i=s.size,a=this.scroll.options.translateZ;this.indicatorEl.style[i]=t+"px",this.indicatorEl.style[et.transform]=o+"("+e+"px)"+a},t.prototype.startHandler=function(){this.moved=!1,this.startTime=B(),this.transitionTime(),this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.beforeScrollStart)},t.prototype.moveHandler=function(t){if(this.moved||this.indicatorNotMoved(t)||(this.moved=!0,this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollStart)),this.moved){var e=this.newPos(this.currentPos,t,this.scrollInfo);this.syncBScroll(e)}},t.prototype.endHandler=function(){if(this.moved){var t=this.scroll,e=t.x,s=t.y;this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollEnd,{x:e,y:s})}},t.prototype.indicatorNotMoved=function(t){var e=this.currentPos,s=this.scrollInfo,o=s.maxScrollPos,i=s.minScrollPos,a=e===i&&t<=0||e===o&&t>=0;return a},t.prototype.syncBScroll=function(t){var e=B(),s=this.scroll,o=s.x,i=s.y,a=s.options,n=s.scroller,r=s.maxScrollY,l=s.minScrollY,c=s.maxScrollX,p=s.minScrollX,h=a.probeType,u=a.momentumLimitTime,d={x:o,y:i};"vertical"===this.direction?d.y=L(t,r,l):d.x=L(t,c,p),n.translater.translate(d),e-this.startTime>u&&(this.startTime=e,1===h&&n.hooks.trigger(n.hooks.eventTypes.scroll,d)),h>1&&n.hooks.trigger(n.hooks.eventTypes.scroll,d)},t.prototype.newPos=function(t,e,s){var o=s.maxScrollPos,i=s.sizeRatio,a=s.minScrollPos,n=t+e;return n=L(n,a,o),Math.round(n/i)},t.prototype.destroy=function(){var t=this.options,e=t.interactive,s=t.scrollbarTrackClickable,o=t.isCustom;e&&this.eventHandler.destroy(),s&&this.clickEventRegister.destroy(),o||this.wrapper.parentNode.removeChild(this.wrapper),this.hooksFn.forEach((function(t){var e=t[0],s=t[1],o=t[2];e.off(s,o)})),this.hooksFn.length=0},t}(),ve=function(){function t(t){this.scroll=t,this.handleOptions(),this.createIndicators(),this.handleHooks()}return t.prototype.handleHooks=function(){var t=this,e=this.scroll;e.hooks.on(e.hooks.eventTypes.destroy,(function(){for(var e=0,s=t.indicators;e<s.length;e++){var o=s[e];o.destroy()}}))},t.prototype.handleOptions=function(){var t=!0===this.scroll.options.scrollbar?{}:this.scroll.options.scrollbar,e={fade:!0,interactive:!1,customElements:[],minSize:8,scrollbarTrackClickable:!1,scrollbarTrackOffsetType:"step",scrollbarTrackOffsetTime:300};this.options=H(e,t)},t.prototype.createIndicators=function(){for(var t,e=this.scroll,s=[],o=["scrollX","scrollY"],i=["horizontal","vertical"],a=this.options.customElements,n=0;n<o.length;n++){var r=o[n];if(e.options[r]){var l=a.shift(),c=i[n],p=!1,h=l||this.createScrollbarElement(c);h!==l?e.wrapper.append(h):p=!0,t=x(x({wrapper:h,direction:c},this.options),{isCustom:p}),s.push(new ge(e,t))}}this.indicators=s},t.prototype.createScrollbarElement=function(t,e){void 0===e&&(e=this.options.scrollbarTrackClickable);var s=document.createElement("div"),o=document.createElement("div");return s.style.cssText="position:absolute;z-index:9999;overflow:hidden;",o.style.cssText="box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px;",o.className="bscroll-indicator","horizontal"===t?(s.style.cssText+="height:7px;left:2px;right:2px;bottom:0;",o.style.height="100%",s.className="bscroll-horizontal-scrollbar"):(s.style.cssText+="width:7px;bottom:2px;top:2px;right:1px;",o.style.width="100%",s.className="bscroll-vertical-scrollbar"),e||(s.style.cssText+="pointer-events:none;"),s.appendChild(o),s},t.pluginName="scrollbar",t}(),fe=function(){function t(t){this.scroll=t,this.init()}return t.prototype.init=function(){var t=this.scroll.scroller,e=t.scrollBehaviorX,s=t.scrollBehaviorY;this.wrapperWidth=e.wrapperSize,this.wrapperHeight=s.wrapperSize,this.scrollerHeight=s.contentSize,this.scrollerWidth=e.contentSize,this.pages=this.buildPagesMatrix(this.wrapperWidth,this.wrapperHeight),this.pageLengthOfX=this.pages?this.pages.length:0,this.pageLengthOfY=this.pages&&this.pages[0]?this.pages[0].length:0},t.prototype.getPageStats=function(t,e){return this.pages[t][e]},t.prototype.getNearestPageIndex=function(t,e){for(var s=0,o=0,i=this.pages.length;s<i-1;s++)if(t>=this.pages[s][0].cx)break;for(i=this.pages[s].length;o<i-1;o++)if(e>=this.pages[0][o].cy)break;return{pageX:s,pageY:o}},t.prototype.buildPagesMatrix=function(t,e){var s,o,i,a,n=[],r=0,l=0,c=this.scroll.scroller.scrollBehaviorX.maxScrollPos,p=this.scroll.scroller.scrollBehaviorY.maxScrollPos;o=Math.round(t/2),i=Math.round(e/2);while(r>-this.scrollerWidth){n[l]=[],a=0,s=0;while(s>-this.scrollerHeight)n[l][a]={x:Math.max(r,c),y:Math.max(s,p),width:t,height:e,cx:r-o,cy:s-i},s-=e,a++;r-=t,l++}return n},t}(),ye={pageX:0,pageY:0,x:0,y:0},be=function(){function t(t,e){this.scroll=t,this.slideOptions=e,this.slideX=!1,this.slideY=!1,this.currentPage=H({},ye)}return t.prototype.refresh=function(){this.pagesMatrix=new fe(this.scroll),this.checkSlideLoop(),this.currentPage=this.getAdjustedCurrentPage()},t.prototype.getAdjustedCurrentPage=function(){var t=this.currentPage,e=t.pageX,s=t.pageY;e=Math.min(e,this.pagesMatrix.pageLengthOfX-1),s=Math.min(s,this.pagesMatrix.pageLengthOfY-1),this.loopX&&(e=Math.min(e,this.pagesMatrix.pageLengthOfX-2)),this.loopY&&(s=Math.min(s,this.pagesMatrix.pageLengthOfY-2));var o=this.pagesMatrix.getPageStats(e,s),i=o.x,a=o.y;return{pageX:e,pageY:s,x:i,y:a}},t.prototype.setCurrentPage=function(t){this.currentPage=t},t.prototype.getInternalPage=function(t,e){t>=this.pagesMatrix.pageLengthOfX?t=this.pagesMatrix.pageLengthOfX-1:t<0&&(t=0),e>=this.pagesMatrix.pageLengthOfY?e=this.pagesMatrix.pageLengthOfY-1:e<0&&(e=0);var s=this.pagesMatrix.getPageStats(t,e),o=s.x,i=s.y;return{pageX:t,pageY:e,x:o,y:i}},t.prototype.getInitialPage=function(t){void 0===t&&(t=!1);var e=this.loopX?1:0,s=this.loopY?1:0,o=t?e:this.currentPage.pageX,i=t?s:this.currentPage.pageY,a=this.pagesMatrix.getPageStats(o,i),n=a.x,r=a.y;return{pageX:o,pageY:i,x:n,y:r}},t.prototype.getExposedPage=function(t){var e=H({},t);return this.loopX&&(e.pageX=this.fixedPage(e.pageX,this.pagesMatrix.pageLengthOfX-2)),this.loopY&&(e.pageY=this.fixedPage(e.pageY,this.pagesMatrix.pageLengthOfY-2)),e},t.prototype.getExposedPageByPageIndex=function(t,e){var s={pageX:t,pageY:e};this.loopX&&(s.pageX=t+1),this.loopY&&(s.pageY=e+1);var o=this.pagesMatrix.getPageStats(s.pageX,s.pageY),i=o.x,a=o.y;return{x:i,y:a,pageX:t,pageY:e}},t.prototype.getWillChangedPage=function(t){return t=H({},t),this.loopX&&(t.pageX=this.fixedPage(t.pageX,this.pagesMatrix.pageLengthOfX-2),t.x=this.pagesMatrix.getPageStats(t.pageX+1,0).x),this.loopY&&(t.pageY=this.fixedPage(t.pageY,this.pagesMatrix.pageLengthOfY-2),t.y=this.pagesMatrix.getPageStats(0,t.pageY+1).y),t},t.prototype.fixedPage=function(t,e){for(var s=[],o=0;o<e;o++)s.push(o);return s.unshift(e-1),s.push(0),s[t]},t.prototype.getPageStats=function(){return this.pagesMatrix.getPageStats(this.currentPage.pageX,this.currentPage.pageY)},t.prototype.getValidPageIndex=function(t,e){var s=this.pagesMatrix.pageLengthOfX-1,o=this.pagesMatrix.pageLengthOfY-1,i=0,a=0;return this.loopX&&(t+=1,i+=1,s-=1),this.loopY&&(e+=1,a+=1,o-=1),t=L(t,i,s),e=L(e,a,o),{pageX:t,pageY:e}},t.prototype.nextPageIndex=function(){return this.getPageIndexByDirection("positive")},t.prototype.prevPageIndex=function(){return this.getPageIndexByDirection("negative")},t.prototype.getNearestPage=function(t,e){var s=this.pagesMatrix.getNearestPageIndex(t,e),o=s.pageX,i=s.pageY,a=this.pagesMatrix.getPageStats(o,0).x,n=this.pagesMatrix.getPageStats(0,i).y;return{x:a,y:n,pageX:o,pageY:i}},t.prototype.getPageByDirection=function(t,e,s){var o=t.pageX,i=t.pageY;o===this.currentPage.pageX&&(o=L(o+e,0,this.pagesMatrix.pageLengthOfX-1)),i===this.currentPage.pageY&&(i=L(i+s,0,this.pagesMatrix.pageLengthOfY-1));var a=this.pagesMatrix.getPageStats(o,0).x,n=this.pagesMatrix.getPageStats(0,i).y;return{x:a,y:n,pageX:o,pageY:i}},t.prototype.resetLoopPage=function(){if(this.loopX){if(0===this.currentPage.pageX)return{pageX:this.pagesMatrix.pageLengthOfX-2,pageY:this.currentPage.pageY};if(this.currentPage.pageX===this.pagesMatrix.pageLengthOfX-1)return{pageX:1,pageY:this.currentPage.pageY}}if(this.loopY){if(0===this.currentPage.pageY)return{pageX:this.currentPage.pageX,pageY:this.pagesMatrix.pageLengthOfY-2};if(this.currentPage.pageY===this.pagesMatrix.pageLengthOfY-1)return{pageX:this.currentPage.pageX,pageY:1}}},t.prototype.getPageIndexByDirection=function(t){var e=this.currentPage.pageX,s=this.currentPage.pageY;return this.slideX&&(e="negative"===t?e-1:e+1),this.slideY&&(s="negative"===t?s-1:s+1),{pageX:e,pageY:s}},t.prototype.checkSlideLoop=function(){this.wannaLoop=this.slideOptions.loop,this.pagesMatrix.pageLengthOfX>1?this.slideX=!0:this.slideX=!1,this.pagesMatrix.pages[0]&&this.pagesMatrix.pageLengthOfY>1?this.slideY=!0:this.slideY=!1,this.loopX=this.wannaLoop&&this.slideX,this.loopY=this.wannaLoop&&this.slideY,this.slideX&&this.slideY&&$("slide does not support two direction at the same time.")},t}(),ke="plugins.slide",we=[{key:"next",name:"next"},{key:"prev",name:"prev"},{key:"goToPage",name:"goToPage"},{key:"getCurrentPage",name:"getCurrentPage"},{key:"startPlay",name:"startPlay"},{key:"pausePlay",name:"pausePlay"}],_e=we.map((function(t){return{key:t.key,sourceKey:ke+"."+t.name}})),xe=function(t,e){return t.pageX===e.pageX&&t.pageY===e.pageY},Ce=function(){function t(t){this.scroll=t,this.cachedClonedPageDOM=[],this.resetLooping=!1,this.autoplayTimer=0,this.satisfyInitialization()&&this.init()}return t.prototype.satisfyInitialization=function(){return!(this.scroll.scroller.content.children.length<=0)||($("slide need at least one slide page to be initialised.please check your DOM layout."),!1)},t.prototype.init=function(){this.willChangeToPage=H({},ye),this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.createPages()},t.prototype.createPages=function(){this.pages=new be(this.scroll,this.options)},t.prototype.handleBScroll=function(){this.scroll.registerType(["slideWillChange","slidePageChanged"]),this.scroll.proxy(_e)},t.prototype.handleOptions=function(){var t=!0===this.scroll.options.slide?{}:this.scroll.options.slide,e={loop:!0,threshold:.1,speed:400,easing:gt.bounce,listenFlick:!0,autoplay:!0,interval:3e3};this.options=H(e,t)},t.prototype.handleLoop=function(t){var e=this.options.loop,s=this.scroll.scroller.content,o=s.children.length;e&&(s!==t?(this.resetLoopChangedStatus(),this.removeClonedSlidePage(t),o>1&&this.cloneFirstAndLastSlidePage(s)):3===o&&this.initialised?(this.removeClonedSlidePage(s),this.moreToOnePageInLoop=!0,this.oneToMorePagesInLoop=!1):o>1?(this.initialised&&0===this.cachedClonedPageDOM.length?(this.oneToMorePagesInLoop=!0,this.moreToOnePageInLoop=!1):(this.removeClonedSlidePage(s),this.resetLoopChangedStatus()),this.cloneFirstAndLastSlidePage(s)):this.resetLoopChangedStatus())},t.prototype.resetLoopChangedStatus=function(){this.moreToOnePageInLoop=!1,this.oneToMorePagesInLoop=!1},t.prototype.handleHooks=function(){var t=this,e=this.scroll.hooks,s=this.scroll.scroller.hooks,o=this.options.listenFlick;this.prevContent=this.scroll.scroller.content,this.hooksFn=[],this.registerHooks(this.scroll,this.scroll.eventTypes.beforeScrollStart,this.pausePlay),this.registerHooks(this.scroll,this.scroll.eventTypes.scrollEnd,this.modifyCurrentPage),this.registerHooks(this.scroll,this.scroll.eventTypes.scrollEnd,this.startPlay),this.scroll.eventTypes.mousewheelMove&&(this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelMove,(function(){return!0})),this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelEnd,(function(e){1!==e.directionX&&1!==e.directionY||t.next(),-1!==e.directionX&&-1!==e.directionY||t.prev()}))),this.registerHooks(e,e.eventTypes.refresh,this.refreshHandler),this.registerHooks(e,e.eventTypes.destroy,this.destroy),this.registerHooks(s,s.eventTypes.beforeRefresh,(function(){t.handleLoop(t.prevContent),t.setSlideInlineStyle()})),this.registerHooks(s,s.eventTypes.momentum,this.modifyScrollMetaHandler),this.registerHooks(s,s.eventTypes.scroll,this.scrollHandler),this.registerHooks(s,s.eventTypes.checkClick,this.startPlay),o&&this.registerHooks(s,s.eventTypes.flick,this.flickHandler)},t.prototype.startPlay=function(){var t=this,e=this.options,s=e.interval,o=e.autoplay;o&&(clearTimeout(this.autoplayTimer),this.autoplayTimer=window.setTimeout((function(){t.next()}),s))},t.prototype.pausePlay=function(){this.options.autoplay&&clearTimeout(this.autoplayTimer)},t.prototype.setSlideInlineStyle=function(){var t=[{direction:"scrollX",sizeType:"offsetWidth",styleType:"width"},{direction:"scrollY",sizeType:"offsetHeight",styleType:"height"}],e=this.scroll.scroller,s=e.content,o=e.wrapper,i=this.scroll.options;t.forEach((function(t){var e=t.direction,a=t.sizeType,n=t.styleType;if(i[e]){for(var r=o[a],l=s.children,c=l.length,p=0;p<c;p++){var h=l[p];h.style[n]=r+"px"}s.style[n]=r*c+"px"}}))},t.prototype.next=function(t,e){var s=this.pages.nextPageIndex(),o=s.pageX,i=s.pageY;this.goTo(o,i,t,e)},t.prototype.prev=function(t,e){var s=this.pages.prevPageIndex(),o=s.pageX,i=s.pageY;this.goTo(o,i,t,e)},t.prototype.goToPage=function(t,e,s,o){var i=this.pages.getValidPageIndex(t,e);this.goTo(i.pageX,i.pageY,s,o)},t.prototype.getCurrentPage=function(){return this.exposedPage||this.pages.getInitialPage(!0)},t.prototype.setCurrentPage=function(t){this.pages.setCurrentPage(t),this.exposedPage=this.pages.getExposedPage(t)},t.prototype.nearestPage=function(t,e){var s=this.scroll.scroller,o=s.scrollBehaviorX,i=s.scrollBehaviorY,a=o.maxScrollPos,n=o.minScrollPos,r=i.maxScrollPos,l=i.minScrollPos;return this.pages.getNearestPage(L(t,a,n),L(e,r,l))},t.prototype.satisfyThreshold=function(t,e){var s=this.scroll.scroller,o=s.scrollBehaviorX,i=s.scrollBehaviorY,a=!0;return Math.abs(t-o.absStartPos)<=this.thresholdX&&Math.abs(e-i.absStartPos)<=this.thresholdY&&(a=!1),a},t.prototype.refreshHandler=function(t){var e=this;if(this.satisfyInitialization()){this.pages.refresh(),this.computeThreshold();var s=this.contentChanged=this.prevContent!==t;s&&(this.prevContent=t);var o=this.pages.getInitialPage(!this.initialised||s||this.oneToMorePagesInLoop||this.moreToOnePageInLoop);this.initialised?this.goTo(o.pageX,o.pageY,0):this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.beforeInitialScrollTo,(function(t){e.initialised=!0,t.x=o.x,t.y=o.y})),this.startPlay()}},t.prototype.computeThreshold=function(){var t=this.options.threshold;if(t%1===0)this.thresholdX=t,this.thresholdY=t;else{var e=this.pages.getPageStats(),s=e.width,o=e.height;this.thresholdX=Math.round(s*t),this.thresholdY=Math.round(o*t)}},t.prototype.cloneFirstAndLastSlidePage=function(t){var e=t.children,s=e[e.length-1].cloneNode(!0),o=e[0].cloneNode(!0);ct(s,t),t.appendChild(o),this.cachedClonedPageDOM=[s,o]},t.prototype.removeClonedSlidePage=function(t){var e=t&&t.children||[];e.length&&this.cachedClonedPageDOM.forEach((function(e){ht(t,e)})),this.cachedClonedPageDOM=[]},t.prototype.modifyCurrentPage=function(t){var e=this.scroll.scroller;if(!e.animater.forceStopped){var s=this.getCurrentPage(),o=s.pageX,i=s.pageY,a=this.nearestPage(t.x,t.y);if(this.setCurrentPage(a),this.contentChanged)return this.contentChanged=!1,!0;var n=this.getCurrentPage(),r=n.pageX,l=n.pageY;if(this.pageWillChangeTo(a),this.oneToMorePagesInLoop)return this.oneToMorePagesInLoop=!1,!0;if(this.moreToOnePageInLoop&&0===o&&0===i)return this.moreToOnePageInLoop=!1,!0;if(o!==r||i!==l){var c=this.pages.getExposedPageByPageIndex(r,l);this.scroll.trigger(this.scroll.eventTypes.slidePageChanged,c)}if(!this.resetLooping){var p=this.pages.resetLoopPage();return p?(this.resetLooping=!0,this.goTo(p.pageX,p.pageY,0),!0):void 0}this.resetLooping=!1}},t.prototype.goTo=function(t,e,s,o){var i=this.pages.getInternalPage(t,e),a=o||this.options.easing||gt.bounce,n=i.x,r=i.y,l=n-this.scroll.scroller.scrollBehaviorX.currentPos,c=r-this.scroll.scroller.scrollBehaviorY.currentPos;(l||c)&&(s=void 0===s?this.getEaseTime(l,c):s,this.scroll.scroller.scrollTo(n,r,s,a))},t.prototype.flickHandler=function(){var t=this.scroll.scroller,e=t.scrollBehaviorX,s=t.scrollBehaviorY,o=e.currentPos,i=e.startPos,a=e.direction,n=s.currentPos,r=s.startPos,l=s.direction,c=this.pages.currentPage,p=c.pageX,h=c.pageY,u=this.getEaseTime(o-i,n-r);this.goTo(p+a,h+l,u)},t.prototype.getEaseTime=function(t,e){return this.options.speed||Math.max(Math.max(Math.min(Math.abs(t),1e3),Math.min(Math.abs(e),1e3)),300)},t.prototype.modifyScrollMetaHandler=function(t){var e=this.scroll.scroller,s=e.scrollBehaviorX,o=e.scrollBehaviorY,i=e.animater,a=t.newX,n=t.newY,r=this.satisfyThreshold(a,n)||i.forceStopped?this.pages.getPageByDirection(this.nearestPage(a,n),s.direction,o.direction):this.pages.currentPage;t.time=this.getEaseTime(t.newX-r.x,t.newY-r.y),t.newX=r.x,t.newY=r.y,t.easing=this.options.easing||gt.bounce},t.prototype.scrollHandler=function(t){var e=t.x,s=t.y;if(this.satisfyThreshold(e,s)){var o=this.nearestPage(e,s);this.pageWillChangeTo(o)}},t.prototype.pageWillChangeTo=function(t){var e=this.pages.getWillChangedPage(t);xe(this.willChangeToPage,e)||(this.willChangeToPage=e,this.scroll.trigger(this.scroll.eventTypes.slideWillChange,this.willChangeToPage))},t.prototype.registerHooks=function(t,e,s){t.on(e,s,this),this.hooksFn.push([t,e,s])},t.prototype.destroy=function(){var t=this.scroll.scroller.content,e=this.options,s=e.loop,o=e.autoplay;s&&this.removeClonedSlidePage(t),o&&clearTimeout(this.autoplayTimer),this.hooksFn.forEach((function(t){var e=t[0],s=t[1],o=t[2];e.eventTypes[s]&&e.off(s,o)})),this.hooksFn.length=0},t.pluginName="slide",t}(),Se="plugins.wheel",Te=[{key:"wheelTo",name:"wheelTo"},{key:"getSelectedIndex",name:"getSelectedIndex"},{key:"restorePosition",name:"restorePosition"}],Pe=Te.map((function(t){return{key:t.key,sourceKey:Se+"."+t.name}})),$e="wheelIndexChanged",Me={rate:4},De=function(){function t(t){this.scroll=t,this.init()}return t.prototype.init=function(){this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.refreshBoundary(),this.setSelectedIndex(this.options.selectedIndex)},t.prototype.handleBScroll=function(){this.scroll.proxy(Pe),this.scroll.registerType([$e])},t.prototype.handleOptions=function(){var t=!0===this.scroll.options.wheel?{}:this.scroll.options.wheel,e={wheelWrapperClass:"wheel-scroll",wheelItemClass:"wheel-item",rotate:25,adjustTime:400,selectedIndex:0,wheelDisabledItemClass:"wheel-disabled-item"};this.options=H(e,t)},t.prototype.handleHooks=function(){var t=this,e=this.scroll,s=this.scroll.scroller,o=s.actionsHandler,i=s.scrollBehaviorX,a=s.scrollBehaviorY,n=s.animater,r=s.content;e.on(e.eventTypes.scrollEnd,(function(e){var o=t.findNearestValidWheel(e.y).index;if(s.animater.forceStopped&&!t.isAdjustingPosition)return t.target=t.items[o],!0;t.setSelectedIndex(o),t.isAdjustingPosition&&(t.isAdjustingPosition=!1)})),this.scroll.hooks.on(this.scroll.hooks.eventTypes.refresh,(function(e){e!==r&&(r=e,t.setSelectedIndex(t.options.selectedIndex,!0)),t.rotateX(t.scroll.y),t.wheelTo(t.selectedIndex,0)})),this.scroll.hooks.on(this.scroll.hooks.eventTypes.beforeInitialScrollTo,(function(e){e.x=0,e.y=-t.selectedIndex*t.itemHeight})),s.hooks.on(s.hooks.eventTypes.checkClick,(function(){var e=dt(t.items).indexOf(t.target);return-1===e||(t.wheelTo(e,t.options.adjustTime,gt.swipe),!0)})),s.hooks.on(s.hooks.eventTypes.scrollTo,(function(e){e.y=t.findNearestValidWheel(e.y).y})),s.hooks.on(s.hooks.eventTypes.minDistanceScroll,(function(){var t=s.animater;!0===t.forceStopped&&(t.forceStopped=!1)})),s.hooks.on(s.hooks.eventTypes.scrollToElement,(function(e,s){if(!ut(e,t.options.wheelItemClass))return!0;s.top=t.findNearestValidWheel(s.top).y})),o.hooks.on(o.hooks.eventTypes.beforeStart,(function(e){t.target=e.target})),i.hooks.on(i.hooks.eventTypes.computeBoundary,(function(t){t.maxScrollPos=0,t.minScrollPos=0})),a.hooks.on(a.hooks.eventTypes.computeBoundary,(function(e){t.items=t.scroll.scroller.content.children,t.checkWheelAllDisabled(),t.itemHeight=t.items.length>0?a.contentSize/t.items.length:0,e.maxScrollPos=-t.itemHeight*(t.items.length-1),e.minScrollPos=0})),a.hooks.on(a.hooks.eventTypes.momentum,(function(e){e.rate=Me.rate,e.destination=t.findNearestValidWheel(e.destination).y})),a.hooks.on(a.hooks.eventTypes.end,(function(e){var s=t.findNearestValidWheel(a.currentPos);e.destination=s.y,e.duration=t.options.adjustTime})),n.hooks.on(n.hooks.eventTypes.time,(function(e){t.transitionDuration(e)})),n.hooks.on(n.hooks.eventTypes.timeFunction,(function(e){t.timeFunction(e)})),n.hooks.on(n.hooks.eventTypes.callStop,(function(){var e=t.findNearestValidWheel(t.scroll.y).index;t.isAdjustingPosition=!0,t.wheelTo(e,0)})),n.translater.hooks.on(n.translater.hooks.eventTypes.translate,(function(e){t.rotateX(e.y)}))},t.prototype.refreshBoundary=function(){var t=this.scroll.scroller,e=t.scrollBehaviorX,s=t.scrollBehaviorY,o=t.content;e.refresh(o),s.refresh(o)},t.prototype.setSelectedIndex=function(t,e){void 0===e&&(e=!1);var s=this.selectedIndex;this.selectedIndex=t,s===t||e||this.scroll.trigger($e,t)},t.prototype.getSelectedIndex=function(){return this.selectedIndex},t.prototype.wheelTo=function(t,e,s){void 0===t&&(t=0),void 0===e&&(e=0);var o=-t*this.itemHeight;this.scroll.scrollTo(0,o,e,s)},t.prototype.restorePosition=function(){var t=this.scroll.pending;if(t){var e=this.getSelectedIndex();this.scroll.scroller.animater.clearTimer(),this.wheelTo(e,0)}},t.prototype.transitionDuration=function(t){for(var e=0;e<this.items.length;e++)this.items[e].style[et.transitionDuration]=t+"ms"},t.prototype.timeFunction=function(t){for(var e=0;e<this.items.length;e++)this.items[e].style[et.transitionTimingFunction]=t},t.prototype.rotateX=function(t){for(var e=this.options.rotate,s=void 0===e?25:e,o=0;o<this.items.length;o++){var i=s*(t/this.itemHeight+o),a=i.toFixed(3);this.items[o].style[et.transform]="rotateX("+a+"deg)"}},t.prototype.findNearestValidWheel=function(t){t=t>0?0:t<this.scroll.maxScrollY?this.scroll.maxScrollY:t;var e=Math.abs(Math.round(-t/this.itemHeight)),s=e,o=this.items,i=this.options.wheelDisabledItemClass;while(e>=0){if(!ut(o[e],i))break;e--}if(e<0){e=s;while(e<=o.length-1){if(!ut(o[e],i))break;e++}}return e===o.length&&(e=s),{index:this.wheelItemsAllDisabled?-1:e,y:-e*this.itemHeight}},t.prototype.checkWheelAllDisabled=function(){var t=this.options.wheelDisabledItemClass,e=this.items;this.wheelItemsAllDisabled=!0;for(var s=0;s<e.length;s++)if(!ut(e[s],t)){this.wheelItemsAllDisabled=!1;break}},t.pluginName="wheel",t}(),Ee="plugins.zoom",Ye=[{key:"zoomTo",name:"zoomTo"}],Oe=Ye.map((function(t){return{key:t.key,sourceKey:Ee+"."+t.name}})),Xe=2,Be=1,He=function(){function t(t){this.scroll=t,this.scale=Be,this.prevScale=1,this.init()}return t.prototype.init=function(){this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.tryInitialZoomTo(this.zoomOpt)},t.prototype.zoomTo=function(t,e,s,o){var i=this.resolveOrigin(e,s),a=i.originX,n=i.originY,r={x:a,y:n,baseScale:this.scale};this._doZoomTo(t,r,o,!0)},t.prototype.handleBScroll=function(){this.scroll.proxy(Oe),this.scroll.registerType(["beforeZoomStart","zoomStart","zooming","zoomEnd"])},t.prototype.handleOptions=function(){var t=!0===this.scroll.options.zoom?{}:this.scroll.options.zoom,e={start:1,min:1,max:4,initialOrigin:[0,0],minimalZoomDistance:5,bounceTime:800};this.zoomOpt=H(e,t)},t.prototype.handleHooks=function(){var t=this,e=this.scroll,s=this.scroll.scroller;this.wrapper=this.scroll.scroller.wrapper,this.setTransformOrigin(this.scroll.scroller.content);var o=s.scrollBehaviorX,i=s.scrollBehaviorY;this.hooksFn=[],this.registerHooks(e.hooks,e.hooks.eventTypes.contentChanged,(function(e){t.setTransformOrigin(e),t.scale=Be,t.tryInitialZoomTo(t.zoomOpt)})),this.registerHooks(e.hooks,e.hooks.eventTypes.beforeInitialScrollTo,(function(){if(t.zoomOpt.start!==Be)return!0})),this.registerHooks(o.hooks,o.hooks.eventTypes.beforeComputeBoundary,(function(){var e=ot(t.scroll.scroller.content);o.contentSize=Math.floor(e.width*t.scale)})),this.registerHooks(i.hooks,i.hooks.eventTypes.beforeComputeBoundary,(function(){var e=ot(t.scroll.scroller.content);i.contentSize=Math.floor(e.height*t.scale)})),this.registerHooks(s.actions.hooks,s.actions.hooks.eventTypes.start,(function(e){var s=e.touches&&e.touches.length||0;t.fingersOperation(s),s===Xe&&t.zoomStart(e)})),this.registerHooks(s.actions.hooks,s.actions.hooks.eventTypes.beforeMove,(function(e){var s=e.touches&&e.touches.length||0;if(t.fingersOperation(s),s===Xe)return t.zoom(e),!0})),this.registerHooks(s.actions.hooks,s.actions.hooks.eventTypes.beforeEnd,(function(e){var s=t.fingersOperation();if(s===Xe)return t.zoomEnd(),!0})),this.registerHooks(s.translater.hooks,s.translater.hooks.eventTypes.beforeTranslate,(function(e,s){var o=s.scale?s.scale:t.prevScale;t.prevScale=o,e.push("scale("+o+")")})),this.registerHooks(s.hooks,s.hooks.eventTypes.scrollEnd,(function(){t.fingersOperation()===Xe&&t.scroll.trigger(t.scroll.eventTypes.zoomEnd,{scale:t.scale})})),this.registerHooks(this.scroll.hooks,"destroy",this.destroy)},t.prototype.setTransformOrigin=function(t){t.style[et.transformOrigin]="0 0"},t.prototype.tryInitialZoomTo=function(t){var e=t.start,s=t.initialOrigin,o=this.scroll.scroller,i=o.scrollBehaviorX,a=o.scrollBehaviorY;e!==Be&&(this.resetBoundaries([i,a]),this.zoomTo(e,s[0],s[1],0))},t.prototype.fingersOperation=function(t){if("number"!==typeof t)return this.numberOfFingers;this.numberOfFingers=t},t.prototype._doZoomTo=function(t,e,s,o){var i=this;void 0===s&&(s=this.zoomOpt.bounceTime),void 0===o&&(o=!1);var a=this.zoomOpt,n=a.min,r=a.max,l=this.scale,c=L(t,n,r);(function(){if(0!==s){if(s>0){var t,e=B(),o=e+s,a=function(){var n=B();if(n>=o)return i.scroll.trigger(i.scroll.eventTypes.zooming,{scale:c}),void kt(t);var r=gt.bounce.fn((n-e)/s),p=r*(c-l)+l;i.scroll.trigger(i.scroll.eventTypes.zooming,{scale:p}),t=bt(a)};a()}}else i.scroll.trigger(i.scroll.eventTypes.zooming,{scale:c})})(),this.fingersOperation(2),this._zoomTo(c,l,e,s,o)},t.prototype._zoomTo=function(t,e,s,o,i){void 0===i&&(i=!1);var a=t/s.baseScale;this.setScale(t);var n=this.scroll.scroller,r=n.scrollBehaviorX,l=n.scrollBehaviorY;this.resetBoundaries([r,l]);var c=this.getNewPos(s.x,a,r,!0,i),p=this.getNewPos(s.y,a,l,!0,i);r.currentPos===Math.round(c)&&l.currentPos===Math.round(p)&&t===e||n.scrollTo(c,p,o,gt.bounce,{start:{scale:e},end:{scale:t}})},t.prototype.resolveOrigin=function(t,e){var s=this.scroll.scroller,o=s.scrollBehaviorX,i=s.scrollBehaviorY,a={left:function(){return 0},top:function(){return 0},right:function(){return o.contentSize},bottom:function(){return i.contentSize},center:function(t){var e=0===t?o.contentSize:i.contentSize;return e/2}};return{originX:"number"===typeof t?t:a[t](0),originY:"number"===typeof e?e:a[e](1)}},t.prototype.zoomStart=function(t){var e=t.touches[0],s=t.touches[1];this.startDistance=this.getFingerDistance(t),this.startScale=this.scale;var o=V(this.wrapper),i=o.left,a=o.top;this.origin={x:Math.abs(e.pageX+s.pageX)/2+i-this.scroll.x,y:Math.abs(e.pageY+s.pageY)/2+a-this.scroll.y,baseScale:this.startScale},this.scroll.trigger(this.scroll.eventTypes.beforeZoomStart)},t.prototype.zoom=function(t){var e=this.getFingerDistance(t);if(this.zoomed||!(Math.abs(e-this.startDistance)<this.zoomOpt.minimalZoomDistance)){var s=this.dampingScale(e/this.startDistance*this.startScale),o=s/this.startScale;this.setScale(s),this.zoomed||(this.zoomed=!0,this.scroll.trigger(this.scroll.eventTypes.zoomStart));var i=this.scroll.scroller,a=i.scrollBehaviorX,n=i.scrollBehaviorY,r=this.getNewPos(this.origin.x,o,a,!1,!1),l=this.getNewPos(this.origin.y,o,n,!1,!1);this.scroll.trigger(this.scroll.eventTypes.zooming,{scale:this.scale}),i.translater.translate({x:r,y:l,scale:s})}},t.prototype.zoomEnd=function(){this.zoomed&&(this.shouldRebound()?this._doZoomTo(this.scale,this.origin,this.zoomOpt.bounceTime):this.scroll.trigger(this.scroll.eventTypes.zoomEnd,{scale:this.scale}))},t.prototype.getFingerDistance=function(t){var e=t.touches[0],s=t.touches[1],o=Math.abs(e.pageX-s.pageX),i=Math.abs(e.pageY-s.pageY);return I(o,i)},t.prototype.shouldRebound=function(){var t=this.zoomOpt,e=t.min,s=t.max,o=this.scale;if(o!==L(o,e,s))return!0;var i=this.scroll.scroller,a=i.scrollBehaviorX,n=i.scrollBehaviorY;this.resetBoundaries([a,n]);var r=a.checkInBoundary().inBoundary,l=a.checkInBoundary().inBoundary;return!(r&&l)},t.prototype.dampingScale=function(t){var e=this.zoomOpt,s=e.min,o=e.max;return t<s?t=.5*s*Math.pow(2,t/s):t>o&&(t=2*o*Math.pow(.5,o/t)),t},t.prototype.setScale=function(t){this.scale=t},t.prototype.resetBoundaries=function(t){t.forEach((function(t){return t.computeBoundary()}))},t.prototype.getNewPos=function(t,e,s,o,i){void 0===i&&(i=!1);var a=t-t*e+(i?s.currentPos:s.startPos);return o&&(a=L(a,s.maxScrollPos,s.minScrollPos)),a>0?Math.floor(a):Math.ceil(a)},t.prototype.registerHooks=function(t,e,s){t.on(e,s,this),this.hooksFn.push([t,e,s])},t.prototype.destroy=function(){this.hooksFn.forEach((function(t){var e=t[0],s=t[1],o=t[2];e.off(s,o)})),this.hooksFn.length=0},t.pluginName="zoom",t}(),ze=function(){function t(t){this.ancestors=[],this.descendants=[],this.hooksManager=[],this.analyzed=!1,this.selfScroll=t}return t.create=function(e){return new t(e)},t.prototype.hasAncestors=function(t){var e=R(this.ancestors,(function(e){var s=e[0];return s===t}));return e>-1},t.prototype.hasDescendants=function(t){var e=R(this.descendants,(function(e){var s=e[0];return s===t}));return e>-1},t.prototype.addAncestor=function(t,e){var s=this.ancestors;s.push([t,e]),s.sort((function(t,e){return t[1]-e[1]}))},t.prototype.addDescendant=function(t,e){var s=this.descendants;s.push([t,e]),s.sort((function(t,e){return t[1]-e[1]}))},t.prototype.removeAncestor=function(t){var e=this.ancestors;if(e.length){var s=R(this.ancestors,(function(e){var s=e[0];return s===t}));if(s>-1)return e.splice(s,1)}},t.prototype.removeDescendant=function(t){var e=this.descendants;if(e.length){var s=R(this.descendants,(function(e){var s=e[0];return s===t}));if(s>-1)return e.splice(s,1)}},t.prototype.registerHooks=function(t,e,s){t.on(e,s),this.hooksManager.push([t,e,s])},t.prototype.setAnalyzed=function(t){void 0===t&&(t=!1),this.analyzed=t},t.prototype.purge=function(){var t=this;this.ancestors.forEach((function(e){var s=e[0];s.removeDescendant(t)})),this.descendants.forEach((function(e){var s=e[0];s.removeAncestor(t)})),this.hooksManager.forEach((function(t){var e=t[0],s=t[1],o=t[2];e.off(s,o)})),this.hooksManager=[]},t}(),Ie="plugins.nestedScroll",Le=[{key:"purgeNestedScroll",name:"purgeNestedScroll"}],Re=Le.map((function(t){return{key:t.key,sourceKey:Ie+"."+t.name}})),Fe="INTERNAL_NESTED_SCROLL",je=function(t){t.forEach((function(t){t.pending&&(t.stop(),t.resetPosition())}))},Ne=function(t){t.forEach((function(t){t.enable()}))},Ae=function(t,e){t.forEach((function(t){t.hasHorizontalScroll!==e.hasHorizontalScroll&&t.hasVerticalScroll!==e.hasVerticalScroll||t.disable()}))},We=function(t){t.forEach((function(t){var e=t.scroller,s=e.actions,o=e.scrollBehaviorX,i=e.scrollBehaviorY;s.fingerMoved=!0,s.contentMoved=!1,s.directionLockAction.reset(),o.start(),i.start(),o.resetStartPos(),i.resetStartPos(),s.startTime=+new Date}))},Ke=function(t){var e=t.hasHorizontalScroll,s=t.hasVerticalScroll,o=t.x,i=t.y,a=t.minScrollX,n=t.maxScrollX,r=t.minScrollY,l=t.maxScrollY,c=t.movingDirectionX,p=t.movingDirectionY,h=!1,u=o>=a&&-1===c,d=o<=n&&1===c,m=i>=r&&-1===p,g=i<=l&&1===p;return s?h=m||g:e&&(h=u||d),h},Ue=function(t){var e=t.hasHorizontalScroll,s=t.hasVerticalScroll,o=t.x,i=t.y,a=t.minScrollX,n=t.maxScrollX,r=t.minScrollY,l=t.maxScrollY,c=!1,p=o>a,h=o<n,u=i>r,d=i<l;return s?c=u||d:e&&(c=p||h),c},Ve=function(t){t.scroller.reflow(),t.resetPosition(0)},qe=function(t,e){var s=0,o=t.parentNode;while(o&&o!==e)s++,o=o.parentNode;return s},Je=function(){function t(e){var s=this.handleOptions(e),o=t.instancesMap[s];return o||(o=t.instancesMap[s]=this,o.store=[],o.hooksFn=[]),o.init(e),o}return t.getAllNestedScrolls=function(){var e=t.instancesMap;return Object.keys(e).map((function(t){return e[t]}))},t.purgeAllNestedScrolls=function(){var e=t.getAllNestedScrolls();e.forEach((function(t){return t.purgeNestedScroll()}))},t.prototype.handleOptions=function(t){var e=!0===t.options.nestedScroll?{}:t.options.nestedScroll,s={groupId:Fe};this.options=H(s,e);var o=typeof this.options.groupId;return"string"!==o&&"number"!==o&&$("groupId must be string or number for NestedScroll plugin"),this.options.groupId},t.prototype.init=function(t){t.proxy(Re),this.addBScroll(t),this.buildBScrollGraph(),this.analyzeBScrollGraph(),this.ensureEventInvokeSequence(),this.handleHooks(t)},t.prototype.handleHooks=function(t){var e=this;this.registerHooks(t.hooks,t.hooks.eventTypes.destroy,(function(){e.deleteScroll(t)}))},t.prototype.deleteScroll=function(t){var e=t.wrapper;e.isBScrollContainer=void 0;var s=this.store,o=this.hooksFn,i=R(s,(function(e){return e.selfScroll===t}));if(i>-1){var a=s[i];a.purge(),s.splice(i,1)}var n=R(o,(function(e){var s=e[0];return s===t.hooks}));if(n>-1){var r=o[n],l=r[0],c=r[1],p=r[2];l.off(c,p),o.splice(n,1)}},t.prototype.addBScroll=function(t){this.store.push(ze.create(t))},t.prototype.buildBScrollGraph=function(){for(var t,e,s,o,i=this.store,a=this.store.length,n=0;n<a;n++){t=i[n],s=t.selfScroll.wrapper;for(var r=0;r<a;r++)if(e=i[r],o=e.selfScroll.wrapper,t!==e&&s.contains(o)){var l=qe(o,s);t.hasDescendants(e)||t.addDescendant(e,l),e.hasAncestors(t)||e.addAncestor(t,l)}}},t.prototype.analyzeBScrollGraph=function(){this.store.forEach((function(t){if(!t.analyzed){var e=t.ancestors,s=t.descendants,o=t.selfScroll,i=function(){var t=e.map((function(t){var e=t[0];return e.selfScroll})),i=s.map((function(t){var e=t[0];return e.selfScroll}));je(T(t,i)),Ue(o)&&Ve(o),We(t),Ae(t,o)},a=function(){var t=e.map((function(t){var e=t[0];return e.selfScroll})),o=s.map((function(t){var e=t[0];return e.selfScroll}));Ne(T(t,o))};t.registerHooks(o,o.eventTypes.beforeScrollStart,i),t.registerHooks(o,o.eventTypes.touchEnd,a);var n=o.scroller.actions.hooks;t.registerHooks(n,n.eventTypes.detectMovingDirection,(function(){var t=e.map((function(t){var e=t[0];return e.selfScroll})),s=t[0],i=t.slice(1),a=o.scroller.actions.contentMoved,n=0===t.length;if(a)Ae(t,o);else if(!n&&Ke(o))return Ae([o],o),s&&Ne([s]),Ae(i,o),!0})),t.setAnalyzed(!0)}}))},t.prototype.ensureEventInvokeSequence=function(){var t=this.store.slice(),e=t.sort((function(t,e){return t.descendants.length-e.descendants.length}));e.forEach((function(t){var e=t.selfScroll;e.scroller.actionsHandler.rebindDOMEvents()}))},t.prototype.registerHooks=function(t,e,s){t.on(e,s,this),this.hooksFn.push([t,e,s])},t.prototype.purgeNestedScroll=function(){var e=this.options.groupId;this.store.forEach((function(t){t.purge()})),this.store=[],this.hooksFn.forEach((function(t){var e=t[0],s=t[1],o=t[2];e.off(s,o)})),this.hooksFn=[],delete t.instancesMap[e]},t.pluginName="nestedScroll",t.instancesMap={},t}(),Ze=10,Ge=30,Qe=function(){function t(t,e){this.wrapperHeight=t,this.tombstoneHeight=e,this.lastDirection=1,this.lastPos=0}return t.prototype.calculate=function(t,e){var s=t-this.lastPos;this.lastPos=t;var o=this.getDirection(s),i=this.calculateIndex(0,t,e),a=this.calculateIndex(i,t+this.wrapperHeight,e);return 1===o?(i-=Ze,a+=Ge):(i-=Ge,a+=Ze),i<0&&(i=0),{start:i,end:a}},t.prototype.getDirection=function(t){var e;if(t>0)e=1;else{if(!(t<0))return this.lastDirection;e=0}return this.lastDirection=e,e},t.prototype.calculateIndex=function(t,e,s){if(e<=0)return t;var o=t,i=s[o]&&-1!==s[o].pos?s[o].pos:0,a=i,n=0;while(o<s.length&&s[o].pos<e)a=s[o].pos,o++;return o===s.length&&(n=Math.floor((e-a)/this.tombstoneHeight)),o+=n,o},t.prototype.resetState=function(){this.lastDirection=1,this.lastPos=0},t}(),ts=function(){function t(){this.data=null,this.dom=null,this.tombstone=null,this.width=0,this.height=0,this.pos=0}return t}(),es=function(){function t(t,e,s){this.fetchFn=e,this.onFetchFinish=s,this.loadedNum=0,this.fetching=!1,this.hasMore=!0,this.list=t||[]}return t.prototype.update=function(t){return C(this,void 0,void 0,(function(){var e;return S(this,(function(s){return this.hasMore||(t=Math.min(t,this.list.length)),t>this.list.length&&(e=t-this.list.length,this.addEmptyData(e)),[2,this.checkToFetch(t)]}))}))},t.prototype.add=function(t){for(var e=0;e<t.length;e++)this.list[this.loadedNum]?this.list[this.loadedNum]=x(x({},this.list[this.loadedNum]),{data:t[e]}):this.list[this.loadedNum]={data:t[e]},this.loadedNum++;return this.list},t.prototype.addEmptyData=function(t){for(var e=0;e<t;e++)this.list.push(new ts);return this.list},t.prototype.fetch=function(t){return C(this,void 0,void 0,(function(){var e;return S(this,(function(s){switch(s.label){case 0:return this.fetching?[2,[]]:(this.fetching=!0,[4,this.fetchFn(t)]);case 1:return e=s.sent(),this.fetching=!1,[2,e]}}))}))},t.prototype.checkToFetch=function(t){return C(this,void 0,void 0,(function(){var e,s,o;return S(this,(function(i){switch(i.label){case 0:return this.hasMore?t<=this.loadedNum?[2]:(e=t-this.loadedNum,[4,this.fetch(e)]):[2];case 1:return s=i.sent(),s instanceof Array&&s.length?(this.add(s),o=this.onFetchFinish(this.list,!0),[2,this.checkToFetch(o)]):("boolean"===typeof s&&!1===s&&(this.hasMore=!1,this.list.splice(this.loadedNum),this.onFetchFinish(this.list,!1)),[2])}}))}))},t.prototype.getList=function(){return this.list},t.prototype.resetState=function(){this.loadedNum=0,this.fetching=!1,this.hasMore=!0,this.list=[]},t}(),ss=function(){function t(t){this.create=t,this.cached=[],this.width=0,this.height=0,this.initialed=!1,this.getSize()}return t.isTombstone=function(t){return!(!t||!t.classList)&&t.classList.contains("tombstone")},t.prototype.getSize=function(){if(!this.initialed){var t=this.create();t.style.position="absolute",document.body.appendChild(t),t.style.display="",this.height=t.offsetHeight,this.width=t.offsetWidth,document.body.removeChild(t),this.cached.push(t)}},t.prototype.getOne=function(){var t=this.cached.pop();if(t){var e=t.style;return e.display="",e.opacity="1",e[et.transform]="",e[et.transition]="",t}return this.create()},t.prototype.recycle=function(t){for(var e=0,s=t;e<s.length;e++){var o=s[e];o.style.display="none",this.cached.push(o)}return this.cached},t.prototype.recycleOne=function(t){return this.cached.push(t),this.cached},t}(),os=200,is=function(){function t(t,e,s){this.renderFn=e,this.tombstone=s,this.unusedDom=[],this.timers=[],this.setContent(t)}return t.prototype.update=function(t,e,s){e>=t.length&&(e=t.length-1),s>t.length&&(s=t.length),this.collectUnusedDom(t,e,s),this.createDom(t,e,s),this.cacheHeight(t,e,s);var o=this.positionDom(t,e,s),i=o.startPos,a=o.startDelta,n=o.endPos;return{start:e,startPos:i,startDelta:a,end:s,endPos:n}},t.prototype.collectUnusedDom=function(t,e,s){for(var o=0;o<t.length;o++)if(o!==e){if(t[o].dom){var i=t[o].dom;ss.isTombstone(i)?(this.tombstone.recycleOne(i),i.style.display="none"):this.unusedDom.push(i),t[o].dom=null}}else o=s-1;return t},t.prototype.createDom=function(t,e,s){for(var o=e;o<s;o++){var i=t[o].dom,a=t[o].data;if(i){if(!ss.isTombstone(i)||!a)continue;t[o].tombstone=i,t[o].dom=null}i=a?this.renderFn(a,this.unusedDom.pop()):this.tombstone.getOne(),i.style.position="absolute",t[o].dom=i,t[o].pos=-1,this.content.appendChild(i)}},t.prototype.cacheHeight=function(t,e,s){for(var o=e;o<s;o++)t[o].data&&!t[o].height&&(t[o].height=t[o].dom.offsetHeight)},t.prototype.positionDom=function(t,e,s){for(var o=this,i=[],a=this.getStartPos(t,e,s),n=a.start,r=a.delta,l=n,c=e;c<s;c++){var p=t[c].tombstone;if(p){var h=p.style;h[et.transition]=q+"transform "+os+"ms, opacity "+os+"ms",h[et.transform]="translateY("+l+"px)",h.opacity="0",t[c].tombstone=null,i.push(p)}t[c].dom&&t[c].pos!==l&&(t[c].dom.style[et.transform]="translateY("+l+"px)",t[c].pos=l),l+=t[c].height||this.tombstone.height}var u=window.setTimeout((function(){o.tombstone.recycle(i)}),os);return this.timers.push(u),{startPos:n,startDelta:r,endPos:l}},t.prototype.getStartPos=function(t,e,s){if(t[e]&&-1!==t[e].pos)return{start:t[e].pos,delta:0};for(var o=-1===t[0].pos?0:t[0].pos,i=0;i<e;i++)o+=t[i].height||this.tombstone.height;var a,n=o;for(a=e;a<s;a++)if(!ss.isTombstone(t[a].dom)&&-1!==t[a].pos){o=t[a].pos;break}var r=a;if(r<s)while(r>e)o-=t[r-1].height,r--;var l=n-o;return{start:o,delta:l}},t.prototype.removeTombstone=function(){for(var t=this.content.querySelectorAll(".tombstone"),e=t.length-1;e>=0;e--)this.content.removeChild(t[e])},t.prototype.setContent=function(t){t!==this.content&&(this.content=t)},t.prototype.destroy=function(){this.removeTombstone(),this.timers.forEach((function(t){clearTimeout(t)}))},t.prototype.resetState=function(){this.destroy(),this.timers=[],this.unusedDom=[]},t}(),as=-2e3,ns=function(){function t(t){this.scroll=t,this.start=0,this.end=0,this.init()}return t.prototype.init=function(){var t=this;this.handleOptions();var e=this.options,s=e.fetch,o=e.render,i=e.createTombstone;this.tombstone=new ss(i),this.indexCalculator=new Qe(this.scroll.scroller.scrollBehaviorY.wrapperSize,this.tombstone.height),this.domManager=new is(this.scroll.scroller.content,o,this.tombstone),this.dataManager=new es([],s,this.onFetchFinish.bind(this)),this.scroll.on(this.scroll.eventTypes.destroy,this.destroy,this),this.scroll.on(this.scroll.eventTypes.scroll,this.update,this),this.scroll.on(this.scroll.eventTypes.contentChanged,(function(e){t.domManager.setContent(e),t.indexCalculator.resetState(),t.domManager.resetState(),t.dataManager.resetState(),t.update({y:0})}));var a=this.scroll.scroller.scrollBehaviorY;a.hooks.on(a.hooks.eventTypes.computeBoundary,this.modifyBoundary,this),this.update({y:0})},t.prototype.modifyBoundary=function(t){t.maxScrollPos=as},t.prototype.handleOptions=function(){var t=this.scroll.options.infinity;t&&("function"!==typeof t.fetch&&$("Infinity plugin need fetch Function to new data."),"function"!==typeof t.render&&$("Infinity plugin need render Function to render each item."),"function"!==typeof t.render&&$("Infinity plugin need createTombstone Function to create tombstone."),this.options=t),this.scroll.options.probeType=3},t.prototype.update=function(t){var e=Math.round(-t.y),s=this.indexCalculator.calculate(e,this.dataManager.getList()),o=s.start,i=s.end;this.start=o,this.end=i,this.dataManager.update(i),this.updateDom(this.dataManager.getList())},t.prototype.onFetchFinish=function(t,e){var s=this.updateDom(t).end;return e||(this.domManager.removeTombstone(),this.scroll.scroller.animater.stop(),this.scroll.resetPosition()),s},t.prototype.updateDom=function(t){var e=this.domManager.update(t,this.start,this.end),s=e.end,o=e.startPos,i=e.endPos,a=e.startDelta;return a&&(this.scroll.minScrollY=a),i>this.scroll.maxScrollY&&(this.scroll.maxScrollY=-(i-this.scroll.scroller.scrollBehaviorY.wrapperSize)),{end:s,startPos:o,endPos:i}},t.prototype.destroy=function(){var t=this.scroll.scroller,e=t.content,s=t.scrollBehaviorY;while(e.firstChild)e.removeChild(e.firstChild);this.domManager.destroy(),this.scroll.off("scroll",this.update),this.scroll.off("destroy",this.destroy),s.hooks.off(s.hooks.eventTypes.computeBoundary)},t.pluginName="infinity",t}(),rs="plugins.movable",ls=[{key:"putAt",name:"putAt"}],cs=ls.map((function(t){return{key:t.key,sourceKey:rs+"."+t.name}})),ps=function(){function t(t){this.scroll=t,this.handleBScroll(),this.handleHooks()}return t.prototype.handleBScroll=function(){this.scroll.proxy(cs)},t.prototype.handleHooks=function(){var t=this;this.hooksFn=[];var e=this.scroll.scroller,s=e.scrollBehaviorX,o=e.scrollBehaviorY,i=function(t,e){t.maxScrollPos>0&&(t.minScrollPos=e.wrapperSize-e.contentSize,t.maxScrollPos=0)};this.registerHooks(s.hooks,s.hooks.eventTypes.ignoreHasScroll,(function(){return!0})),this.registerHooks(s.hooks,s.hooks.eventTypes.computeBoundary,(function(t){i(t,s)})),this.registerHooks(o.hooks,o.hooks.eventTypes.ignoreHasScroll,(function(){return!0})),this.registerHooks(o.hooks,o.hooks.eventTypes.computeBoundary,(function(t){i(t,o)})),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.destroy,(function(){t.destroy()}))},t.prototype.putAt=function(t,e,s,o){void 0===s&&(s=this.scroll.options.bounceTime),void 0===o&&(o=gt.bounce);var i=this.resolvePostion(t,e);this.scroll.scrollTo(i.x,i.y,s,o)},t.prototype.resolvePostion=function(t,e){var s=this.scroll.scroller,o=s.scrollBehaviorX,i=s.scrollBehaviorY,a={left:function(){return 0},top:function(){return 0},right:function(){return o.minScrollPos},bottom:function(){return i.minScrollPos},center:function(t){var e=0===t?o.minScrollPos:i.minScrollPos;return e/2}};return{x:"number"===typeof t?t:a[t](0),y:"number"===typeof e?e:a[e](1)}},t.prototype.destroy=function(){this.hooksFn.forEach((function(t){var e=t[0],s=t[1],o=t[2];e.off(s,o)})),this.hooksFn.length=0},t.prototype.registerHooks=function(t,e,s){t.on(e,s,this),this.hooksFn.push([t,e,s])},t.pluginName="movable",t.applyOrder="pre",t}(),hs=function(t){return"img"===t.tagName.toLowerCase()},us=function(){function t(t){this.scroll=t,this.refreshTimer=0,this.init()}return t.prototype.init=function(){this.handleOptions(this.scroll.options.observeImage),this.bindEventsToWrapper()},t.prototype.handleOptions=function(t){void 0===t&&(t={}),t=!0===t?{}:t;var e={debounceTime:100};this.options=H(e,t)},t.prototype.bindEventsToWrapper=function(){var t=this.scroll.scroller.wrapper;this.imageLoadEventRegister=new Pt(t,[{name:"load",handler:this.load.bind(this),capture:!0}]),this.imageErrorEventRegister=new Pt(t,[{name:"error",handler:this.load.bind(this),capture:!0}])},t.prototype.load=function(t){var e=this,s=t.target,o=this.options.debounceTime;s&&hs(s)&&(0===o?this.scroll.refresh():(clearTimeout(this.refreshTimer),this.refreshTimer=window.setTimeout((function(){e.scroll.refresh()}),this.options.debounceTime)))},t.pluginName="observeImage",t}(),ds=function(t){var e={ratioX:0,ratioY:0};return t?("number"===typeof t?e.ratioX=e.ratioY=t:"object"===typeof t&&t&&(e.ratioX=t.x||0,e.ratioY=t.y||0),e):e},ms=function(t){t.preventDefault(),t.stopPropagation()},gs=function(){function t(t,e){this.scroll=t,this.options=e,this.currentPos={x:0,y:0},this.hooksFn=[],this.handleDOM(),this.handleHooks(),this.handleInteractive()}return t.prototype.handleDOM=function(){var t=this.options,e=t.relationElement,s=t.relationElementHandleElementIndex,o=void 0===s?0:s;this.wrapper=e,this.indicatorEl=this.wrapper.children[o]},t.prototype.handleHooks=function(){var t=this,e=this.scroll,s=e.hooks,o=e.scroller.translater.hooks,i=e.scroller.animater.hooks;this.registerHooks(s,s.eventTypes.refresh,this.refresh),this.registerHooks(o,o.eventTypes.translate,(function(e){t.updatePosition(e)})),this.registerHooks(i,i.eventTypes.time,this.transitionTime),this.registerHooks(i,i.eventTypes.timeFunction,this.transitionTimingFunction)},t.prototype.transitionTime=function(t){void 0===t&&(t=0),this.indicatorEl.style[et.transitionDuration]=t+"ms"},t.prototype.transitionTimingFunction=function(t){this.indicatorEl.style[et.transitionTimingFunction]=t},t.prototype.handleInteractive=function(){!1!==this.options.interactive&&this.registerEvents()},t.prototype.registerHooks=function(t,e,s){t.on(e,s,this),this.hooksFn.push([t,e,s])},t.prototype.registerEvents=function(){var t=this.scroll.options,e=t.disableMouse,s=t.disableTouch,o=[],i=[],a=[];e||(o.push({name:"mousedown",handler:this.start.bind(this)}),i.push({name:"mousemove",handler:this.move.bind(this)}),a.push({name:"mouseup",handler:this.end.bind(this)})),s||(o.push({name:"touchstart",handler:this.start.bind(this)}),i.push({name:"touchmove",handler:this.move.bind(this)}),a.push({name:"touchend",handler:this.end.bind(this)},{name:"touchcancel",handler:this.end.bind(this)})),this.startEventRegister=new Pt(this.indicatorEl,o),this.moveEventRegister=new Pt(window,i),this.endEventRegister=new Pt(window,a)},t.prototype.refresh=function(){var t=this.scroll,e=t.x,s=t.y,o=t.hasHorizontalScroll,i=t.hasVerticalScroll,a=t.maxScrollX,n=t.maxScrollY,r=ds(this.options.ratio),l=r.ratioX,c=r.ratioY,p=mt(this.wrapper),h=p.width,u=p.height,d=ot(this.indicatorEl),m=d.width,g=d.height;o&&(this.maxScrollX=h-m,this.translateXSign=this.maxScrollX>0?-1:1,this.minScrollX=0,this.ratioX=l||Math.abs(this.maxScrollX/a)),i&&(this.maxScrollY=u-g,this.translateYSign=this.maxScrollY>0?-1:1,this.minScrollY=0,this.ratioY=c||Math.abs(this.maxScrollY/n)),this.updatePosition({x:e,y:s})},t.prototype.start=function(t){if(!this.BScrollIsDisabled()){var e=t.touches?t.touches[0]:t;ms(t),this.initiated=!0,this.moved=!1,this.lastPointX=e.pageX,this.lastPointY=e.pageY,this.startTime=B(),this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.beforeScrollStart)}},t.prototype.BScrollIsDisabled=function(){return!this.scroll.enabled},t.prototype.move=function(t){if(this.initiated){var e=t.touches?t.touches[0]:t,s=e.pageX,o=e.pageY;ms(t);var i=s-this.lastPointX,a=o-this.lastPointY;if(this.lastPointX=s,this.lastPointY=o,this.moved||this.indicatorNotMoved(i,a)||(this.moved=!0,this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollStart)),this.moved){var n=this.getBScrollPosByRatio(this.currentPos,i,a);this.syncBScroll(n)}}},t.prototype.end=function(t){if(this.initiated&&(this.initiated=!1,ms(t),this.moved)){var e=this.scroll,s=e.x,o=e.y;this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollEnd,{x:s,y:o})}},t.prototype.getBScrollPosByRatio=function(t,e,s){var o=t.x,i=t.y,a=this.scroll,n=a.hasHorizontalScroll,r=a.hasVerticalScroll,l=a.minScrollX,c=a.maxScrollX,p=a.minScrollY,h=a.maxScrollY,u=this.scroll,d=u.x,m=u.y;if(n){var g=L(o+e,Math.min(this.minScrollX,this.maxScrollX),Math.max(this.minScrollX,this.maxScrollX)),v=Math.round(g/this.ratioX*this.translateXSign);d=L(v,c,l)}if(r){var f=L(i+s,Math.min(this.minScrollY,this.maxScrollY),Math.max(this.minScrollY,this.maxScrollY)),y=Math.round(f/this.ratioY*this.translateYSign);m=L(y,h,p)}return{x:d,y:m}},t.prototype.indicatorNotMoved=function(t,e){var s=this.currentPos,o=s.x,i=s.y,a=o===this.minScrollX&&t<=0||o===this.maxScrollX&&t>=0,n=i===this.minScrollY&&e<=0||i===this.maxScrollY&&e>=0;return a&&n},t.prototype.syncBScroll=function(t){var e=B(),s=this.scroll,o=s.options,i=s.scroller,a=o.probeType,n=o.momentumLimitTime;i.translater.translate(t),e-this.startTime>n&&(this.startTime=e,1===a&&i.hooks.trigger(i.hooks.eventTypes.scroll,t)),a>1&&i.hooks.trigger(i.hooks.eventTypes.scroll,t)},t.prototype.updatePosition=function(t){var e=this.getIndicatorPosByRatio(t);this.applyTransformProperty(e),this.currentPos=x({},e)},t.prototype.applyTransformProperty=function(t){var e=this.scroll.options.translateZ,s=["translateX("+t.x+"px)","translateY("+t.y+"px)",""+e];this.indicatorEl.style[et.transform]=s.join(" ")},t.prototype.getIndicatorPosByRatio=function(t){var e=t.x,s=t.y,o=this.scroll,i=o.hasHorizontalScroll,a=o.hasVerticalScroll,n=x({},this.currentPos);if(i){var r=Math.round(this.ratioX*e*this.translateXSign);n.x=L(r,Math.min(this.minScrollX,this.maxScrollX),Math.max(this.minScrollX,this.maxScrollX))}if(a){var l=Math.round(this.ratioY*s*this.translateYSign);n.y=L(l,Math.min(this.minScrollY,this.maxScrollY),Math.max(this.minScrollY,this.maxScrollY))}return n},t.prototype.destroy=function(){!1!==this.options.interactive&&(this.startEventRegister.destroy(),this.moveEventRegister.destroy(),this.endEventRegister.destroy()),this.hooksFn.forEach((function(t){var e=t[0],s=t[1],o=t[2];e.off(s,o)})),this.hooksFn.length=0},t}(),vs=function(){function t(t){this.scroll=t,this.options=[],this.indicators=[],this.handleOptions(),this.handleHooks()}return t.prototype.handleOptions=function(){var t=this.scroll.options.indicators;M(Array.isArray(t),"'indicators' must be an array.");for(var e=0,s=t;e<s.length;e++){var o=s[e];M(!!o.relationElement,"'relationElement' must be a HTMLElement."),this.createIndicators(o)}},t.prototype.createIndicators=function(t){this.indicators.push(new gs(this.scroll,t))},t.prototype.handleHooks=function(){var t=this,e=this.scroll.hooks;e.on(e.eventTypes.destroy,(function(){for(var e=0,s=t.indicators;e<s.length;e++){var o=s[e];o.destroy()}t.indicators=[]}))},t.pluginName="indicators",t}();ee.use(se).use(oe).use(le).use(de).use(ve).use(Ce).use(De).use(He).use(Je).use(ns).use(ps).use(us).use(vs);var fs=ee,ys={components:{Conserve:b},inject:["reload"],data:function(){return{props:{multiple:!0},agree:"",pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(t){t.$emit("pick",new Date)}},{text:"昨天",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"一周前",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}}]},pickerOption:{disabledDate:function(t){return t.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(t){t.$emit("pick",new Date)}},{text:"昨天",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"一周前",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}}]},data:[{name:1}],agentname:"",agentphone:"",comnumber:"",comdata:"",incidentdata:"",comname:"",comgender:"",comage:"岁",comagenumber:"",comphone:"",consulttime:"",address:"",reason:"",comgenders:[{value:"0",lable:"男"},{value:"1",lable:"女"},{value:"2",lable:"保密"}],commodes:[],commode:"",comdes:[],comde:"",relationlist:[],relation:"",comtypelist:[],comtype:"",natures:[],nature:""}},methods:{formatPhoneOnkeyUp:function(t){var e=t.replace(/\D/g,"").substring(0,11),s=e.length;return s>3&&s<8?e="".concat(e.substr(0,3)," ").concat(e.substr(3)):s>=8&&(e="".concat(e.substr(0,3)," ").concat(e.substr(3,4)," ").concat(e.substr(7))),e},changeInput:function(){var t=/^[1-9][0-9]*$/;t.test(this.num)||(this.num="")},getCascaderObj:function(){},keepform:function(){var t=this;if(""!==this.comde&&null!==this.comde&&0!==this.comde.length&&""!==this.incidentdata&&""!==this.comdata&&""!==this.comname&&""!==this.comgender&&""!==this.comagenumber&&""!==this.comphone&&""!==this.commode&&""!==this.relation&&""!==this.consulttime&&""!==this.nature&&""!==this.comtype&&""!==this.agentname&&""!==this.agentphone&&""!==this.address){var e=new Array,s=new Array;for(var o in this.comde)1==this.comde[o].length?e.push(this.comde[o][0]):2==this.comde[o].length&&s.push(this.comde[o][1]);var i=e.concat(s),a={event_number:this.comnumber,event_type:this.comtype,cause:this.reason,address:this.address,occur_time:this.incidentdata,department_id:i,create_time:this.comdata,ComplaintType:this.commode,complaint_name:this.comname,complaint_phone:this.comphone,sex:this.comgender,specific_age:1,age:this.comagenumber,inpatient_relation:this.relation,reply_time:this.consulttime,character:this.nature,handle_name:this.agentname,handle_phone:this.agentphone};console.log(a),k["a"].AddComponent(a).then((function(e){20010==e.code?(t.$message({message:e.msg,type:"success",duration:1e3}),t.reload()):20401==e.code?(t.$message({message:"请重新登陆",type:"error",duration:1e3}),t.$router.push("/login")):20403==e.code?(t.$message({message:e.msg,type:"error",duration:1e3}),t.$router.push("/dashboard")):t.$message({message:e.msg,type:"error",duration:1e3})}))}else""==this.address||null==this.address?this.$message({message:"请输入联系地址",type:"error",duration:1e3}):""==this.comde||null==this.comde?this.$message({message:"请选择投诉科室",type:"error",duration:1e3}):""==this.comdata?this.$message({message:"请选择投诉日期",type:"error",duration:1e3}):""==this.incidentdata?this.$message({message:"请选择事发日期",type:"error",duration:1e3}):""==this.comname?this.$message({message:"请输入投诉人姓名",type:"error",duration:1e3}):""==this.comgender?this.$message({message:"请输入投诉人性别",type:"error",duration:1e3}):""==this.comagenumber?this.$message({message:"请输入投诉人年龄",type:"error",duration:1e3}):""==this.comphone?this.$message({message:"请输入投诉人手机号码",type:"error",duration:1e3}):""==this.commode?this.$message({message:"请选择投诉方式",type:"error",duration:1e3}):""==this.relation?this.$message({message:"请选择与患者的关系",type:"error",duration:1e3}):""==this.consulttime?this.$message({message:"请输入答复时间",type:"error",duration:1e3}):""==this.nature?this.$message({message:"请选择事件性质",type:"error",duration:1e3}):""==this.comtype?this.$message({message:"请选择投诉类别",type:"error",duration:1e3}):""==this.agentname?this.$message({message:"请输入经办人姓名",type:"error",duration:1e3}):""==this.agentphone&&this.$message({message:"请输入经办人手机号",type:"error",duration:1e3})},backss:function(){this.reload(),sessionStorage.removeItem("add")},getRowClass:function(t){var e=t.rowIndex;return 0==e?"background:#c2c5f6;color:#000":""}},created:function(){var t=this;k["a"].AddCom().then((function(e){20010==e.code&&(t.comnumber=e.data.event_number,t.commodes=e.data.ComplaintType,t.comtypelist=e.data.event_type,t.natures=e.data.character,t.relationlist=e.data.inpatient_relation,t.comdes=e.data.department)}))},mounted:function(){new fs(".wrapper",{pullUpLoad:!0,pullDownRefresh:!0,probeType:3,mouseWheel:!0})}},bs=ys,ks=(s("ffab"),Object(c["a"])(bs,u,d,!1,null,"a304d49c",null)),ws=ks.exports,_s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[""!=t.lookdata?s("div",{staticClass:"look"},[s("div",{staticClass:"look-content"},[t._t("title",[s("div",{staticClass:"look-top"},[s("span",[t._v("投诉详情-调查中")]),s("div",[t._t("stamp",[s("el-button",{staticClass:"printing",attrs:{type:"primary",icon:"iconfont el-icon-hospital-passworddayin"},on:{click:t.stamp}},[t._v("打印调查表")])]),t._t("back",[s("el-button",{staticClass:"return",staticStyle:{border:"1px solid #949aef"},attrs:{type:"primary",icon:"iconfont el-icon-hospital-passwordai207"}},[t._v("返回")])])],2),s("div",{staticStyle:{"border-bottom":"2px solid #cccccc70",width:"100%",height:"30px"}})]),s("br"),t._v(" "),s("br"),t._v(" "),s("br"),t._v(" "),s("br"),t._v(" "),s("br"),t._v(" "),s("br")]),s("div",{attrs:{id:"aa"}},[t._t("content",[t._m(0),s("div",{staticClass:"look-content-top"},[s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",[s("span",[t._v("医院名称：")]),t._v("兰州大学第二医院")])])]),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple-light"})]),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",[s("span",[t._v("事件编号：")]),t._v(" "+t._s(t.lookdata.event_number)+" ")])])])],1),s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",[s("span",[t._v("投诉日期：")]),t._v(" "+t._s(t.lookdata.create_time)+" ")])])]),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple-light"})]),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",[s("span",[t._v("事发日期：")]),t._v(" "+t._s(t.lookdata.occur_time)+" ")])])])],1),s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",[s("span",[t._v("事件性质：")]),t._v(" "+t._s(t.lookdata.character)+" ")])])]),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple-light"})]),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",[s("span",[t._v("事件状态：")]),t._v(" "+t._s(t.lookdata.state.title)+" ")])])])],1),s("hr")],1),s("div",{staticClass:"look-content-box"},[t.lookdata.improves?s("div",t._l(t.lookdata.improves,(function(e){return s("div",{key:e.feedback_time},[s("div",{staticClass:"box-Information"},[s("div",{staticClass:"box-top"},[s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:3,push:2}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",[s("b",[t._v("科室改进")])])])]),s("el-col",{attrs:{span:3}},[s("div",{staticClass:"grid-content bg-purple-light"})]),s("el-col",{attrs:{span:9,pull:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",[s("b",[t._v("下发时间：")]),t._v(t._s(e.feedback_time))])])])],1)],1),s("div",{staticClass:"box-content clearfix"},[s("el-row",[s("el-col",{staticStyle:{"border-bottom":"1px solid #797979"},attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("参与调查科室：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",t._l(e.department,(function(e){return s("a",{key:e,staticStyle:{"margin-right":"5px","margin-left":"10px"}},[t._v(t._s(e))])})),0)])])],1)],1),t._l(e.improves,(function(e){return s("div",{key:e.department.title,staticClass:"box-content"},[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("改进科室：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(e.department.title))])])])],1),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("负责人：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[e.dutyuser?s("span",{staticClass:"value"},[t._v(t._s(e.dutyuser.name)+"/"+t._s(e.dutyuser.phone))]):s("span",{staticClass:"value"},[t._v("无")])])])],1),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("责任人：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[e.investigator_ids?s("span",{staticClass:"value"},[t._v(t._s(e.investigator_ids))]):s("span",{staticClass:"value"},[t._v("无")])])])],1),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("根因分析：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[e.examine_textone?s("span",{staticClass:"value"},[t._v(t._s(e.examine_textone))]):s("span",{staticClass:"value"},[t._v("无")])])])],1),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("责任意见：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[e.examine_texttwo?s("span",{staticClass:"value"},[t._v(t._s(e.examine_texttwo))]):s("span",{staticClass:"value"},[t._v("无")])])])],1),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("整改措施：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[e.examine_textthree?s("span",{staticClass:"value"},[t._v(t._s(e.examine_textthree))]):s("span",{staticClass:"value"},[t._v("无")])])])],1),s("div",{staticStyle:{"border-bottom":"0.5px solid #797979",width:"100%"}}),s("div",{staticClass:"file clearfix"},t._l(e.enclosure,(function(e){return s("div",{key:e.file_name},[s("span",{staticClass:"filename"},[t._v(t._s(e.file_name))]),s("span",{staticClass:"filedetaile",on:{click:function(s){return t.downfile(e)}}},[s("a",{staticClass:"downfile",staticStyle:{"text-decoration":"none",color:"#6f77e9"},attrs:{href:"#"}},[t._v("下载")])])])})),0)],1)}))],2)])})),0):t._e(),t.lookdata.investigate?s("div",t._l(t.lookdata.investigate,(function(e){return s("div",{key:e.investigate_number,staticClass:"box-contents"},[e.investigate_number?s("div",{staticClass:"box-top"},[s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:3,push:2}},[s("div",{staticClass:"grid-content bg-purple"},[e.investigate_number?s("span",[s("b",[t._v("第"+t._s(e.investigate_number)+"次调查")])]):t._e()])]),s("el-col",{attrs:{span:3}},[s("div",{staticClass:"grid-content bg-purple-light"})]),s("el-col",{attrs:{span:9,pull:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",[s("b",[t._v("下发时间：")]),t._v(t._s(e.Issue_time))])])])],1)],1):t._e(),e.investigate_number?s("div",{staticClass:"box-content clearfix"},[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("参与调查科室：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",t._l(e.department,(function(e){return s("a",{key:e,staticStyle:{"margin-right":"5px","margin-left":"10px"}},[t._v(t._s(e))])})),0)])])],1),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label",staticStyle:{"border-top":"none"}},[t._v("截止时间：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticStyle:{"border-top":"none"}},[s("a",{staticStyle:{"margin-right":"5px","margin-left":"10px","border-top":"none"}},[t._v(t._s(e.end_time))])])])])],1)],1):t._e(),e.investigate_number?s("div",[t._l(e.investigate,(function(e){return s("div",{key:e.improvement_number},[s("div",{staticClass:"box-content-child clearfix"},[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("调查科室：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(e.department.title))])])])],1),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("负责人：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[e.dutyuser?s("span",{staticClass:"value"},[t._v(t._s(e.dutyuser.name)+"/"+t._s(e.dutyuser.phone))]):s("span",{staticClass:"value"},[t._v("无")])])])],1),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("当事员工：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[e.investigator_ids?s("span",{staticClass:"value"},[t._v(t._s(e.investigator_ids))]):s("span",{staticClass:"value"},[t._v("无")])])])],1),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("反馈时间：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[e.feedback_time?s("span",{staticClass:"value"},[t._v(t._s(e.feedback_time))]):s("span",{staticClass:"value",staticStyle:{color:"red"}},[t._v("未反馈")])])])],1),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("诊疗经过：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[e.diagnose_feedback?s("span",{staticClass:"value"},[t._v(t._s(e.diagnose_feedback))]):s("span",{staticClass:"value"},[t._v("无")])])])],1),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("针对性答复：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[e.event_reply?s("span",{staticClass:"value"},[t._v(t._s(e.event_reply))]):s("span",{staticClass:"value"},[t._v("无")])])])],1),s("div",{staticStyle:{"border-bottom":"0.5px solid #797979",width:"100%"}}),e.enclosure?s("div",{staticClass:"file clearfix"},t._l(e.enclosure,(function(e){return s("div",{key:e.file_name},[s("span",{staticClass:"filename"},[t._v(t._s(e.file_name))]),s("span",{staticClass:"filedetaile",on:{click:function(s){return t.downfile(e)}}},[s("a",{staticClass:"downfile",staticStyle:{"text-decoration":"none",color:"#6f77e9"},attrs:{href:"#"}},[t._v("下载")])])])})),0):t._e()],1)])})),s("hr")],2):t._e(),e.examine?s("div",t._l(e.examine,(function(e){return s("div",{key:e.id,staticClass:"box-Information"},[s("div",{staticClass:"box-top"},[s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:3,push:2}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",[s("b",[t._v(t._s(e.event_state.title))])])])]),s("el-col",{attrs:{span:3}},[s("div",{staticClass:"grid-content bg-purple-light"})]),s("el-col",{attrs:{span:9,pull:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",[s("b",[t._v("操作时间：")]),t._v(t._s(e.examine_time))])])])],1)],1),s("div",{staticClass:"box-content"},[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("审批部门：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(e.department.title))])])])],1),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("负责人：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[e.user?s("span",{staticClass:"value"},[t._v(t._s(e.user.name)+"/"+t._s(e.user.phone))]):s("span",{staticClass:"value"},[t._v("无")])])])],1),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("状态修改：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(e.event_state_before.title)+"→"+t._s(e.event_state.title)+" ")])])])],1),3==e.event_state.state_val?s("div",[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("抄送部门：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[e.department_ids?s("span",{staticClass:"value"},[t._v(t._s(e.department_ids))]):s("span",{staticClass:"value"},[t._v("无")])])])],1),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("主要事实：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(e.examine_textone?e.examine_textone:"无"))])])])],1),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("争议焦点：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(e.examine_texttwo?e.examine_texttwo:"无"))])])])],1)],1):t._e(),4==e.event_state.state_val?s("div",[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("初步意见：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(e.examine_textone?e.examine_textone:"无"))])])])],1)],1):t._e(),5==e.event_state.state_val||6==e.event_state.state_val||7==e.event_state.state_val||8==e.event_state.state_val||9==e.event_state.state_val||10==e.event_state.state_val?s("div",[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("约定日期：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(e.appointment_time?e.appointment_time:"无"))])])])],1),6==e.event_state.state_val||10==e.event_state.state_val?s("div",[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("情况说明：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(e.examine_textone?e.examine_textone:"无"))])])])],1)],1):t._e(),7==e.event_state.state_val?s("div",[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("处理意见：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(e.examine_textone?e.examine_textone:"无"))])])])],1)],1):t._e(),8==e.event_state.state_val||9==e.event_state.state_val?s("div",[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("事实及理由：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(e.examine_textone?e.examine_textone:"无"))])])])],1)],1):t._e(),11==e.event_state.state_val?s("div",[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("下发调查科室：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v("无")])])])],1)],1):t._e()],1):t._e(),14==e.event_state.state_val?s("div",[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label look-texaeras"},[t._v("处理意见：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value look-texaeras"},[t._v(t._s(e.examine_textone?e.examine_textone:"无"))])])])],1),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label look-texaeras"},[t._v("管理措施：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value look-texaeras"},[t._v(t._s(e.examine_texttwo?e.examine_texttwo:"无"))])])])],1)],1):t._e(),20==e.event_state.state_val?s("div",[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("责任科室：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(e.responsibility_did?e.responsibility_did:"无"))])])])],1),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("投诉类别：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(e.event_type?e.event_type:"无"))])])])],1),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("责任度：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(e.responsibility_how?e.responsibility_how:"无"))])])])],1),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label look-texaerasss"},[t._v("直接经济损失：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value look-texaerasss"},[t._v(t._s(e.examine_textone?e.examine_textone:"无"))])])])],1),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label look-texaerasss"},[t._v("处理意见：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value look-texaerasss"},[t._v(t._s(e.examine_texttwo?e.examine_texttwo:"无"))])])])],1)],1):t._e(),-2==e.event_state.state_val?s("div",[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label look-texaerasss"},[t._v("退回原因：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value look-texaerasss"},[t._v(t._s(e.examine_textone?e.examine_textone:"无"))])])])],1)],1):t._e(),-1==e.event_state.state_val?s("div",[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label look-texaerasss"},[t._v("退回原因：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value look-texaerasss"},[t._v(t._s(e.examine_textone?e.examine_textone:"无"))])])])],1)],1):t._e(),s("div",{staticStyle:{"border-bottom":"0.5px solid #797979",width:"100%"}}),e.enclosure?s("div",{staticClass:"file clearfix"},t._l(e.enclosure,(function(e){return s("div",{key:e.file_name},[s("span",{staticClass:"filename"},[t._v(t._s(e.file_name))]),s("span",{staticClass:"filedetaile",on:{click:function(s){return t.downfile(e)}}},[s("a",{staticClass:"downfile",staticStyle:{"text-decoration":"none",color:"#6f77e9"},attrs:{href:"#"}},[t._v("下载")])])])})),0):t._e()],1),s("hr")])})),0):t._e()])})),0):t._e(),s("div",{staticClass:"box-Information"},[s("div",{staticClass:"box-top"},[s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:3,push:2}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",[s("b",[t._v("投诉人信息")])])])])],1)],1),s("div",{staticClass:"box-content"},[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("投诉人姓名：")])])]),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(t.lookdata.complaint_name))])])]),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"}),s("span",{staticClass:"label"},[t._v("性别：")])]),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(t.lookdata.sex))])])]),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"}),s("span",{staticClass:"label"},[t._v("年龄：")])]),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(t.lookdata.age)+t._s(t.lookdata.specific_age))])])])],1),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"}),s("span",{staticClass:"label"},[t._v("投诉方式：")])]),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(t.lookdata.complaint_type.title))])])]),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("与患者关系：")])])]),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple-light"},[null!==t.lookdata.inpatientrelation&&""!==t.lookdata.inpatientrelation?s("span",{staticClass:"value"},[t._v(t._s(t.lookdata.inpatientrelation.title))]):s("span",{staticClass:"value"},[t._v("无")])])]),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"}),s("span",{staticClass:"label"},[t._v("答复协商日期：")])]),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple-light"},[null!==t.lookdata.reply_time&&""!==t.lookdata.reply_time?s("span",{staticClass:"value"},[t._v(t._s(t.lookdata.reply_time)+"日")]):null==t.lookdata.reply_time||""==t.lookdata.reply_time?s("span",{staticClass:"value"},[t._v(t._s(t.lookdata.reply_time)+"日")]):t._e()])])],1),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("经办人信息：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[t.lookdata.handle_name?s("span",{staticClass:"value"},[t._v(t._s(t.lookdata.handle_name)+"/"+t._s(t.lookdata.handle_phone))]):s("span",{staticClass:"value"},[t._v("无")])])])],1),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("投诉科室：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(t.lookdata.department_id))])])])],1),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("投诉类别：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[t.lookdata.event_type?s("span",{staticClass:"value"},[t._v(t._s(t.lookdata.event_type))]):s("span",{staticClass:"value"},[t._v("无")])])])],1),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label look-texaeras"},[t._v("投诉原因：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[t.lookdata.cause?s("span",{staticClass:"value look-texaeras"},[t._v(t._s(t.lookdata.cause))]):s("span",{staticClass:"value look-texaeras"},[t._v("无")])])])],1),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label look-texaeras"},[t._v("联系地址：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[t.lookdata.address?s("span",{staticClass:"value look-texaeras"},[t._v(t._s(t.lookdata.address))]):s("span",{staticClass:"value look-texaeras"},[t._v("无")])])])],1),s("div",{staticStyle:{"border-bottom":"0.5px solid #797979",width:"100%","margin-bottom":"20px"}})],1),s("hr")]),""!==t.lookdata.patient&&null!==t.lookdata.patient?s("div",t._l(t.lookdata.patient,(function(e){return s("div",{key:e.age,staticClass:"box-Information"},[s("div",{staticClass:"box-top"},[s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:3,push:2}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",[s("b",[t._v("患者信息")])])])])],1)],1),s("div",{staticClass:"box-content"},[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("投诉人姓名：")])])]),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(e.name))])])]),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"}),s("span",{staticClass:"label"},[t._v("性别：")])]),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(e.sex))])])]),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"}),s("span",{staticClass:"label"},[t._v("年龄：")])]),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(e.age))])])])],1),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("医保类型：")])])]),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(e.医保))])])]),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"}),s("span",{staticClass:"label"},[t._v("手机：")])]),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(e.手机号))])])]),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"}),s("span",{staticClass:"label"},[t._v("最新就诊日期：")])]),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(e.就诊日期))])])])],1),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("所在病区：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(e.病房))])])])],1),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("所在病房：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(e.病房))])])])],1),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label look-texaeras"},[t._v("诊断信息：")])])]),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value look-texaeras"},[t._v(t._s(e.诊断信息))])])])],1),s("div",{staticStyle:{"border-bottom":"0.5px solid #797979",width:"100%","margin-bottom":"20px"}})],1)])})),0):t._e()])])],2)],2)]):t._e()])},xs=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"look-content-title"},[s("span",[t._v("投诉事件调查表")])])}],Cs={props:{lookdata:""},components:{},data:function(){return{}},methods:{stamp:function(){this.getPdf("aa","投诉事件调查表")},downfile:function(t){console.log(t);var e={id:t.id};k["a"].filedown(e).then((function(t){console.log(t);var e=t.data.file_name;console.log(e);var s=document.createElement("a");s.style.display="none",s.href="http://bt1.wlqqlp.com:8082/"+t.data.fileurl,s.click()}))}},created:function(){}},Ss=Cs,Ts=(s("43f4"),Object(c["a"])(Ss,_s,xs,!1,null,"16d05b3b",null)),Ps=Ts.exports,$s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"Complaints-screen clearfix"},[s("el-form",{attrs:{"label-width":"80px"}},[s("el-form-item",{attrs:{label:"投诉人"}},[s("el-input",{attrs:{placeholder:"请输入投诉人姓名",type:"input",max:10,maxlength:10,clearable:""},model:{value:t.complaintname,callback:function(e){t.complaintname=e},expression:"complaintname"}})],1),s("el-form-item",{attrs:{label:"投诉方式"}},[s("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.complainttype,callback:function(e){t.complainttype=e},expression:"complainttype"}},t._l(t.options,(function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)],1),s("el-form-item",{attrs:{label:"事件状态"}},[s("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.complaintstatus,callback:function(e){t.complaintstatus=e},expression:"complaintstatus"}},t._l(t.option,(function(t){return s("el-option",{key:t.state_val,attrs:{label:t.title,value:t.state_val}})})),1)],1),s("el-form-item",{attrs:{label:"投诉日期"}},[s("el-date-picker",{staticStyle:{width:"200%"},attrs:{"picker-options":t.pickerOptions,type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.complaintsate,callback:function(e){t.complaintsate=e},expression:"complaintsate"}})],1)],1),s("el-button",{staticClass:"search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.search}})],1),s("div",{staticClass:"Complaints-content"},[s("el-table",{staticStyle:{width:"94%","margin-left":"3%","text-align":"center"},attrs:{"max-height":"548",data:t.tableData,"header-cell-style":t.getRowClass}},[s("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),s("el-table-column",{attrs:{prop:"event_number",width:"150",label:"事件编码"}}),s("el-table-column",{attrs:{prop:"complaint_name",label:"投诉人姓名"}}),s("el-table-column",{attrs:{prop:"sex",label:"性别"}}),s("el-table-column",{attrs:{prop:"age",label:"年龄/岁"}}),s("el-table-column",{attrs:{prop:"complaint_phone",width:"110",label:"手机号码"}}),s("el-table-column",{attrs:{prop:"department",label:"投诉科室","show-overflow-tooltip":!0}}),s("el-table-column",{attrs:{prop:"complaint_type.title",label:"投诉方式","show-overflow-tooltip":!0}}),s("el-table-column",{attrs:{prop:"create_time",label:"投诉时间"}}),s("el-table-column",{attrs:{prop:"pass_names","show-overflow-tooltip":!0,label:"流转部门"}}),s("el-table-column",{attrs:{prop:"state.title",width:"110",label:"事件状态","show-overflow-tooltip":!0}}),t._t("column",[s("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"text",size:"small"}},[t._v("查看")]),s("el-button",{attrs:{type:"text",size:"small"}},[t._v("医患记录")]),s("el-button",{attrs:{type:"text",size:"small"}},[t._v("操作")])]}}])})])],2)],1),s("div",{staticClass:"Complaints-footer"},[s("el-pagination",{attrs:{"current-page":t.currentPage4,"page-sizes":t.numberlist,"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},Ms=[],Ds=(s("841c"),s("c1df"),{components:{},data:function(){return{options:[{value:"1",label:"2"}],option:[{value:"1",label:"2"}],pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}},complaintname:"",complainttype:"",complaintstatus:"",complaintsate:"",tableData:[],numberlist:[8,10,20],currentPage4:1,total:100,number:8}},methods:{search:function(){var t=this;if(console.log(this.number,this.currentPage4,this.complaintname,this.complainttype,this.complaintstatus,this.complaintsate),""!==this.complaintsate&&null!==this.complaintsate||""!==this.complaintname||""!==this.complainttype||""!==this.complaintstatus)if(""!==this.complaintsate&&null!==this.complaintsate){var e=new Date(this.complaintsate[0]).getTime(),s=new Date(this.complaintsate[1]).getTime();k["a"].search(this.number,this.currentPage4,this.complaintname,this.complainttype,this.complaintstatus,e,s).then((function(e){console.log(e),20010==e.code?(t.tableData=e.data[0],t.total=e.data[1].count,t.currentPage4=e.data[1].current,sessionStorage.setItem("tableData",JSON.stringify(t.tableData))):20401==e.code?(t.$message({message:"请重新登陆",type:"error",duration:1e3}),t.$router.push("/login")):20403==e.code?(t.$message({message:e.msg,type:"error",duration:1e3}),t.$router.push("/dashboard")):t.$message({message:e.msg,type:"error",duration:1e3})}))}else k["a"].search(this.number,this.currentPage4,this.complaintname,this.complainttype,this.complaintstatus,"","").then((function(e){console.log(e),20010==e.code?(t.tableData=e.data[0],t.total=e.data[1].count,t.currentPage4=e.data[1].current,sessionStorage.setItem("tableData",JSON.stringify(t.tableData))):20401==e.code?(t.$message({message:"请重新登陆",type:"error",duration:1e3}),t.$router.push("/login")):20403==e.code?(t.$message({message:e.msg,type:"error",duration:1e3}),t.$router.push("/dashboard")):t.$message({message:e.msg,type:"error",duration:1e3})}));else k["a"].ComList(this.number,this.currentPage4).then((function(e){20010==e.code?(t.tableData=e.data[0],t.total=e.data[1].count,t.currentPage4=e.data[1].current,sessionStorage.setItem("tableData",JSON.stringify(t.tableData))):20401==e.code?(t.$message({message:"请重新登陆",type:"error",duration:1e3}),t.$router.push("/login")):20403==e.code?(t.$message({message:e.msg,type:"error",duration:1e3}),t.$router.push("/dashboard")):t.$message({message:e.msg,type:"error",duration:1e3})}))},handleSizeChange:function(t){var e=this;if(this.number=t,""!==this.complaintsate&&null!==this.complaintsate||""!==this.complaintname||""!==this.complainttype||""!==this.complaintstatus)if(""!==this.complaintsate&&null!==this.complaintsate){var s=new Date(this.complaintsate[0]).getTime(),o=new Date(this.complaintsate[1]).getTime();k["a"].search(this.number,this.currentPage4,this.complaintname,this.complainttype,this.complaintstatus,s,o).then((function(t){console.log(t),20010==t.code?(e.tableData=t.data[0],e.total=t.data[1].count,e.currentPage4=t.data[1].current,sessionStorage.setItem("tableData",JSON.stringify(e.tableData))):20401==t.code?(e.$message({message:"请重新登陆",type:"error",duration:1e3}),e.$router.push("/login")):20403==t.code?(e.$message({message:t.msg,type:"error",duration:1e3}),e.$router.push("/dashboard")):e.$message({message:t.msg,type:"error",duration:1e3})}))}else k["a"].search(this.number,this.currentPage4,this.complaintname,this.complainttype,this.complaintstatus,"","").then((function(t){console.log(t),20010==t.code?(e.tableData=t.data[0],e.total=t.data[1].count,e.currentPage4=t.data[1].current,sessionStorage.setItem("tableData",JSON.stringify(e.tableData))):20401==t.code?(e.$message({message:"请重新登陆",type:"error",duration:1e3}),e.$router.push("/login")):20403==t.code?(e.$message({message:t.msg,type:"error",duration:1e3}),e.$router.push("/dashboard")):e.$message({message:t.msg,type:"error",duration:1e3})}));else k["a"].ComList(this.number,this.currentPage4).then((function(t){20010==t.code?(e.tableData=t.data[0],e.total=t.data[1].count,e.currentPage4=t.data[1].current,sessionStorage.setItem("tableData",JSON.stringify(e.tableData))):20401==t.code?(e.$message({message:"请重新登陆",type:"error",duration:1e3}),e.$router.push("/login")):20403==t.code?(e.$message({message:t.msg,type:"error",duration:1e3}),e.$router.push("/dashboard")):e.$message({message:t.msg,type:"error",duration:1e3})}))},handleCurrentChange:function(t){var e=this;if(this.currentPage4=t,""!==this.complaintsate&&null!==this.complaintsate||""!==this.complaintname||""!==this.complainttype||""!==this.complaintstatus)if(""!==this.complaintsate&&null!==this.complaintsate){var s=new Date(this.complaintsate[0]).getTime(),o=new Date(this.complaintsate[1]).getTime();k["a"].search(this.number,this.currentPage4,this.complaintname,this.complainttype,this.complaintstatus,s,o).then((function(t){console.log(t),20010==t.code?(e.tableData=t.data[0],e.total=t.data[1].count,e.currentPage4=t.data[1].current,sessionStorage.setItem("tableData",JSON.stringify(e.tableData))):20401==t.code?(e.$message({message:"请重新登陆",type:"error",duration:1e3}),e.$router.push("/login")):20403==t.code?(e.$message({message:t.msg,type:"error",duration:1e3}),e.$router.push("/dashboard")):e.$message({message:t.msg,type:"error",duration:1e3})}))}else k["a"].search(this.number,this.currentPage4,this.complaintname,this.complainttype,this.complaintstatus,"","").then((function(t){console.log(t),(t.code=20010)?(e.tableData=t.data[0],e.total=t.data[1].count,e.currentPage4=t.data[1].current,sessionStorage.setItem("tableData",JSON.stringify(e.tableData))):20401==t.code?(e.$message({message:"请重新登陆",type:"error",duration:1e3}),e.$router.push("/login")):20403==t.code?(e.$message({message:t.msg,type:"error",duration:1e3}),e.$router.push("/dashboard")):e.$message({message:t.msg,type:"error",duration:1e3})}));else k["a"].ComList(this.number,this.currentPage4).then((function(t){console.log(t),20010==t.code?(e.tableData=t.data[0],e.total=t.data[1].count,e.currentPage4=t.data[1].current,sessionStorage.setItem("tableData",JSON.stringify(e.tableData))):20401==t.code?(e.$message({message:"请重新登陆",type:"error",duration:1e3}),e.$router.push("/login")):20403==t.code?(e.$message({message:t.msg,type:"error",duration:1e3}),e.$router.push("/dashboard")):e.$message({message:t.msg,type:"error",duration:1e3})}))},handle:function(t){console.log(t)},getRowClass:function(t){var e=t.rowIndex;return 0==e?"background:#c2c5f6;color:#000":""}},created:function(){var t=this;k["a"].ComList(this.number,this.currentPage4).then((function(e){20010==e.code?(t.tableData=e.data[0],t.total=e.data[1].count,t.currentPage4=e.data[1].current,t.options=e.data[2].ComplaintType,t.option=e.data[2].state,sessionStorage.setItem("tableData",JSON.stringify(t.tableData))):20403==e.code?(t.$message({message:e.msg,type:"error",duration:1e3}),t.$router.push("/dashboard")):20401==e.code?(t.$message({message:"请重新登陆",type:"error",duration:1e3}),t.$router.push("/login")):t.$message({message:"请求错误",type:"error",duration:1e3})}))}}),Es=Ds,Ys=(s("4e8a"),Object(c["a"])(Es,$s,Ms,!1,null,"7cf44611",null)),Os=Ys.exports,Xs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[""!=t.operationdata&&""!=t.opdata?s("div",{staticClass:"operation",staticStyle:{"min-height":"800px"}},[s("div",{staticClass:"operation-top"},[s("span",[t._v("操作")]),s("div",[t._t("records",[s("el-button",{staticClass:"records",attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.records}},[t._v("医患记录")])]),t._t("detail",[s("el-button",{staticClass:"detail",attrs:{slot:"reference",type:"primary",icon:"el-icon-s-order"},on:{click:function(e){t.drawer=!0}},slot:"reference"},[t._v("投诉详情")])]),t._t("back",[s("el-button",{staticClass:"return",staticStyle:{border:"1px solid #949aef"},attrs:{type:"primary",icon:"iconfont el-icon-hospital-passwordai207"}},[t._v("返回")])])],2)]),t._t("drawerss",[s("el-drawer",{attrs:{title:"快捷查看",visible:t.drawer,"with-header":!1,size:"60%"},on:{"update:visible":function(e){t.drawer=e}}},[s("ul",{staticClass:"infinite-list",staticStyle:{overflow:"auto",height:"870px","texr-aligin":"center"}},[s("Look",{staticStyle:{width:"100%"}},[s("div",{attrs:{slot:"title"},slot:"title"})])],1)])]),s("div",{staticClass:"operation-content"},[s("div",{staticClass:"box-Information"},[s("div",{staticClass:"box-top"},[s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:7,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",[s("b",[t._v("基本信息")])])])])],1)],1),s("div",{staticClass:"box-content"},[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("事件编号：")])])]),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(t.opdata[0].event_number))])])]),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"}),s("span",{staticClass:"label"},[t._v("事件状态：")])]),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(t.opdata[0].state.title))])])]),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"}),s("span",{staticClass:"label"},[t._v("投诉科室：")])]),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(t.opdata[0].department_id))])])])],1),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("投诉人姓名：")])])]),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(t.opdata[0].complaint_name))])])]),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"}),s("span",{staticClass:"label"},[t._v("性别：")])]),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(t.opdata[0].sex))])])]),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"}),s("span",{staticClass:"label"},[t._v("年龄：")])]),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",{staticClass:"value"},[t._v(t._s(t.opdata[0].age)+t._s(t.opdata[0].specific_age))])])])],1),s("div",{staticStyle:{"border-bottom":"0.5px solid #e0e2fa",width:"100%","margin-bottom":"20px"}})],1)]),1==t.operationdata.state.state_val||11==t.operationdata.state.state_val?s("div",{staticClass:"box-feedback"},[s("div",{staticClass:"box-top"},[s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:7,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"feedback-title"},[s("b",[t._v("科室反馈")])])])])],1)],1),s("div",{staticClass:"feedback-content"},[s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.operationdata.state.state_val,expression:"operationdata.state.state_val == 1"}]},[s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:6,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("当事员工:")]),s("el-select",{attrs:{multiple:"",placeholder:"请选择",clearable:""},model:{value:t.peopel,callback:function(e){t.peopel=e},expression:"peopel"}},t._l(t.opdata[1].user,(function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)])],1),s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:20,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("诊疗经过:")]),s("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请填写",maxlength:"200"},model:{value:t.treatment,callback:function(e){t.treatment=e},expression:"treatment"}})],1)])],1),s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:20,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("针对性答复:")]),s("el-input",{attrs:{type:"textarea",maxlength:"200",placeholder:"请填写",autosize:{minRows:2,maxRows:4}},model:{value:t.response,callback:function(e){t.response=e},expression:"response"}})],1)])],1),s("div",[s("el-row",{staticClass:"row-bg",staticStyle:{margin:"20px 0"},attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:15,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("附件信息:")])])]),s("el-col",{attrs:{span:2,pull:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("el-button",{staticStyle:{"background-color":"#666ee8",border:"none"},attrs:{type:"primary",icon:"el-icon-circle-plus"},on:{click:function(e){return t.upfile()}}},[t._v("上传附件")])],1)])],1),s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:22,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.fileList,"header-cell-style":t.getRowClass}},[s("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),s("el-table-column",{attrs:{prop:"file_name",label:"文件名",width:"width"}}),s("el-table-column",{attrs:{prop:"represent",label:"描述",width:"width"}}),s("el-table-column",{attrs:{prop:"username.name",label:"提交人",width:"width"}}),s("el-table-column",{attrs:{prop:"create_time",label:"上传时间",width:"width"}}),s("el-table-column",{attrs:{prop:"file_size",label:"文件大小",width:"width"}}),s("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._t("fileoper",[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){return t.handleRemove(e.row)}}},[t._v("删除")])])]}}],null,!0)})],1)],1)])],1)],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:11==t.operationdata.state.state_val,expression:"operationdata.state.state_val == 11"}]},[s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:6,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("选择责任人:")]),s("el-select",{attrs:{multiple:"",placeholder:"请选择",clearable:""},model:{value:t.peopel,callback:function(e){t.peopel=e},expression:"peopel"}},t._l(t.opdata[1].user,(function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)])],1),s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:20,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("根因分析:")]),s("el-input",{attrs:{type:"textarea",maxlength:"200",placeholder:"请填写",autosize:{minRows:2,maxRows:4}},model:{value:t.analysis,callback:function(e){t.analysis=e},expression:"analysis"}})],1)])],1),s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:20,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("责任意见:")]),s("el-input",{attrs:{type:"textarea",placeholder:"请填写",maxlength:"200",autosize:{minRows:2,maxRows:4}},model:{value:t.responsibility,callback:function(e){t.responsibility=e},expression:"responsibility"}})],1)])],1),s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:20,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("整改措施:")]),s("el-input",{attrs:{type:"textarea",maxlength:"200",placeholder:"请填写",autosize:{minRows:2,maxRows:4}},model:{value:t.measures,callback:function(e){t.measures=e},expression:"measures"}})],1)])],1),s("div",[s("el-row",{staticClass:"row-bg",staticStyle:{margin:"20px 0"},attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:15,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("附件信息:")])])]),s("el-col",{attrs:{span:2,pull:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("el-button",{staticStyle:{"background-color":"#666ee8",border:"none"},attrs:{type:"primary",icon:"el-icon-circle-plus"},on:{click:function(e){return t.upfile()}}},[t._v("上传附件")])],1)])],1),s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:22,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.fileList,"header-cell-style":t.getRowClass}},[s("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),s("el-table-column",{attrs:{prop:"file_name",label:"文件名",width:"width"}}),s("el-table-column",{attrs:{prop:"represent",label:"描述",width:"width"}}),s("el-table-column",{attrs:{prop:"username.name",label:"提交人",width:"width"}}),s("el-table-column",{attrs:{prop:"create_time",label:"上传时间",width:"width"}}),s("el-table-column",{attrs:{prop:"file_size",label:"文件大小",width:"width"}}),s("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._t("fileoper",[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){return t.handleRemove(e.row)}}},[t._v("删除")])])]}}],null,!0)})],1)],1)])],1)],1)],1)])]):t._e(),1!==t.operationdata.state.state_val&&11!==t.operationdata.state.state_val?s("div",{staticClass:"box-feedback"},[s("div",{staticClass:"box-top"},[s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:7,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"feedback-title"},[s("b",[t._v("审批操作")])])])])],1)],1),s("div",{staticClass:"feedback-content"},[s("div",[s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:6,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("审批操作:")]),s("el-select",{attrs:{placeholder:"请选择事件状态",clearable:""},on:{change:t.changestate},model:{value:t.checkstate,callback:function(e){t.checkstate=e},expression:"checkstate"}},t._l(t.opdata[1].examine,(function(t){return s("el-option",{key:t.state_val,attrs:{label:t.title,value:t.state_val}})})),1)],1)])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:-2==t.checkstate,expression:"checkstate == -2"}]},[s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:20,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("退回原因:")]),s("el-input",{attrs:{type:"textarea",placeholder:"请填写",maxlength:"200",autosize:{minRows:2,maxRows:4}},model:{value:t.preliminary,callback:function(e){t.preliminary=e},expression:"preliminary"}})],1)])],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:-1==t.checkstate,expression:"checkstate == -1"}]},[s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:20,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("驳回原因:")]),s("el-input",{attrs:{type:"textarea",placeholder:"请填写",maxlength:"200",autosize:{minRows:2,maxRows:4}},model:{value:t.preliminary,callback:function(e){t.preliminary=e},expression:"preliminary"}})],1)])],1)],1),1==t.checkstate?s("div",[s("el-row",{staticClass:"row-bg",staticStyle:{"margin-top":"10px"},attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:6,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("选择下发科室:")]),s("br"),s("el-cascader",{ref:"cascader",staticStyle:{"margin-left":"10px"},attrs:{options:t.opdata[1].department,props:{value:"id",label:"title",children:"_child",multiple:"true"},"show-all-levels":!1,clearable:"","collapse-tags":""},model:{value:t.comde,callback:function(e){t.comde=e},expression:"comde"}})],1)])],1),s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:6,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("截止时间:")]),s("br"),s("el-date-picker",{staticStyle:{"margin-left":"10px"},attrs:{"picker-options":t.pickerOptions,type:"date",placeholder:"选择日期","value-format":"timestamp"},model:{value:t.needtime,callback:function(e){t.needtime=e},expression:"needtime"}})],1)])],1)],1):t._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:3==t.checkstate,expression:"checkstate == 3"}]},[s("el-row",{staticClass:"row-bg",staticStyle:{"margin-top":"20px"},attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:6,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("选择抄送部门:")]),s("br"),s("el-cascader",{ref:"cascader",staticStyle:{"margin-left":"10px"},attrs:{options:t.opdata[1].department,props:{value:"id",label:"title",children:"_child",multiple:"true"},"show-all-levels":!1,"collapse-tags":"",clearable:""},model:{value:t.comde,callback:function(e){t.comde=e},expression:"comde"}})],1)])],1),s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:20,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("主要事实:")]),s("el-input",{attrs:{type:"textarea",placeholder:"请填写",maxlength:"200",autosize:{minRows:2,maxRows:4}},model:{value:t.facts,callback:function(e){t.facts=e},expression:"facts"}})],1)])],1),s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:20,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("争议焦点:")]),s("el-input",{attrs:{type:"textarea",maxlength:"200",placeholder:"请填写",autosize:{minRows:2,maxRows:4}},model:{value:t.focus,callback:function(e){t.focus=e},expression:"focus"}})],1)])],1)],1),4==t.checkstate||5==t.checkstate||6==t.checkstate||7==t.checkstate||8==t.checkstate||9==t.checkstate||10==t.checkstate?s("div",[4!==t.checkstate?s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:6,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("约定日期:")]),s("br"),s("el-date-picker",{staticStyle:{"margin-left":"10px"},attrs:{"picker-options":t.pickerOptions,type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"timestamp"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)])],1):t._e(),4==t.checkstate||6==t.checkstate||7==t.checkstate||8==t.checkstate||9==t.checkstate||10==t.checkstate?s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:20,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{directives:[{name:"show",rawName:"v-show",value:4==t.checkstate,expression:"checkstate == 4"}],staticClass:"label"},[t._v("初步意见:")]),s("span",{directives:[{name:"show",rawName:"v-show",value:6==t.checkstate||10==t.checkstate,expression:"checkstate == 6 || checkstate == 10"}],staticClass:"label"},[t._v("情况说明:")]),s("span",{directives:[{name:"show",rawName:"v-show",value:7==t.checkstate,expression:"checkstate == 7"}],staticClass:"label"},[t._v("处理意见:")]),s("span",{directives:[{name:"show",rawName:"v-show",value:8==t.checkstate||9==t.checkstate,expression:"checkstate == 8 || checkstate == 9"}],staticClass:"label"},[t._v("事实及理由:")]),s("el-input",{attrs:{type:"textarea",maxlength:"200",placeholder:"请填写",autosize:{minRows:2,maxRows:4}},model:{value:t.preliminary,callback:function(e){t.preliminary=e},expression:"preliminary"}})],1)])],1):t._e()],1):t._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:11==t.checkstate,expression:"checkstate == 11"}]},[s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:6,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("选择下发科室:")]),s("br"),s("el-cascader",{ref:"cascader",staticStyle:{"margin-left":"10px"},attrs:{options:t.opdata[1].department,props:{value:"id",label:"title",children:"_child",multiple:"true"},"show-all-levels":!1,"collapse-tags":"",clearabl:""},model:{value:t.comde,callback:function(e){t.comde=e},expression:"comde"}})],1)])],1)],1),14==t.checkstate?s("div",[s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:20,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("处理意见:")]),s("el-input",{attrs:{type:"textarea",maxlength:"200",placeholder:"请填写",autosize:{minRows:2,maxRows:4}},model:{value:t.preliminary,callback:function(e){t.preliminary=e},expression:"preliminary"}})],1)])],1),s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:20,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("管理措施:")]),s("el-input",{attrs:{type:"textarea",maxlength:"200",placeholder:"请填写",autosize:{minRows:2,maxRows:4}},model:{value:t.management,callback:function(e){t.management=e},expression:"management"}})],1)])],1)],1):t._e(),20==t.checkstate?s("div",[s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:6,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("选择责任科室:")]),s("br"),s("el-cascader",{ref:"cascader",staticStyle:{"margin-left":"10px"},attrs:{options:t.opdata[1].department,props:{value:"id",label:"title",children:"_child",multiple:"true"},"show-all-levels":!1,"collapse-tags":"",clearable:""},model:{value:t.comde,callback:function(e){t.comde=e},expression:"comde"}})],1)])],1),s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:6,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("投诉类别:")]),s("br"),s("el-cascader",{ref:"cascader",staticStyle:{"margin-left":"10px"},attrs:{placeholder:"请选择投诉类别",options:t.opdata[1].event_type,props:{value:"id",label:"title",multiple:"true"},"show-all-levels":!1,clearabl:""},model:{value:t.eventtype,callback:function(e){t.eventtype=e},expression:"eventtype"}})],1)])],1),s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:6,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("选择责任度:")]),s("br"),s("el-cascader",{ref:"cascader",staticStyle:{"margin-left":"10px"},attrs:{placeholder:"请选择责任度",options:t.accountabilitylist,props:{value:"id",label:"title",multiple:"true"},"show-all-levels":!1,clearable:""},model:{value:t.accountability,callback:function(e){t.accountability=e},expression:"accountability"}})],1)])],1),s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:20,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("直接经济损失:")]),s("el-input",{attrs:{type:"textarea",placeholder:"请填写",maxlength:"200",autosize:{minRows:2,maxRows:4}},model:{value:t.economic,callback:function(e){t.economic=e},expression:"economic"}})],1)])],1),s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:20,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("处理意见:")]),s("el-input",{attrs:{type:"textarea",maxlength:"200",placeholder:"请填写",autosize:{minRows:2,maxRows:4}},model:{value:t.preliminary,callback:function(e){t.preliminary=e},expression:"preliminary"}})],1)])],1)],1):t._e()],1),-1==t.checkstate||-2==t.checkstate||1==t.checkstate?s("div",{staticClass:"box-feedback"},[s("div",{staticClass:"box-top"},[s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:7,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"feedback-title"},[s("b",[t._v("经办人信息")])])])])],1)],1),s("div",{staticClass:"feedback-content"},[s("el-row",{staticClass:"row-bg",staticStyle:{"margin-left":"10px"},attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:10,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("经办人姓名:")]),s("el-input",{attrs:{type:"input",maxlength:"3",placeholder:"请填写",autosize:""},model:{value:t.agentname,callback:function(e){t.agentname=e},expression:"agentname"}})],1)])],1),s("el-row",{staticClass:"row-bg",staticStyle:{"margin-left":"10px"},attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:10,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("经办人联系电话:")]),s("el-input",{attrs:{type:"input",placeholder:"请填写",maxlength:"11",oninput:"value=value.replace(/[^\\d]/g,'')",onkeypress:"return( /[\\d]/.test(String.fromCharCode(event.keyCode) ) )",autosize:""},model:{value:t.agentphone,callback:function(e){t.agentphone=e},expression:"agentphone"}})],1)])],1)],1)]):t._e(),3==t.checkstate||5==t.checkstate||6==t.checkstate||8==t.checkstate||9==t.checkstate||10==t.checkstate||12==t.checkstate||14==t.checkstate?s("div",[s("el-row",{staticClass:"row-bg",staticStyle:{margin:"20px 0"},attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:15,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"label"},[t._v("附件信息:")])])]),s("el-col",{attrs:{span:2,pull:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("el-button",{staticStyle:{"background-color":"#666ee8",border:"none"},attrs:{type:"primary",icon:"el-icon-circle-plus"},on:{click:function(e){return t.upfile()}}},[t._v("上传附件")])],1)])],1),s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:22,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.fileList,"header-cell-style":t.getRowClass}},[s("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),s("el-table-column",{attrs:{prop:"file_name",label:"文件名",width:"width"}}),s("el-table-column",{attrs:{prop:"represent",label:"描述",width:"width"}}),s("el-table-column",{attrs:{prop:"username.name",label:"提交人",width:"width"}}),s("el-table-column",{attrs:{prop:"create_time",label:"上传时间",width:"width"}}),s("el-table-column",{attrs:{prop:"file_size",label:"文件大小",width:"width"}}),s("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._t("fileoper",[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){return t.handleRemove(e.row)}}},[t._v("删除")])])]}}],null,!0)})],1)],1)])],1)],1):t._e()])]):t._e(),s("div",{staticClass:"box-button"},[t._t("submit",[s("el-button",{directives:[{name:"show",rawName:"v-show",value:-2!==t.checkstate&&-1!==t.checkstate&&11!==t.checkstate&&1!==t.checkstate||11==t.operationdata.state.state_val,expression:"checkstate !== -2 && checkstate !== -1&&checkstate !== 11&&checkstate !== 1||operationdata.state.state_val==11"}],attrs:{type:"primary",icon:"el-icon-finished"},on:{click:function(e){return t.submit()}}},[t._v("确认提交")]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:11==t.checkstate||1==t.checkstate,expression:"checkstate == 11 || checkstate == 1"}],attrs:{type:"primary"},on:{click:function(e){return t.issuesss()}}},[t._v("下发")]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:-2==t.checkstate,expression:"checkstate == -2"}],attrs:{type:"primary"},on:{click:function(e){return t.send()}}},[t._v("退回")]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:-1==t.checkstate,expression:"checkstate == -1"}],attrs:{type:"primary"},on:{click:function(e){return t.reject()}}},[t._v("驳回")])])],2)]),s("div",{staticClass:"upfile"},[s("el-dialog",{staticStyle:{"margin-top":"8%"},attrs:{title:"上传文件",visible:t.upfiles,width:"30%","before-close":t.Close},on:{"update:visible":function(e){t.upfiles=e}}},[s("el-form",{ref:"form",attrs:{"label-width":"90px"}},[s("el-form-item",{attrs:{label:"文件标题："}},[s("el-input",{attrs:{placeholder:"请输入文件标题"},model:{value:t.filetitle,callback:function(e){t.filetitle=e},expression:"filetitle"}})],1),s("el-form-item",{attrs:{label:"文件描述："}},[s("el-input",{staticStyle:{"max-heiht":"100px"},attrs:{type:"textarea",maxlength:"50",placeholder:"请输入文件描述",autosize:{minRows:2,maxRows:2}},model:{value:t.filedescribe,callback:function(e){t.filedescribe=e},expression:"filedescribe"}})],1),s("el-form-item",{staticClass:"uploadfile",attrs:{label:"上传附件："}},[s("el-upload",{staticClass:"upload-demo",attrs:{action:"http://bt1.wlqqlp.com:8082/index.php/api/srk/create_base64_file",limit:1,disabled:""==t.filetitle||""==t.filedescribe,multiple:!1,"file-list":t.listsss,"on-change":t.handleChange,"on-exceed":t.exceed,"auto-upload":!1}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary",disabled:""==t.filetitle||""==t.filedescribe},slot:"trigger"},[t._v("选取文件")]),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("一次只能上传一个文件，且不超过5MB")])],1)],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:t.Close}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary",disabled:""==t.filetitle||""==t.filedescribe},on:{click:t.upfilesubmit}},[t._v("确 定")])],1)],1)],1)],2):t._e()])},Bs=[],Hs=s("4328"),zs=s.n(Hs),Is={inject:["reload"],props:{operationdata:{},opdata:{}},components:{Look:Ps},data:function(){return{pickerOptions:{disabledDate:function(t){return t.getTime()<=Date.now()-864e5},shortcuts:[{text:"今天",onClick:function(t){t.$emit("pick",new Date)}},{text:"明天",onClick:function(t){var e=new Date;e.setTime(e.getTime()+864e5),t.$emit("pick",e)}},{text:"三天后",onClick:function(t){var e=new Date;e.setTime(e.getTime()+2592e5),t.$emit("pick",e)}},{text:"一周后",onClick:function(t){var e=new Date;e.setTime(e.getTime()+6048e5),t.$emit("pick",e)}}]},dis:!1,upfiledatas:{},upfilesss:!1,economic:"",management:"",eventtype:"",accountability:"",accountabilitylist:[{id:1,title:"一级"},{id:2,title:"二级"},{id:3,title:"三级"}],comde:"",date:"",liable:"",liablelist:[],agentname:"",agentphone:"",treatment:"",response:"",needtime:"",issue:"",issuelist:[],facts:"",focus:"",analysis:"",responsibility:"",measures:"",preliminary:"",checkstate:"",statelist:[],drawer:!1,uploadfile:"",filedescribe:"",form:"",filetitle:"",upfiles:!1,dialogVisibless:!1,reason:"",peopel:"",options:[{value:"1",lable:"终止"}],fileList:[],base64file:"",file:{},listsss:[]}},methods:{records:function(){this.$router.push({path:"/Connect",query:{event_number:this.$parent.opdata[0].event_number}})},Close:function(){this.listsss=[],this.upfiles=!1,this.upfilesss=!1,this.filedescribe="",this.filetitle="",this.file={}},exceed:function(){this.$message({message:"单次只能上传一个文件",type:"error",duration:1e3})},handleRemove:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){k["a"].deletes(t.id).then((function(t){if(20010==t.code)if(e.$message({message:t.msg,type:"success",duration:1e3}),1==e.$parent.opdata[0].state.state_val||11==e.$parent.opdata[0].state.state_val)if(1==e.$parent.opdata[0].state.state_val){var s={event_number:e.$parent.opdata[0].event_number,state:2};k["a"].truefilelist(s).then((function(t){e.fileList=t.data}))}else{var o={event_number:e.$parent.opdata[0].event_number,state:12};k["a"].truefilelist(o).then((function(t){e.fileList=t.data}))}else{var i={event_number:e.$parent.opdata[0].event_number,state:e.checkstate};k["a"].truefilelist(i).then((function(t){e.fileList=t.data}))}else 20401==t.code?(e.$message({message:"请重新登陆",type:"error",duration:1e3}),e.$router.push("/login")):20403==t.code?(e.$message({message:t.msg,type:"error",duration:1e3}),e.$router.push("/dashboard")):e.$message({message:t.msg,type:"error",duration:1e3})}))}))["catch"]((function(){e.$message({type:"info",message:"已取消删除"})}))},upfilesubmit:function(){var t=this;this.getBase64(this.file.raw).then((function(e){if(1==t.$parent.opdata[0].state.state_val||11==t.$parent.opdata[0].state.state_val)if(1==t.$parent.opdata[0].state.state_val){var s={event_number:t.$parent.opdata[0].event_number,base64_file:e,file_name:t.filetitle,represent:t.filedescribe,adress:"Complaintprocess/event_base64_uploadfiles"};k["a"].uploadfilebase(s).then((function(e){if(20010==e.code){t.$message({message:"上传附件成功",type:"success",duration:1e3});var s={event_number:t.$parent.opdata[0].event_number,state:2};k["a"].truefilelist(s).then((function(e){t.fileList=e.data,t.listsss=[],t.upfiles=!1,t.upfilesss=!0,t.filedescribe="",t.filetitle="",t.file={}}))}else 20401==e.code?(t.$message({message:"请重新登陆",type:"error",duration:1e3}),t.$router.push("/login")):20403==e.code?(t.$message({message:e.msg,type:"error",duration:1e3}),t.$router.push("/dashboard")):t.$message({message:e.msg,type:"error",duration:1e3})}))}else{var o={event_number:t.$parent.opdata[0].event_number,base64_file:e,file_name:t.filetitle,represent:t.filedescribe,adress:"Complaintprocess/event_base64_uploadfiles",state:12};k["a"].uploadfilebase(o).then((function(e){if(20010==e.code){t.$message({message:"上传附件成功",type:"success",duration:1e3}),t.listsss=[],t.upfiles=!1,t.upfilesss=!0,t.filedescribe="",t.filetitle="",t.file={};var s={event_number:t.$parent.opdata[0].event_number,state:12};k["a"].truefilelist(s).then((function(e){t.fileList=e.data}))}else 20401==e.code?(t.$message({message:"请重新登陆",type:"error",duration:1e3}),t.$router.push("/login")):20403==e.code?(t.$message({message:e.msg,type:"error",duration:1e3}),t.$router.push("/dashboard")):t.$message({message:e.msg,type:"error",duration:1e3})}))}else{var i={event_number:t.$parent.opdata[0].event_number,base64_file:e,file_name:t.filetitle,represent:t.filedescribe,adress:"Complaintprocess/event_base64_uploadfiles",state:t.checkstate};k["a"].uploadfilebase(i).then((function(e){if(20010==e.code){t.$message({message:e.msg,type:"success",duration:1e3}),t.listsss=[],t.upfiles=!1,t.upfilesss=!0,t.filedescribe="",t.filetitle="",t.file={};var s={event_number:t.$parent.opdata[0].event_number,state:t.checkstate};k["a"].truefilelist(s).then((function(e){t.fileList=e.data}))}else 20401==e.code?(t.$message({message:"请重新登陆",type:"error",duration:1e3}),t.$router.push("/login")):20403==e.code?(t.$message({message:e.msg,type:"error",duration:1e3}),t.$router.push("/dashboard")):t.$message({message:e.msg,type:"error",duration:1e3})}))}}))},changestate:function(){var t=this;this.economic="",this.management="",this.eventtype="",this.accountability="",this.comde="",this.date="",this.liable="",this.agentname="",this.agentphone="",this.treatment="",this.response="",this.needtime="",this.issue="",this.facts="",this.focus="",this.analysis="",this.responsibility="",this.measures="",this.preliminary="",this.peopel="";var e={event_number:this.$parent.opdata[0].event_number,state:this.checkstate};k["a"].truefilelist(e).then((function(e){t.fileList=e.data}))},getBase64:function(t){return new Promise((function(e,s){var o=new FileReader,i="";o.readAsDataURL(t),o.onload=function(){i=o.result},o.onerror=function(t){s(t)},o.onloadend=function(){e(i)}}))},handleChange:function(t,e){this.file=e[0]},issuesss:function(){var t=this;if(console.log(this.comde),""!==this.comde&&null!==this.comde&&""!==this.needtime){if(this.comde.length>3)this.$message({message:"最多下发四个科室",type:"error",duration:1e3});else if(1==this.checkstate){var e=new Array,s=new Array;for(var o in this.comde)1==this.comde[o].length?e.push(this.comde[o][0]):2==this.comde[o].length&&s.push(this.comde[o][1]);var i=e.concat(s),a={event_number:this.$parent.opdata[0].event_number,department_ids:i,reply_time:this.needtime,handle_name:this.agentname,handle_phone:this.agentphone};k["a"].Issuedepartment(a).then((function(e){20010==e.code?(t.$message({message:e.msg,type:"success",duration:1e3}),t.reload()):20401==e.code?(t.$message({message:"请重新登陆",type:"error",duration:1e3}),t.$router.push("/login")):20403==e.code?(t.$message({message:e.msg,type:"error",duration:1e3}),t.$router.push("/dashboard")):t.$message({message:e.msg,type:"error",duration:1e3})}))}else if(11==this.checkstate){var n=new Array,r=new Array;for(var l in this.comde)1==this.comde[l].length?n.push(this.comde[l][0]):2==this.comde[l].length&&r.push(this.comde[l][1]);var c=n.concat(r),p={event_number:this.$parent.opdata[0].event_number,department_ids:c};k["a"].ImproveDepartment(p).then((function(e){20010==e.code?(t.$message({message:e.msg,type:"success",duration:1e3}),t.reload()):20401==e.code?(t.$message({message:"请重新登陆",type:"error",duration:1e3}),t.$router.push("/login")):20403==e.code?(t.$message({message:e.msg,type:"error",duration:1e3}),t.$router.push("/dashboard")):t.$message({message:e.msg,type:"error",duration:1e3})}))}}else""==this.comde||null==this.comde?this.$message({message:"请选择下发科室",type:"error",duration:1e3}):""!=this.needtime&&null!=this.needtime||this.$message({message:"请选择截止日期",type:"error",duration:1e3})},submit:function(){var t=this;if(1==this.$parent.opdata[0].state.state_val){var e={event_number:this.$parent.opdata[0].event_number,investigator_ids:this.peopel,diagnose_feedback:this.treatment,event_reply:this.response};k["a"].departmentsubmit(e).then((function(e){20010==e.code?(t.$message({message:e.msg,type:"success",duration:1e3}),t.reload()):20401==e.code?(t.$message({message:"请重新登陆",type:"error",duration:1e3}),t.$router.push("/login")):20403==e.code?(t.$message({message:e.msg,type:"error",duration:1e3}),t.$router.push("/dashboard")):t.$message({message:e.msg,type:"error",duration:1e3})}))}else if(3==this.checkstate)if(""!==this.comde&&null!==this.comde&&""!==this.facts&&""!==this.focus){var s=new Array,o=new Array;for(var i in this.comde)1==this.comde[i].length?s.push(this.comde[i][0]):2==this.comde[i].length&&o.push(this.comde[i][1]);var a=s.concat(o),n={event_number:this.$parent.opdata[0].event_number,copy_department:a,examine_textone:this.facts,examine_texttwo:this.focus};k["a"].discussion(n).then((function(e){20010==e.code?(t.$message({message:e.msg,type:"success",duration:1e3}),t.reload()):20401==e.code?(t.$message({message:"请重新登陆",type:"error",duration:1e3}),t.$router.push("/login")):20403==e.code?(t.$message({message:e.msg,type:"error",duration:1e3}),t.$router.push("/dashboard")):t.$message({message:e.msg,type:"error",duration:1e3})}))}else this.$message({message:"请完善信息",type:"error",duration:1e3});else if(14==this.checkstate){var r={event_number:this.$parent.opdata[0].event_number,examine_textone:this.preliminary,examine_texttwo:this.management};k["a"].ImprovementEnd(r).then((function(e){console.log(e),20010==e.code?(t.$message({message:e.msg,type:"success",duration:1e3}),t.$router.go(0)):20401==e.code?(t.$message({message:"请重新登陆",type:"error",duration:1e3}),t.$router.push("/login")):20403==e.code&&(t.$message({message:e.msg,type:"error",duration:1e3}),t.$router.push("/dashboard"))}))}else if(4==this.checkstate){var l={event_number:this.$parent.opdata[0].event_number,examine_textone:this.preliminary};k["a"].communicate(l).then((function(e){20010==e.code?(t.$message({message:e.msg,type:"success",duration:1e3}),t.reload()):20401==e.code?(t.$message({message:"请重新登陆",type:"error",duration:1e3}),t.$router.push("/login")):20403==e.code?(t.$message({message:e.msg,type:"error",duration:1e3}),t.$router.push("/dashboard")):t.$message({message:e.msg,type:"error",duration:1e3})}))}else if(5==this.checkstate)if(""==this.date||null==this.date)this.$message({message:"请选择约定时间",type:"error",duration:1e3});else{var c={event_number:this.$parent.opdata[0].event_number,appointment_time:this.date};k["a"].mediate(c).then((function(e){20010==e.code?(t.$message({message:e.msg,type:"success",duration:1e3}),t.reload()):20401==e.code?(t.$message({message:"请重新登陆",type:"error",duration:1e3}),t.$router.push("/login")):20403==e.code?(t.$message({message:e.msg,type:"error",duration:1e3}),t.$router.push("/dashboard")):t.$message({message:e.msg,type:"error",duration:1e3})}))}else if(6==this.checkstate)if(""==this.date||null==this.date)this.$message({message:"请选择约定时间",type:"error",duration:1e3});else{var p={event_number:this.$parent.opdata[0].event_number,examine_textone:this.preliminary,appointment_time:this.date};k["a"].appraisal(p).then((function(e){20010==e.code?(t.$message({message:e.msg,type:"success",duration:1e3}),t.reload()):20401==e.code?(t.$message({message:"请重新登陆",type:"error",duration:1e3}),t.$router.push("/login")):20403==e.code?(t.$message({message:e.msg,type:"error",duration:1e3}),t.$router.push("/dashboard")):t.$message({message:e.msg,type:"error",duration:1e3})}))}else if(7==this.checkstate)if(""==this.date||null==this.date)this.$message({message:"请选择约定时间",type:"error",duration:1e3});else{var h={event_number:this.$parent.opdata[0].event_number,examine_textone:this.preliminary,appointment_time:this.date};k["a"].delay(h).then((function(e){20010==e.code?(t.$message({message:e.msg,type:"success",duration:1e3}),t.reload()):20401==e.code?(t.$message({message:"请重新登陆",type:"error",duration:1e3}),t.$router.push("/login")):20403==e.code?(t.$message({message:e.msg,type:"error",duration:1e3}),t.$router.push("/dashboard")):t.$message({message:e.msg,type:"error",duration:1e3})}))}else if(8==this.checkstate)if(""==this.date||null==this.date)this.$message({message:"请选择约定时间",type:"error",duration:1e3});else{var u={event_number:this.$parent.opdata[0].event_number,examine_textone:this.preliminary,appointment_time:this.date};k["a"].suspension(u).then((function(e){20010==e.code?(t.$message({message:e.msg,type:"success",duration:1e3}),t.reload()):20401==e.code?(t.$message({message:"请重新登陆",type:"error",duration:1e3}),t.$router.push("/login")):20403==e.code?(t.$message({message:e.msg,type:"error",duration:1e3}),t.$router.push("/dashboard")):t.$message({message:e.msg,type:"error",duration:1e3})}))}else if(9==this.checkstate)if(""==this.date||null==this.date)this.$message({message:"请选择约定时间",type:"error",duration:1e3});else{var d={event_number:this.$parent.opdata[0].event_number,examine_textone:this.preliminary,appointment_time:this.date};k["a"].termination(d).then((function(e){20010==e.code?(t.$message({message:e.msg,type:"success",duration:1e3}),t.reload()):20401==e.code?(t.$message({message:"请重新登陆",type:"error",duration:1e3}),t.$router.push("/login")):20403==e.code?(t.$message({message:e.msg,type:"error",duration:1e3}),t.$router.push("/dashboard")):t.$message({message:e.msg,type:"error",duration:1e3})}))}else if(10==this.checkstate)if(""==this.date||null==this.date)this.$message({message:"请选择约定时间",type:"error",duration:1e3});else{var m={event_number:this.$parent.opdata[0].event_number,examine_textone:this.preliminary,appointment_time:this.date};k["a"].litigation(m).then((function(e){20010==e.code?(t.$message({message:e.msg,type:"success",duration:1e3}),t.reload()):20401==e.code?(t.$message({message:"请重新登陆",type:"error",duration:1e3}),t.$router.push("/login")):20403==e.code?(t.$message({message:e.msg,type:"error",duration:1e3}),t.$router.push("/dashboard")):t.$message({message:e.msg,type:"error",duration:1e3})}))}else if(11==this.$parent.opdata[0].state.state_val)if(""==this.peopel||""==this.analysis||""==this.responsibility||""==this.measures)this.$message({message:"请完善信息",type:"error",duration:1e3});else{var g={event_number:this.$parent.opdata[0].event_number,investigator_ids:this.peopel,examine_textone:this.analysis,examine_texttwo:this.responsibility,examine_textthree:this.measures};k["a"].ImproveDepartmentsubmission(g).then((function(e){20010==e.code?(t.$message({message:e.msg,type:"success",duration:1e3}),t.reload()):20401==e.code?(t.$message({message:"请重新登陆",type:"error",duration:1e3}),t.$router.push("/login")):20403==e.code?(t.$message({message:e.msg,type:"error",duration:1e3}),t.$router.push("/dashboard")):t.$message({message:e.msg,type:"error",duration:1e3})}))}else if(13==this.checkstate){var v={event_number:this.$parent.opdata[0].event_number};k["a"].Hospitalimprovement(v).then((function(e){20010==e.code?(t.$message({message:e.msg,type:"success",duration:1e3}),t.reload()):20401==e.code?(t.$message({message:"请重新登陆",type:"error",duration:1e3}),t.$router.push("/login")):20403==e.code?(t.$message({message:e.msg,type:"error",duration:1e3}),t.$router.push("/dashboard")):t.$message({message:e.msg,type:"error",duration:1e3})}))["catch"]((function(e){t.$message({message:"000000",type:"error",duration:1e3})}))}else if(14==this.checkstate)if(""==this.preliminary||""==this.management)this.$message({message:"请完善信息",type:"error",duration:1e3});else{var f={event_number:this.$parent.opdata[0].event_number,examine_textone:this.preliminary,examine_texttwo:this.management};k["a"].ImprovementEnd(f).then((function(e){20010==e.code?(t.$message({message:e.msg,type:"success",duration:1e3}),t.reload()):20401==e.code?(t.$message({message:"请重新登陆",type:"error",duration:1e3}),t.$router.push("/login")):20403==e.code?(t.$message({message:e.msg,type:"error",duration:1e3}),t.$router.push("/dashboard")):t.$message({message:e.msg,type:"error",duration:1e3})}))}else if(20==this.checkstate)if(""!==this.comde&&null!==this.comde&&""!==this.accountability&&null!==this.accountability&&""!==this.eventtype&&null!==this.eventtype){var y=new Array,b=new Array;for(var w in this.comde)1==this.comde[w].length?y.push(this.comde[w][0]):2==this.comde[w].length&&b.push(this.comde[w][1]);var _=y.concat(b),x=this.accountability.map((function(t){return t[0]})),C=this.eventtype.map((function(t){return t[0]})),S={event_number:this.$parent.opdata[0].event_number,responsibility_did:_,event_type:C,responsibility_how:x,examine_textone:this.economic,examine_texttwo:this.preliminary};k["a"].end(S).then((function(e){20010==e.code?(t.$message({message:e.msg,type:"success",duration:1e3}),t.reload()):20401==e.code?(t.$message({message:"请重新登陆",type:"error",duration:1e3}),t.$router.push("/login")):20403==e.code?(t.$message({message:e.msg,type:"error",duration:1e3}),t.$router.push("/dashboard")):t.$message({message:e.msg,type:"error",duration:1e3})}))}else this.$message({message:"请完善信息",type:"error",duration:1e3})},send:function(){var t=this;-2==this.checkstate&&(""==this.preliminary?this.$message({message:"请输入退回原因",type:"error",duration:1e3}):k["a"].send(this.$parent.opdata[0].event_number,this.preliminary,this.agentname,this.agentphone).then((function(e){20010===e.code?(t.$message({message:e.msg,type:"success",duration:1e3}),t.reload()):20401==e.code?(t.$message({message:"请重新登陆",type:"error",duration:1e3}),t.$router.push("/login")):20403==e.code?(t.$message({message:e.msg,type:"error",duration:1e3}),t.$router.push("/dashboard")):t.$message({message:e.msg,type:"error",duration:1e3})})))},reject:function(){var t=this;-1==this.checkstate&&(""==this.preliminary?this.$message({message:"请输入驳回原因",type:"error",duration:1e3}):k["a"].reject(this.$parent.opdata[0].event_number,this.preliminary,this.agentname,this.agentphone).then((function(e){20010==e.code?(t.$message({message:e.msg,type:"success",duration:1e3}),t.reload()):20401==e.code?(t.$message({message:"请重新登陆",type:"error",duration:1e3}),t.$router.push("/login")):20403==e.code?(t.$message({message:e.msg,type:"error",duration:1e3}),t.$router.push("/dashboard")):t.$message({message:e.msg,type:"error",duration:1e3})})))},handleClose:function(){this.dialogVisibless=!1},detaile:function(){1!=this.dialogVisibless?this.dialogVisibless=!0:this.dialogVisibless=!1},upfile:function(){this.upfiles=!0},getRowClass:function(t){var e=t.rowIndex;return 0==e?"background:#c2c5f6;color:#000":""}},created:function(){var t=this;if(""!==this.$parent.opdata)if(11==this.$parent.opdata[0].state.state_val){var e={event_number:this.$parent.opdata[0].event_number,state:12};k["a"].truefilelist(e).then((function(e){20010==e.code?t.fileList=e.data:20401==e.code?(t.$message({message:"请重新登陆",type:"error",duration:1e3}),t.$router.push("/login")):20403==e.code?(t.$message({message:e.msg,type:"error",duration:1e3}),t.$router.push("/dashboard")):t.$message({message:"获取附件列表错误，请刷新重试",type:"error",duration:1e3})}))}else if(1==this.$parent.opdata[0].state.state_val){var s={event_number:this.$parent.opdata[0].event_number,state:2};k["a"].truefilelist(s).then((function(e){20010==e.code?t.fileList=e.data:20401==e.code?(t.$message({message:"请重新登陆",type:"error",duration:1e3}),t.$router.push("/login")):20403==e.code?(t.$message({message:e.msg,type:"error",duration:1e3}),t.$router.push("/dashboard")):t.$message({message:"获取附件列表错误，请刷新重试",type:"error",duration:1e3})}))}}},Ls=Is,Rs=(s("88c5"),Object(c["a"])(Ls,Xs,Bs,!1,null,"e03a1dea",null)),Fs=Rs.exports,js=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"addcom"},[t._m(0),s("div",{staticClass:"addcom-form-basic"},[s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-around"}},[s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",[t._v(" 业务编号 ")]),s("el-input",{attrs:{disabled:""},model:{value:t.comnumber,callback:function(e){t.comnumber=e},expression:"comnumber"}})],1)]),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",[t._v(" 投诉日期"),s("span",[t._v("*")])]),t._v(" "),s("br"),s("el-date-picker",{attrs:{type:"date",format:"yyyy 年 MM 月 dd 日","value-format":"timestamp",placeholder:"选择日期","picker-options":t.pickerOptions},model:{value:t.comdata,callback:function(e){t.comdata=e},expression:"comdata"}})],1)]),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",[t._v(" 事发日期"),s("span",[t._v("*")])]),t._v(" "),s("br"),s("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"timestamp","picker-options":t.pickerOption},model:{value:t.incidentdata,callback:function(e){t.incidentdata=e},expression:"incidentdata"}})],1)])],1),s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-around"}},[s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",[t._v(" 投诉人姓名 "),s("span",[t._v("*")])]),s("el-input",{attrs:{placeholder:"请输入投诉人姓名",maxlength:"10",onkeypress:"return( /[\\d]/.test(String.fromCharCode(event.keyCode) ) )",clearable:""},model:{value:t.comname,callback:function(e){t.comname=e},expression:"comname"}})],1)]),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",[t._v(" 性别"),s("span",[t._v("*")])]),t._v(" "),s("br"),s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.comgender,callback:function(e){t.comgender=e},expression:"comgender"}},t._l(t.comgenders,(function(t){return s("el-option",{key:t.value,attrs:{label:t.lable,value:t.value,clearable:""}})})),1)],1)]),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",[t._v(" 年龄"),s("span",[t._v("*")])]),t._v(" "),s("br"),s("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入",clearable:"",maxlength:"3",max:"3",type:"number",oninput:"value=value.replace(/[^\\d]/g,'')",onkeypress:"return( /[\\d]/.test(String.fromCharCode(event.keyCode) ) )"},model:{value:t.comagenumber,callback:function(e){t.comagenumber=e},expression:"comagenumber"}},[s("template",{slot:"append"},[s("el-select",{staticStyle:{width:"80px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:t.comage,callback:function(e){t.comage=e},expression:"comage"}},[s("el-option",{attrs:{label:"岁",value:"1"}})],1)],1)],2)],1)])],1),s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-around"}},[s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",[t._v(" 手机号码 "),s("span",[t._v("*")])]),s("el-input",{attrs:{placeholder:"请输入投诉人手机号码",type:"input",maxlength:"11",max:"11",oninput:"value=value.replace(/[^\\d]/g,'')",clearable:"",onkeypress:"return( /[\\d]/.test(String.fromCharCode(event.keyCode) ) )"},on:{onkeyup:t.formatPhoneOnkeyUp},model:{value:t.comphone,callback:function(e){t.comphone=e},expression:"comphone"}})],1)]),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",[t._v(" 投诉方式"),s("span",[t._v("*")])]),t._v(" "),s("br"),s("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.commode,callback:function(e){t.commode=e},expression:"commode"}},t._l(t.commodes,(function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)],1)]),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",[t._v(" 投诉科室"),s("span",[t._v("*")])]),t._v(" "),s("br"),s("el-cascader",{ref:"cascader",attrs:{options:t.comdes,"collapse-tags":"",props:{value:"id",label:"title",children:"_child",multiple:"true"},"show-all-levels":!1,clearable:""},on:{change:t.getCascaderObj},model:{value:t.comde,callback:function(e){t.comde=e},expression:"comde"}})],1)])],1),s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-around"}},[s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",[t._v(" 投诉人与患者关系 "),s("span",[t._v("*")])]),s("br"),s("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.relation,callback:function(e){t.relation=e},expression:"relation"}},t._l(t.relationlist,(function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)],1)]),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",[t._v(" 答复协商时间")]),t._v(" "),s("br"),s("el-input",{attrs:{placeholder:"请输入",type:"input",maxlength:"3",max:"3",oninput:"value=value.replace(/[^\\d]/g,'')",clearable:"",onkeypress:"return( /[\\d]/.test(String.fromCharCode(event.keyCode) ) )"},model:{value:t.consulttime,callback:function(e){t.consulttime=e},expression:"consulttime"}},[s("template",{slot:"append"},[t._v("天")])],2)],1)]),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",[t._v(" 投诉类别(多选)")]),t._v(" "),s("br"),s("el-select",{attrs:{multiple:"",placeholder:"请选择",clearable:""},model:{value:t.comtype,callback:function(e){t.comtype=e},expression:"comtype"}},t._l(t.comtypelist,(function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)],1)])],1),s("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[s("el-col",{attrs:{span:6,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",[t._v(" 事件性质 ")]),s("br"),s("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.nature,callback:function(e){t.nature=e},expression:"nature"}},t._l(t.natures,(function(t){return s("el-option",{key:t.state_val,attrs:{label:t.title,value:t.state_val}})})),1)],1)]),s("el-col",{attrs:{span:14,push:3}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",[t._v(" 联系地址"),s("span",[t._v("*")])]),t._v(" "),s("br"),s("el-input",{attrs:{placeholder:"联系地址",maxlength:"50",minlength:"10",onkeypress:"return( /[\\d]/.test(String.fromCharCode(event.keyCode) ) )",clearable:""},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1)])],1),s("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[s("el-col",{attrs:{span:22,push:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",[t._v(" 投诉原因")]),s("el-input",{attrs:{type:"textarea",onkeypress:"return( /[\\d]/.test(String.fromCharCode(event.keyCode) ) )",placeholder:"请输入投诉原因",clearable:"",maxlength:"100"},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}})],1)])],1)],1),s("div",{staticClass:"Addcom-agent"},[s("h4",[t._v("经办人信息")]),s("div",[s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-around"}},[s("el-col",{attrs:{span:6,pull:2}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",[t._v(" 经办人姓名"),s("span",[t._v("*")])]),s("el-input",{attrs:{onkeypress:"return( /[\\d]/.test(String.fromCharCode(event.keyCode) ) )",placeholder:"请输入姓名",clearable:"",type:"input",maxlength:"20"},model:{value:t.agentname,callback:function(e){t.agentname=e},expression:"agentname"}})],1)]),s("el-col",{attrs:{span:6,pull:6}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",[t._v("经办人手机"),s("span",[t._v("*")])]),t._v(" "),s("br"),s("el-input",{attrs:{placeholder:"请输入手机号码",clearable:"",type:"input",maxlength:"11",max:"11",oninput:"value=value.replace(/[^\\d]/g,'')",onkeypress:"return( /[\\d]/.test(String.fromCharCode(event.keyCode) ) )"},model:{value:t.agentphone,callback:function(e){t.agentphone=e},expression:"agentphone"}})],1)])],1)],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"addcom-relevance"},[s("h4",[t._v("关联患者信息(调用HIS)")]),s("el-table",{staticStyle:{width:"94%","margin-left":"3%","margin-top":"20px","margin-bottom":"20px"},attrs:{data:t.data,"header-cell-style":t.getRowClass}},[s("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),s("el-table-column",{attrs:{prop:"name",label:"姓名"}}),s("el-table-column",{attrs:{prop:"name",label:"性别"}}),s("el-table-column",{attrs:{prop:"name",label:"出生日期"}}),s("el-table-column",{attrs:{prop:"name",label:"联系方式"}}),s("el-table-column",{attrs:{prop:"name",label:"地址"}}),s("el-table-column",{attrs:{prop:"name",label:"科室"}}),s("el-table-column",{attrs:{prop:"name",label:"诊断"}}),s("el-table-column",{staticStyle:{"border-bottom":"none"},attrs:{fixed:"right",label:"操作",width:"100%"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{staticStyle:{"border-bottom":"none"},attrs:{type:"text",size:"small"},on:{click:function(s){return t.handleClick(e.row)}}},[t._v("取消关联")])]}}])})],1),s("div",{attrs:{align:"center"}},[s("el-button",{staticClass:"addrelevance",attrs:{type:"primary",icon:"el-icon-circle-plus"}},[t._v("添加患者信息")])],1)],1),s("div",{staticClass:"requirement"},[t._t("dialog")],2),s("Conserve",[s("el-button",{staticClass:"keep",attrs:{slot:"keep",type:"primary",size:"medium",icon:"iconfont el-icon-hospital-passwordbaocun"},on:{click:function(e){return t.keepform()}},slot:"keep"},[t._v("提交")]),s("el-button",{staticClass:"return",staticStyle:{border:"1px solid #949aef"},attrs:{slot:"back",type:"primary",size:"medium",icon:"iconfont el-icon-hospital-passwordai207"},on:{click:function(e){return t.backss()}},slot:"back"},[t._v("返回")])],1)],1)])},Ns=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"addcom-top"},[s("h4",[t._v("基本信息")])])}],As=(s("277d"),{components:{Conserve:b},inject:["reload"],data:function(){return{props:{multiple:!0,editdata:{}},agree:"",pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(t){t.$emit("pick",new Date)}},{text:"昨天",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"一周前",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}}]},pickerOption:{disabledDate:function(t){return t.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(t){t.$emit("pick",new Date)}},{text:"昨天",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"一周前",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}}]},data:[{name:1}],agentname:"",agentphone:"",comnumber:"",comdata:"",incidentdata:"",comname:"",comgender:"",comage:"岁",comagenumber:"",comphone:"",consulttime:"",address:"",reason:"",comgenders:[{value:"0",lable:"男"},{value:"1",lable:"女"},{value:"2",lable:"保密"}],commodes:[],commode:"",comdes:[],comde:"",relationlist:[],relation:"",comtypelist:[],comtype:"",natures:[],nature:""}},methods:{formatPhoneOnkeyUp:function(t){var e=t.replace(/\D/g,"").substring(0,11),s=e.length;return s>3&&s<8?e="".concat(e.substr(0,3)," ").concat(e.substr(3)):s>=8&&(e="".concat(e.substr(0,3)," ").concat(e.substr(3,4)," ").concat(e.substr(7))),e},changeInput:function(){var t=/^[1-9][0-9]*$/;t.test(this.num)||(this.num="")},getCascaderObj:function(){},keepform:function(){var t=this;if(console.log(this.comde),""!==this.comde&&null!==this.comde&&0!==this.comde.length&&""!==this.incidentdata&&""!==this.comdata&&""!==this.comname&&""!==this.comgender&&""!==this.comagenumber&&""!==this.comphone&&""!==this.commode&&""!==this.relation&&""!==this.consulttime&&""!==this.nature&&""!==this.comtype&&""!==this.agentname&&""!==this.agentphone&&""!==this.address){var e="",s=new Array,o=new Array;for(var i in this.comde)console.log(i),Array.isArray(this.comde[i])?(1==this.comde[i].length?s.push(this.comde[i][0]):2==this.comde[i].length&&o.push(this.comde[i][1]),e=s.concat(o)):e=this.comde;console.log(e);var a=e,n={event_number:this.comnumber,event_type:this.comtype,cause:this.reason,address:this.address,occur_time:this.incidentdata,department_id:a,create_time:this.comdata,ComplaintType:this.commode,complaint_name:this.comname,complaint_phone:this.comphone,sex:this.comgender,specific_age:1,age:this.comagenumber,inpatient_relation:this.relation,reply_time:this.consulttime,character:this.nature,handle_name:this.agentname,handle_phone:this.agentphone};console.log(n),k["a"].editomponent(n).then((function(e){20010==e.code?(t.$message({message:e.msg,type:"success",duration:1e3}),t.reload()):20401==e.code?(t.$message({message:"请重新登陆",type:"error",duration:1e3}),t.$router.push("/login")):20403==e.code?(t.$message({message:e.msg,type:"error",duration:1e3}),t.$router.push("/dashboard")):t.$message({message:e.msg,type:"error",duration:1e3})}))}else""==this.address||null==this.address?this.$message({message:"请输入联系地址",type:"error",duration:1e3}):""==this.comde||null==this.comde?this.$message({message:"请选择投诉科室",type:"error",duration:1e3}):""==this.comdata?this.$message({message:"请选择投诉日期",type:"error",duration:1e3}):""==this.incidentdata?this.$message({message:"请选择事发日期",type:"error",duration:1e3}):""==this.comname?this.$message({message:"请输入投诉人姓名",type:"error",duration:1e3}):""==this.comgender?this.$message({message:"请输入投诉人性别",type:"error",duration:1e3}):""==this.comagenumber?this.$message({message:"请输入投诉人年龄",type:"error",duration:1e3}):""==this.comphone?this.$message({message:"请输入投诉人手机号码",type:"error",duration:1e3}):""==this.commode?this.$message({message:"请选择投诉方式",type:"error",duration:1e3}):""==this.relation?this.$message({message:"请选择与患者的关系",type:"error",duration:1e3}):""==this.consulttime?this.$message({message:"请输入答复时间",type:"error",duration:1e3}):""==this.nature?this.$message({message:"请选择事件性质",type:"error",duration:1e3}):""==this.comtype?this.$message({message:"请选择投诉类别",type:"error",duration:1e3}):""==this.agentname?this.$message({message:"请输入经办人姓名",type:"error",duration:1e3}):""==this.agentphone&&this.$message({message:"请输入经办人手机号",type:"error",duration:1e3})},backss:function(){this.reload(),sessionStorage.removeItem("add")},getRowClass:function(t){var e=t.rowIndex;return 0==e?"background:#c2c5f6;color:#000":""}},created:function(){this.comde=this.$parent.editdatas[0].department_id,this.reason=this.$parent.editdatas[0].cause,this.comtype=this.$parent.editdatas[0].event_type,this.commode=this.$parent.editdatas[0].ComplaintType,this.incidentdata=this.$parent.editdatas[0].occur_time,this.comdata=this.$parent.editdatas[0].create_time,this.comname=this.$parent.editdatas[0].complaint_name,this.comphone=this.$parent.editdatas[0].complaint_phone,this.relation=this.$parent.editdatas[0].inpatient_relation,this.comgender=this.$parent.editdatas[0].sex,this.nature=this.$parent.editdatas[0].character,this.address=this.$parent.editdatas[0].address,this.comagenumber=this.$parent.editdatas[0].age,this.consulttime=this.$parent.editdatas[0].reply_time,this.agentname=this.$parent.editdatas[0].handle_name,this.agentphone=this.$parent.editdatas[0].handle_phone,this.comnumber=this.$parent.editdatas[0].event_number,this.commodes=this.$parent.editdatas[1].ComplaintType,this.comtypelist=this.$parent.editdatas[1].event_type,this.natures=this.$parent.editdatas[1].character,this.relationlist=this.$parent.editdatas[1].inpatient_relation,this.comdes=this.$parent.editdatas[1].department}}),Ws=As,Ks=(s("2821"),Object(c["a"])(Ws,js,Ns,!1,null,"24ee9dd2",null)),Us=Ks.exports,Vs={inject:["reload"],components:{Complaintslist:h,Addcom:ws,Look:Ps,Conserve:b,Table:Os,Operation:Fs,Edit:Us},data:function(){return{editdata:"",editdatas:"",operationdata:"",opdata:"",lookdata:"",list:!0,add:!1,look:!1,dialogVisible:!1,agree:"",operations:!1,drawer:!1,event_number:"",editshows:!1,filelisttrue:[]}},methods:{detail:function(){var t=this;this.drawer=!0,console.log(this.event_number);var e={event_number:this.event_number};k["a"].componrdetaile(e).then((function(e){20010==e.code?t.lookdata=e.data:20401==e.code?(t.$message({message:"请重新登陆",type:"error",duration:1e3}),t.$router.push("/login")):20403==e.code?(t.$message({message:e.msg,type:"error",duration:1e3}),t.$router.push("/dashboard")):t.$message({message:e.msg,type:"error",duration:1e3})}))},handle:function(t){var e=this;console.log(t),this.event_number=t.event_number,-1==t.state.state_val?k["a"].EditComponent(t.event_number).then((function(s){console.log(s),20010==s.code?(e.list=!1,e.add=!1,e.look=!1,e.operations=!1,e.editshows=!0,e.editdata=t,e.editdatas=s.data):e.$message({message:s.msg,type:"error",duration:2e3})})):-2==t.state.state_val?this.$message({message:"已退回！无法操作",type:"error",duration:1e3}):k["a"].Issue(t.event_number).then((function(s){20010==s.code?(e.list=!1,e.add=!1,e.look=!1,e.operations=!0,e.editshows=!1,e.operationdata=t,e.opdata=s.data):(s.code=20401)?(e.$message({message:"请重新登陆",type:"error",duration:1e3}),e.$router.push("/login")):(s.code=20403)?(e.$message({message:s.msg,type:"error",duration:1e3}),e.$router.push("/dashboard")):e.$message({message:s.msg,type:"error",duration:1e3})}))},records:function(t){this.$router.push({path:"/Connect",query:{event_number:t.event_number}})},handleClose:function(t){var e=this;this.$confirm("确认关闭？").then((function(t){e.backss()}))["catch"]((function(t){}))},record:function(){this.$router.push("/Connect")},looks:function(t){var e=this;this.list=!1,this.add=!1,this.look=!0,this.editshows=!1,this.operations=!1;var s={event_number:t.event_number};k["a"].componrdetaile(zs.a.stringify(s)).then((function(t){20010==t.code?e.lookdata=t.data:20401==t.code?(e.$message({message:"请重新登陆",type:"error",duration:1e3}),e.$router.push("/login")):20403==t.code?(e.$message({message:t.msg,type:"error",duration:1e3}),e.$router.push("/dashboard")):e.$message({message:t.msg,type:"error",duration:1e3})}))},stamp:function(){console.log(1)},backss:function(){this.list=!0,this.add=!1,this.look=!1,this.operations=!1,this.dialogVisible=!1,this.editshows=!1,this.reload()},addcomsss:function(){this.list=!1,this.add=!0,this.look=!1,this.editshows=!1,this.dialogVisible=!0,this.operations=!1},exportcom:function(){var t=this,e=JSON.parse(sessionStorage.getItem("tableData"));e.forEach((function(t){t.complaint_type=t.complaint_type.title,t.state=t.state.title})),s.e("chunk-2510fca7").then(s.bind(null,"4bf8")).then((function(s){var o=["事件编号","投诉人姓名","性别","年龄/岁","手机号码","投诉科室","投诉方式","投诉时间","流转部门","事件状态"],i=["event_number","complaint_name","sex","age","complaint_phone","department","complaint_type","create_time","pass_names","state"],a=e,n=t.formatJson(i,a);s.export_json_to_excel({header:o,data:n,filename:"业务列表",autoWidth:!0,bookType:"xlsx"})}))},formatJson:function(t,e){return e.map((function(e){return t.map((function(t){return e[t]}))}))},getRowClass:function(t){return 0==t?"background:#c2c5f6;color:#000":""}},created:function(){}},qs=Vs,Js=(s("e1c8"),Object(c["a"])(qs,o,i,!1,null,"20ce2036",null));e["default"]=Js.exports},c0a7:function(t,e,s){},c40e:function(t,e,s){},e1c8:function(t,e,s){"use strict";var o=s("c40e"),i=s.n(o);i.a},e9af:function(t,e,s){"use strict";var o=s("06a6"),i=s.n(o);i.a},ffab:function(t,e,s){"use strict";var o=s("b9b6"),i=s.n(o);i.a}}]);