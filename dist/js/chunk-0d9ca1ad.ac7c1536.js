(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d9ca1ad"],{"03f2":function(e,t,a){},"1f22":function(e,t,a){},"54b8":function(e,t,a){},9469:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.rolevue?a("div",{staticClass:"rolealBg"},[a("headpow"),a("div",{staticClass:"roleIptsech"},[a("el-input",{staticClass:"roleNameIpt",attrs:{placeholder:"请输入角色名称",clearable:""},on:{clear:e.delValue},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("el-button",{staticClass:"roleNamesch",attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.roleserch()}}})],1),a("div",{staticClass:"roleTable"},[a("el-table",{attrs:{"max-height":"662",data:e.tables,"tooltip-effect":"dark","header-cell-style":{background:"#C2C5F6",color:"#000"},"cell-style":{background:"#fff"}}},[a("el-table-column",{attrs:{width:"50px",label:"序号",type:"index"}}),a("el-table-column",{attrs:{prop:"sort",label:"角色排序"}}),a("el-table-column",{attrs:{prop:"title",label:"角色名称"}}),a("el-table-column",{attrs:{prop:"number",label:"员工数量"}}),a("el-table-column",{attrs:{prop:"user.name",label:"修改人员"}}),a("el-table-column",{attrs:{width:"240px",prop:"create_time",label:"修改时间"}}),a("el-table-column",{attrs:{label:"角色状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return e.changeSwitch(a,t.row,t.row.id)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}],null,!1,1204060852)},[e._v(" >")]),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"roleEdit",attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleEdit(t.row.id)}}},[e._v("编辑")]),a("el-button",{staticClass:"roleDel",attrs:{size:"small",type:"text"},on:{click:function(a){return e.delrole(t.row.id)}}},[e._v("删除")])]}}],null,!1,3586161833)})],1)],1),a("div",{staticClass:"rolepag"},[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":e.nums,"page-size":e.num,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])],1):e._e(),a("addrole",{directives:[{name:"show",rawName:"v-show",value:e.addrole,expression:"addrole"}],attrs:{listaddchild:e.addchild}}),a("editrole",{directives:[{name:"show",rawName:"v-show",value:e.editshow,expression:"editshow"}],attrs:{editchid:e.childedit}})],1)},s=[],o=(a("ac1f"),a("841c"),a("4795"),a("f4df")),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addrole"},[a("div",{staticClass:"roleaddThre"},[a("span",{staticClass:"roleaddSpan"},[e._v("新增角色信息")]),a("div",[a("el-button",{staticClass:"roleaddgr",attrs:{type:"primary",icon:"iconfont el-icon-hospital-passwordbaocun"},on:{click:e.roleaddvueyes}},[e._v("保存 ")]),a("el-button",{staticClass:"roleaddb",attrs:{type:"primary",icon:"iconfont el-icon-hospital-passwordai207"},on:{click:e.roleaddvueno}},[e._v("返回 ")])],1)]),a("div",{staticClass:"addmain"},[a("el-form",{ref:"form"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"角色编号",disabled:""}},[a("el-input",{staticClass:"dialog-input-text",attrs:{type:"input",autosize:"",placeholder:"10001",disabled:""}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"角色名称",required:""}},[a("el-input",{staticClass:"dialog-input-text",attrs:{type:"input",autosize:""},model:{value:e.roleNameipt,callback:function(t){e.roleNameipt=t},expression:"roleNameipt"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticStyle:{"margin-top":"40px"},attrs:{label:"角色状态"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.valuestatus,callback:function(t){e.valuestatus=t},expression:"valuestatus"}})],1)],1),a("el-col",{attrs:{span:6}})],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"角色描述",required:""}},[a("el-input",{staticClass:"dialog-input-text",attrs:{type:"input",autosize:"",placeholder:"请输入内容"},model:{value:e.rolecreate,callback:function(t){e.rolecreate=t},expression:"rolecreate"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"排序",required:""}},[a("el-input",{staticClass:"dialog-input-text",attrs:{type:"input",autosize:"",placeholder:"数字越小,排序越高"},model:{value:e.px,callback:function(t){e.px=t},expression:"px"}})],1)],1),a("el-col",{attrs:{span:6}})],1)],1)],1),a("div",[a("p",{staticStyle:{display:"flex","margin-left":"40px","font-size":"20px",color:"#858bed","font-weight":"bold"}},[e._v(" 查看权限 ")]),a("div",{staticClass:"role_div"},[a("el-radio-group",{on:{change:e.radiochange},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[a("el-radio",{attrs:{label:2}},[e._v("本科室")]),a("el-radio",{attrs:{label:1}},[e._v("全部")])],1)],1)]),a("div",{staticStyle:{"min-height":"510px"}},[a("p",{staticStyle:{display:"flex","margin-left":"40px","font-size":"20px",color:"#858bed","font-weight":"bold"}},[e._v(" 权限分配 ")]),a("div",{staticClass:"roleFs"},[a("div",{staticClass:"H-edit"},e._l(e.powlist,(function(t){return a("div",{key:t.id,staticClass:"content",attrs:{label:t.id}},[a("div",{staticClass:"title"},[a("el-checkbox",{attrs:{label:t.id},on:{change:e.fcheckchange},model:{value:e.fcheck,callback:function(t){e.fcheck=t},expression:"fcheck"}},[e._v(e._s(t.title))])],1),e._l(t._child,(function(t){return a("div",{key:t.id,staticClass:"power",attrs:{label:t.id}},[a("el-checkbox",{staticClass:"tit",attrs:{label:t.id},on:{change:e.vcheckchange},model:{value:e.vcheck,callback:function(t){e.vcheck=t},expression:"vcheck"}},[e._v(e._s(t.title))]),a("el-checkbox-group",{on:{change:e.checkchange},model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(t._child,(function(t,l){return a("el-checkbox",{key:l,attrs:{label:t.id}},[e._v(e._s(t.title))])})),1)],1)}))],2)})),0)])])])},c=[],n=a("6022"),r={props:["listaddchild"],inject:["reload"],data:function(){return{radio:1,rolecreate:"",roleNameipt:"",valuestatus:1,name:"",checked:!1,checkList:[],fcheck:[],vcheck:[],dialogVisible:!1,powlist:[],px:""}},radiochange:function(){console.log(this.radio)},watch:{listaddchild:function(e){console.log(e),this.powlist=e.data}},methods:{checkchange:function(){console.log(this.checkList)},vcheckchange:function(){console.log(this.vcheck)},fcheckchange:function(){console.log(this.fcheck)},roleaddvueyes:function(){var e=this,t={title:this.roleNameipt,status:this.valuestatus,describe:this.rolecreate,sort:this.px,rules:this.checkList+","+this.vcheck+","+this.fcheck,data_rule:this.radio};n["a"].roleadd(t).then((function(t){if(console.log(t),"20010"==t.code){var a=e.$loading({lock:!0,text:"保存中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout((function(){a.close(),e.reload()}),2e3),e.$parent.fathroleyes()}}))},radiochange:function(){console.log(this.radio)},roleaddvueno:function(){this.$parent.fathroleno()},changesonc:function(e){console.log(e)}}},d=r,u=(a("e108"),a("2877")),h=Object(u["a"])(d,i,c,!1,null,"7e5b3fac",null),p=h.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addrole"},[a("div",{staticClass:"roleaddThre"},[a("span",{staticClass:"roleaddSpan"},[e._v("编辑角色信息")]),a("div",[a("el-button",{staticClass:"roleaddgr",attrs:{icon:"iconfont el-icon-hospital-passwordbaocun"},on:{click:e.roleaddvueyes}},[e._v("保存")]),a("el-button",{staticClass:"roleaddb",attrs:{icon:"iconfont el-icon-hospital-passwordai207"},on:{click:e.roleaddvueno}},[e._v("返回")])],1)]),a("div",{staticClass:"addmain"},[a("el-form",{ref:"form"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"角色编号",disabled:""}},[a("el-input",{staticClass:"dialog-input-text",attrs:{type:"input",autosize:"",placeholder:"10001"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"角色名称",required:""}},[a("el-input",{staticClass:"dialog-input-text",attrs:{type:"input",autosize:""},model:{value:e.roleNameipt,callback:function(t){e.roleNameipt=t},expression:"roleNameipt"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticStyle:{"margin-top":"40px"},attrs:{label:"角色状态"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.valuestatus,callback:function(t){e.valuestatus=t},expression:"valuestatus"}})],1)],1),a("el-col",{attrs:{span:6}})],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"角色描述",required:""}},[a("el-input",{staticClass:"dialog-input-text",attrs:{type:"input",autosize:"",placeholder:"请输入内容"},model:{value:e.rolems,callback:function(t){e.rolems=t},expression:"rolems"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"角色排序",required:""}},[a("el-input",{staticClass:"dialog-input-text",attrs:{type:"input",autosize:"",placeholder:"请输入内容"},model:{value:e.px,callback:function(t){e.px=t},expression:"px"}})],1)],1),a("el-col",{attrs:{span:6}})],1)],1)],1),a("div",{staticStyle:{"margin-top":"10px"}},[a("p",{staticStyle:{display:"flex","margin-left":"40px","font-size":"20px",color:"#858bed","font-weight":"bold"}},[e._v(" 查看权限 ")]),a("div",{staticClass:"role_div",staticStyle:{"text-align":"left",margin:"10px 70px"}},[a("el-radio-group",{on:{change:e.radiochange},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[a("el-radio",{attrs:{label:2}},[e._v("本科室")]),a("el-radio",{attrs:{label:1}},[e._v("全部")])],1)],1)]),a("div",{staticStyle:{"min-height":"490px"}},[a("p",{staticStyle:{display:"flex","margin-left":"40px","font-size":"20px",color:"#858bed","font-weight":"bold"}},[e._v(" 权限分配 ")]),a("div",{staticClass:"roleFs"},[a("div",{staticClass:"H-edit"},e._l(e.powlist,(function(t){return a("div",{key:t.id,staticClass:"content",attrs:{label:t.id}},[a("div",{staticClass:"title"},[a("el-checkbox",{attrs:{label:t.id,checked:t.checked},on:{change:e.fcheckchange},model:{value:e.fcheck,callback:function(t){e.fcheck=t},expression:"fcheck"}},[e._v(e._s(t.title)+" ")])],1),e._l(t._child,(function(t){return a("div",{key:t.id,staticClass:"power",attrs:{label:t.id}},[a("el-checkbox",{staticClass:"tit",attrs:{label:t.id,checked:t.checked},on:{change:e.vcheckchange},model:{value:e.vcheck,callback:function(t){e.vcheck=t},expression:"vcheck"}},[e._v(e._s(t.title))]),a("el-checkbox-group",{on:{change:e.checkchange},model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(t._child,(function(t,l){return a("el-checkbox",{key:l,attrs:{label:t.id,checked:t.checked}},[e._v(e._s(t.title))])})),1)],1)}))],2)})),0)])])])},v=[],g=(a("4e82"),{props:["editchid"],inject:["reload"],data:function(){return{radio:"",cc:0,rolems:"",px:"",roleNameipt:"",valuestatus:0,jkid:"",name:"",checked:!1,checkList:[],fcheck:[],vcheck:[],dialogVisible:!1,powlist:[]}},watch:{editchid:function(e){console.log(e.info),this.roleNameipt=e.info.title,this.rolems=e.info.describe,this.px=e.info.sort,this.valuestatus=e.info.status,this.jkid=e.info.id,this.powlist=e.rule,this.radio=e.info.data_rule,console.log(this.powlist)}},methods:{checkchange:function(){console.log(this.checkList)},vcheckchange:function(){console.log(this.vcheck)},fcheckchange:function(){console.log(this.fcheck)},roleaddvueyes:function(){var e=this,t={title:this.roleNameipt,status:this.valuestatus,describe:this.rolems,id:this.jkid,rules:this.checkList+","+this.vcheck+","+this.fcheck,data_rule:this.radio,sort:this.px};console.log(t),n["a"].roleeditsqve(t).then((function(t){console.log(t),20010==t.code?(e.$message({message:"保存成功！",type:"success",duration:2e3}),setTimeout((function(){e.reload()}),2e3)):e.$message({message:"请注意"+t.msg,type:"error",duration:1300})}))},radiochange:function(){console.log(this.radio)},roleaddvueno:function(){this.$parent.fathroleno()},changesonc:function(e){console.log(e)}}}),m=g,b=(a("9a22"),Object(u["a"])(m,f,v,!1,null,"6ecebac5",null)),k=b.exports,x={components:{headpow:o["a"],addrole:p,editrole:k},inject:["reload"],data:function(){return{rolevue:!0,addrole:!1,editshow:!1,tables:[],currentRow:[],dormitory:[],search:"",childedit:[],currentPage:1,total:0,page:1,pageSize:5,nums:[8,10,20],num:8,tables1:[],addchild:[]}},created:function(){var e=this;n["a"].rolelist().then((function(t){console.log(t),20403==t.code&&(e.$message({type:"error",message:t.msg,duration:1e3}),e.$router.push("/dashboard")),e.tables=t.data,e.total=t.allNews}))},methods:{fathpowadd:function(){var e=this;this.rolevue=!1,this.addrole=!0,n["a"].rolepowlist().then((function(t){console.log(t),e.addchild=t}))},fathroleyes:function(){var e=this;setTimeout((function(){e.addrole=!1,e.editshow=!1,e.rolevue=!0}),3e3)},fathroleno:function(){this.addrole=!1,this.editshow=!1,this.rolevue=!0},roleserch:function(){var e=this,t={title:this.search,pageSize:this.num,pageNum:this.currentPage};n["a"].roleserch(t).then((function(t){e.tables=e.tables1=t.data,console.log(t),e.total=t.allNews}))},changeSwitch:function(e,t,a){var l=this;console.log(t.status),this.$confirm("此操作将修改状态, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e={id:a,status:t.status};console.log(e),n["a"].rolestatus(e).then((function(e){console.log(e),l.$message({type:"success",message:e.msg,duration:1500}),l.reload()}))}))["catch"]((function(){1==t.status?t.status=0:t.status=1,l.$message({type:"info",message:"已取消操作",duration:1300})}))},handleEdit:function(e){var t=this;this.rolevue=!1,this.editshow=!0,console.log(e);var a={id:e};console.log(a),n["a"].roleedit(a).then((function(e){console.log(e),t.childedit=e,console.log(t.childedit)}))},delrole:function(e){var t=this;this.$confirm("此操作将删除该角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={id:e};console.log(a),n["a"].roledel(a).then((function(e){console.log(e),t.$message({type:"success",message:e.msg,duration:1500}),setTimeout((function(){t.reload()}),2e3)}))}))["catch"]((function(){t.$message({type:"info",message:"已取消操作",duration:1300})}))},handleSizeChange:function(e){var t=this;console.log("每页 ".concat(e,"条")),this.num=e;var a={pageSize:this.num,pageNum:this.currentPage,title:this.search};console.log(a),n["a"].rolelist(a).then((function(e){console.log(e),t.tables=e.data,t.total=e.allNews}))},handleCurrentChange:function(e){var t=this;this.currentPage=e,console.log("当前页:".concat(e));var a={pageSize:this.num,pageNum:this.currentPage,title:this.search};console.log(a),n["a"].rolelist(a).then((function(e){console.log(e),t.tables=e.data}))},delValue:function(){var e=this,t={title:this.search,pageSize:this.num,pageNum:this.currentPage};n["a"].roleserch(t).then((function(t){e.tables=e.tables1=t.data,console.log(t),e.total=t.allNews}))}}},w=x,_=(a("dae4"),Object(u["a"])(w,l,s,!1,null,null,null));t["default"]=_.exports},"9a22":function(e,t,a){"use strict";var l=a("eaaa"),s=a.n(l);s.a},aa35:function(e,t,a){"use strict";var l=a("1f22"),s=a.n(l);s.a},dae4:function(e,t,a){"use strict";var l=a("03f2"),s=a.n(l);s.a},e108:function(e,t,a){"use strict";var l=a("54b8"),s=a.n(l);s.a},eaaa:function(e,t,a){},f4df:function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"powerheadThre"},[a("ul",{staticClass:"list"},[a("li",{staticClass:"stafflist",on:{click:e.staff}},[e._v("员工列表")]),a("li",{staticClass:"departlist",on:{click:e.depart}},[e._v("科室列表")]),a("li",{staticClass:"rolelist",on:{click:e.role}},[e._v("角色列表")]),a("li",{staticClass:"editpowlist",on:{click:e.editpow}},[e._v("编辑权限")])]),a("el-button",{staticClass:"powerAdd",attrs:{type:"primary",icon:"el-icon-circle-plus"},on:{click:e.staffadd}},[e._v("新增 ")])],1)])},s=[],o=a("6022"),i={data:function(){return{all:{},job_number:""}},methods:{staffadd:function(){var e=this;o["a"].getrole().then((function(t){console.log(t),e.all=t.data,e.bus.$emit("ReceiveMessage",e.all),e.$parent.fathpowadd()}))},staff:function(){this.$router.push("/Staff")},depart:function(){this.$router.push("/Department")},role:function(){this.$router.push("/Role")},editpow:function(){this.$router.push("/Edit")}}},c=i,n=(a("aa35"),a("2877")),r=Object(n["a"])(c,l,s,!1,null,"57699d60",null);t["a"]=r.exports}}]);