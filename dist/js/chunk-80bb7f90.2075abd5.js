(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-80bb7f90"],{2091:function(e,t,i){},d80f0:function(e,t,i){"use strict";i.r(t);var a,l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("AList",{directives:[{name:"show",rawName:"v-show",value:e.isshow,expression:"isshow"}],on:{myRe:e.myRe}}),i("Det",{directives:[{name:"show",rawName:"v-show",value:e.ishow,expression:"ishow"}],on:{returnAdd:e.returnAdd}}),i("AriEd",{directives:[{name:"show",rawName:"v-show",value:e.showEdit,expression:"showEdit"}]})],1)},s=[],n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"articleList_all"},[i("div",{staticClass:"articleList_top"},[e._m(0),i("div",{staticClass:"articleList_top_right"},[i("el-button",{attrs:{type:"primary",size:"medium",icon:"el-icon-circle-plus"},on:{click:e.myAdd}},[e._v("添加文章")])],1)]),i("div",{staticClass:"articleList_table_search"},[i("el-cascader",{ref:"unitAreacode",attrs:{options:e.options,props:{expandTrigger:"hover"}},on:{change:e.handleChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),i("el-input",{attrs:{placeholder:"请输入文章名称"},model:{value:e.input3,callback:function(t){e.input3=t},expression:"input3"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.detailSeach},slot:"append"})],1)],1),i("div",{staticClass:"articleList_table_table"},[i("div",{staticStyle:{"min-height":"590px"}},[i("el-table",{ref:"multipleTable",attrs:{"max-height":"595",data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),i("el-table-column",{attrs:{label:"编号",type:"index"}}),i("el-table-column",{attrs:{label:"标题",prop:"title"}}),i("el-table-column",{attrs:{prop:"classification.title",label:"栏目"}}),i("el-table-column",{attrs:{prop:"create_time",label:"发布时间","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"user.name",label:"发布人","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{label:"操作",width:"150",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return e.handleClick(t.row)}}},[e._v("查看")]),i("el-button",{attrs:{type:"text",size:"small",id:"UserLogout"},on:{click:function(i){return e.myEdit(t.row)}}},[e._v("编辑")]),i("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},on:{click:function(i){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),i("div",{staticClass:"articleList_table_table_select"},[i("el-select",{attrs:{placeholder:"请选择"},on:{change:e.dilog},model:{value:e.value5,callback:function(t){e.value5=t},expression:"value5"}},e._l(e.name,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),i("div",{staticClass:"articleList_table_table_select"},[i("el-dialog",{attrs:{title:e.dlog,visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",[e.isShow?i("p",[e._v("确定删除所选文章")]):i("div",{staticClass:"block"},[i("el-cascader",{ref:"cascaderDig",attrs:{options:e.optionsHover,props:{expandTrigger:"hover"}},on:{change:e.handledig}})],1)]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.istrue}},[e._v("确 定")])],1)])],1),i("div",{staticClass:"articleList_table_table_paging"},[i("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":e.numberlist,"page-size":e.num,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])])},o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"articleList_top_left"},[i("h5",[e._v("文章列表")])])}],r=(i("4160"),i("d81d"),i("b0c0"),i("159b"),i("2091"),i("6022")),c={components:{},props:{},inject:["reload"],data:function(){return{dialogVisible:!1,ids:[],id:"",cid:"",options:[],value:"",input3:"",tableData:[],multipleSelection:[],value5:"",name:[{value:"1",label:"移至栏目"},{value:"2",label:"删除"}],numberlist:[8,10,20],currentPage:1,total:0,num:8,dlog:"",valueHover:[],optionsHover:[],isShow:!1}},methods:{handleSelectionChange:function(e){var t=this;e.forEach((function(e){t.ids.push(e.id)}))},detailSeach:function(){var e=this,t={cid:this.id,title:this.input3};r["a"].detailSeach(t).then((function(t){e.tableData=t.data.lists}))},handleSizeChange:function(e){var t=this;this.num=e;var i={pNum:this.num,p:this.currentPage};r["a"].detailSeach(i).then((function(e){t.tableData=e.data.lists}))},handleCurrentChange:function(e){var t=this;this.currentPage=e;var i={pNum:this.num,p:this.currentPage};r["a"].detailSeach(i).then((function(e){t.tableData=e.data.lists}))},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var i={id:e.id};r["a"].detailDel(i).then((function(e){t.$message({type:"success",message:"删除成功!",duration:1500}),t.reload()}))}))["catch"]((function(){t.$message({type:"info",message:"已取消删除",duration:1500})}))},handleChange:function(e){this.id=this.$refs["unitAreacode"].getCheckedNodes()[0].value.id},handledig:function(e){this.cid=this.$refs["cascaderDig"].getCheckedNodes()[0].value.id},handleClick:function(e){var t=this,i={id:e.id};r["a"].detailinfo(i).then((function(e){20010==e.code&&(t.$emit("myRe"),t.bus.$emit("info",e.data))}))},myEdit:function(e){var t=this,i={id:e.id};r["a"].detailEdit(i).then((function(e){t.$parent.abcClick(),t.bus.$emit("ariEdit",e.data)}))},myAdd:function(){this.$router.push("/Addarticle")},istrue:function(){var e=this;if(this.dialogVisible=!1,0==this.isShow){var t={cid:this.cid,ids:this.ids};r["a"].detailalls(t).then((function(t){20010==t.code&&(e.$message({type:"success",message:t.msg,duration:1500}),e.reload())}))}else{var i={ids:this.ids};r["a"].detailDels(i).then((function(t){e.$message({type:"success",message:t.msg,duration:1500}),e.reload()}))}},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()}))["catch"]((function(e){}))},dilog:function(e){var t=this;0!==this.ids.length?(this.dialogVisible=!this.dialogVisible,1==e?(this.dialogVisible=!this.dialogVisible,this.dlog=this.name[0].label,this.isShow=!1,r["a"].detailAlls().then((function(e){t.dialogVisible=!t.dialogVisible;var i=e.data,a=function e(t){return t.map((function(t){var i=t.id,a=t.title,l=t.pid,s=t._child;return s?{value:{id:i,value:i,pid:l},label:a,children:e(s)}:{value:{id:i,value:i,pid:l},label:a}}))};t.optionsHover=a(i)}))):(this.dlog=this.name[1].label,this.isShow=!0)):(this.$message({type:"error",message:"未选中内容",duration:1500}),this.reload())}},created:function(){var e=this,t={pNum:8,p:1};r["a"].detailList(t).then((function(t){e.tableData=t.data.lists,e.total=t.data.page.count;var i=t.data.classification,a=function e(t){return t.map((function(t){var i=t.id,a=t.title,l=t.pid,s=t._child;return s?{value:{id:i,value:i,pid:l},label:a,children:e(s)}:{value:{id:i,value:i,pid:l},label:a}}))};e.options=a(i)}))}},d=c,u=i("2877"),h=Object(u["a"])(d,n,o,!1,null,"62728a9e",null),p=h.exports,m=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"details_all"},[i("div",{staticClass:"details_top"},[e._m(0),i("div",{staticClass:"details_top_right"},[i("el-button",{staticStyle:{"border-color":"#666ee8",background:"none",color:"#666ee8"},attrs:{type:"primary",icon:"iconfont el-icon-hospital-passwordai207"},on:{click:e.myreturn}},[e._v("返回 ")])],1)]),i("div",{staticClass:"details_content",attrs:{model:e.content}},[i("p",[e._v(e._s(e.content.title))]),i("p",[i("span",[e._v(e._s(e.content.create_time))])]),i("p",[e._v(" "+e._s(e.content.content)+" ")])])])},f=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"details_top_left"},[i("h5",[e._v("文章详情")])])}],v=(i("ac1f"),i("5319"),i("eefd"),{components:{},props:{},data:function(){return{content:{}}},methods:{myreturn:function(){this.$emit("returnAdd")}},created:function(){var e=this;this.bus.$on("info",(function(t){e.content=t,e.content.content=t.content.replace(/<\/?.+?>/g,"")}))}}),b=v,g=Object(u["a"])(b,m,f,!1,null,"9f46f34e",null),_=g.exports,w=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"addArticle_all"},[e._m(0),i("div",{staticClass:"addArticle_content"},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"文章标题"}},[i("el-input",{model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),i("el-form-item",{attrs:{label:"文章栏目"}},[i("el-cascader",{ref:"unitAreacode",attrs:{options:e.rules.options,props:{expandTrigger:"hover"}},on:{change:e.handleChange}})],1),i("el-form-item",{attrs:{label:"文章摘要"}},[i("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.ruleForm.abstract,callback:function(t){e.$set(e.ruleForm,"abstract",t)},expression:"ruleForm.abstract"}})],1),i("el-form-item",{attrs:{label:"文章详情"}},[i("Tinymce",{attrs:{tochild:e.parentVal},on:{onClick:e.onClick}})],1),i("el-form-item",{attrs:{label:"是否置顶",prop:"resource"}},[i("el-radio-group",{model:{value:e.ruleForm.elRadio,callback:function(t){e.$set(e.ruleForm,"elRadio",t)},expression:"ruleForm.elRadio"}},e._l(e.elRadio,(function(t,a){return i("el-radio",{key:a,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),i("el-form-item",{attrs:{label:"排序",prop:"name"}},[i("el-input",{attrs:{placeholder:"数字越大越靠前，默认0"},model:{value:e.ruleForm.sort,callback:function(t){e.$set(e.ruleForm,"sort",t)},expression:"ruleForm.sort"}})],1),i("el-form-item",{attrs:{label:"文章封面",prop:"name"}},[i("el-upload",{staticClass:"upload-demo",attrs:{action:"","on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.rules.fileList,"list-type":"picture"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传封面")]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传jpg/png文件，且不超过500kb ")])],1)],1),i("el-form-item",{attrs:{label:"是否可见",prop:"delivery"}},[i("el-switch",{attrs:{"active-value":0,"inactive-value":1,"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.ruleForm.delivery,callback:function(t){e.$set(e.ruleForm,"delivery",t)},expression:"ruleForm.delivery"}})],1)],1)],1),i("div",{staticClass:"addArticle_bottom"},[i("div",{staticClass:"addArticle_bottom_stlye"},[i("el-button",{attrs:{type:"primary",icon:"iconfont el-icon-hospital-passwordbaocun"},on:{click:e.mysubmit}},[e._v("确定 ")]),i("el-button",{attrs:{type:"primary",icon:"iconfont el-icon-hospital-passwordai207"},on:{click:e.myreturn}},[e._v("返回 ")])],1)])])},y=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"addArticle_top"},[i("div",{staticClass:"addArticle_top_div"},[i("h5",[e._v("编辑文章")])])])}],C=(i("99af"),i("4e82"),i("2fa7")),k=(i("f005"),i("54db")),$={components:{Tinymce:k["a"]},data:function(){return{parentVal:"",elRadio:[{label:"是",value:1},{label:"否",value:0}],id:"",ruleForm:{elRadio:1},rules:{options:[],fileList1:[{name:"food.jpeg",url:""},{name:"food2.jpeg",url:""}],fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],name:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],region:[{required:!0,message:"请选择活动区域",trigger:"change"}],type:[{type:"array",required:!0,message:"请至少选择一个活动性质",trigger:"change"}],resource:[{required:!0,message:"请选择活动资源",trigger:"change"}],desc:[{required:!0,message:"请填写活动形式",trigger:"blur"}]}}},methods:(a={onClick:function(e){this.ruleForm.details=e},handleChange:function(e){this.id=this.$refs["unitAreacode"].getCheckedNodes()[0].value.id},handleRemove:function(e,t){},handlePreview:function(e){}},Object(C["a"])(a,"handleRemove",(function(e,t){})),Object(C["a"])(a,"handlePreview",(function(e){})),Object(C["a"])(a,"handleExceed",(function(e,t){this.$message.warning("当前限制选择 3 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))})),Object(C["a"])(a,"beforeRemove",(function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))})),Object(C["a"])(a,"myreturn",(function(){this.$router.push("Articlelist")})),Object(C["a"])(a,"mysubmit",(function(){var e=this,t={title:this.ruleForm.title,cid:this.id,abstract:this.ruleForm["abstract"],content:this.ruleForm.details,sort:this.ruleForm.sort,is_top:this.ruleForm.elRadio,state:this.ruleForm.delivery};r["a"].detailadd(t).then((function(t){20010==t.code&&(e.$message({type:"success",message:t.msg,duration:1500}),e.$router.push("Articlelist"))}))})),a),created:function(){var e=this;this.bus.$on("ariEdit",(function(t){e.ruleForm=t.info,e.ruleForm.elRadio=t.info.is_top,e.parentVal=t.info.content,e.id=t.info.cid;var i=t.cate,a=function e(t){return t.map((function(t){var i=t.id,a=t.title,l=t.pid,s=t._child;return s?{value:{id:i,value:i,pid:l},label:a,children:e(s)}:{value:{id:i,value:i,pid:l},label:a}}))};e.rules.options=a(i)}))}},x=$,F=Object(u["a"])(x,w,y,!1,null,"22ffcaba",null),A=F.exports,E={components:{AList:p,Det:_,AriEd:A},data:function(){return{isshow:!0,ishow:!1,showEdit:!1}},methods:{myRe:function(){this.isshow=!this.isshow,this.ishow=!this.ishow},returnAdd:function(){this.isshow=!this.isshow,this.ishow=!this.ishow},abcClick:function(){this.isshow=!this.isshow,this.showEdit=!this.showEdit}}},S=E,j=Object(u["a"])(S,l,s,!1,null,"55a47ce4",null);t["default"]=j.exports},eefd:function(e,t,i){}}]);